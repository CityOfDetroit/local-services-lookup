"use strict";(self.webpackChunklocal_services_lookup=self.webpackChunklocal_services_lookup||[]).push([[179],{789:function(e,t,n){var a=n(671),r=n(466),o=n(136),i=n(963),s=n(120),c=n(407),l=n(326);function u(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,s.Z)(e);if(t){var r=(0,s.Z)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,i.Z)(this,n)}}var d=function(e){(0,o.Z)(n,e);var t=u(n);function n(){var e;(0,a.Z)(this,n),(e=t.call(this)).form=null,e.parcelStatus="Invalid",e.user=null,e.styles=document.createElement("style"),e.styles.textContent="\n            @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@100;700&display=swap')\n            label {display:block; font-family: 'Montserrat', sans-serif; font-weight: bold;}\n            #geocoder {width: 100%}\n            input {width: calc(100% - 2em); padding: 1em; border:.1em solid #e6e6e6;}\n        ";var r=e.attachShadow({mode:"open"});r.appendChild(e.styles);var o=document.createElement("article");o.id="geocoder";var i=document.createElement("form"),s=document.createElement("label"),c=document.createElement("input"),u=(document.createElement("ul"),document.createElement("datalist")),d=document.createElement("i");i.addEventListener("submit",(function(t){e.submit(t,(0,l.Z)(e))})),d.className="fas fa-map-marker-alt";var p=document.getElementsByTagName("my-home-info");s.innerText="Property Address:";try{p[0].getAttribute("data-geocoder-label")&&""!=p[0].getAttribute("data-geocoder-label")&&(s.innerText=p[0].getAttribute("data-geocoder-label"))}catch(f){}return s.setAttribute("for","geocoder-input"),c.type="text",c.setAttribute("list","addresses-list"),c.placeholder="Enter address",c.setAttribute("id","geocoder-input"),c.setAttribute("autocomplete","off"),c.addEventListener("keyup",(function(t){e.inputChange(t,(0,l.Z)(e))})),u.setAttribute("id","addresses-list"),i.appendChild(s),i.appendChild(c),i.appendChild(d),i.appendChild(u),e.form=i,o.appendChild(i),r.appendChild(o),e}return(0,r.Z)(n,[{key:"supplementGeocoder",value:function(e,t,n){var a=e.split(",");a=(a=a[0]).split(" ");var r="",o=a.length;a.forEach((function(e,t){r+=e,t<o&&t+1!==o&&(r+="+")}));var i="https://opengis.detroitmi.gov/opengis/rest/services/BaseUnits/BaseUnitGeocoder/GeocodeServer/findAddressCandidates?Address=&Address2=&Address3=&Neighborhood=&City=&Subregion=&Region=&Postal=&PostalExt=&CountryCode=&SingleLine=".concat(r,"&outFields=*&maxLocations=&matchOutOfRange=true&langCode=&locationType=&sourceCountry=&category=&location=&distance=&searchExtent=&outSR=&magicKey=&f=json");try{fetch(i).then((function(e){return e.json()})).then((function(a){if("suggestions"===n)a.candidates.forEach((function(e){var n=document.createElement("option");""===e.attributes.parcel_id?(n.value=e.address,n.setAttribute("data-parsel","no-parcel")):(n.value="".concat(e.address," RECOMMENDED"),n.setAttribute("data-parsel",e.attributes.parcel_id)),n.onclick=function(e){t.selectSuggestion(e,t)},t.form.childNodes[3].appendChild(n)}));else if(a.candidates.length){var r="https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/City_of_Detroit_Boundary/FeatureServer/0/query?where=&objectIds=&time=&geometry=".concat(a.candidates[0].location.x,"%2C+").concat(a.candidates[0].location.y,"&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=4326&returnGeometry=true&returnCentroid=false&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnDistinctValues=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=geojson&token=");try{fetch(r).then((function(e){return e.json()})).then((function(n){if(n.features.length){var r,o=document.getElementsByTagName("my-home-info"),i=null;a.candidates.forEach((function(e){""!==e.attributes.parcel_id&&t.checkParcelValid(e.attributes.parcel_id)&&(i=e)})),r=null==i?a.candidates[0].location:null,null===i?(t.parcelStatus="Invalid",t.needGeocode(e,t,r),t.clearSuggestions(t),o[0].setAttribute("data-parcel-id",JSON.stringify(a.candidates[0]))):(t.parcelStatus="Valid",t.needGeocode(e,t,r),t.clearSuggestions(t),o[0].setAttribute("data-parcel-id",JSON.stringify(i)))}else t.parcelStatus="Invalid",t.needGeocode(e,t,location),t.controller.panel.createErrorPanel(e,!0)}))}catch(o){t.parcelStatus="Invalid",t.needGeocode(e,t,location),t.controller.panel.createErrorPanel(e,!0)}}else t.parcelStatus="Invalid",t.needGeocode(e,t,location),t.controller.panel.createErrorPanel(e,!0)}))}catch(s){t.parcelStatus="Invalid",t.needGeocode(e,t,location),t.controller.panel.createErrorPanel(e,!0)}}},{key:"selectSuggestion",value:function(e,t){var n=null;"no-parcel"===(n="SPAN"===e.target.tagName?e.target.parentNode:e.target).attributes[0].value?(t.clearSuggestions(t),t.supplementGeocoder(n.innerText,t,"submit")):t.supplementGeocoder(n.innerText,t,"submit")}},{key:"inputChange",value:function(e,t){switch(e.key){case"Enter":""!=e.target.value&&void 0!=e.target.value&&t.supplementGeocoder(e.target.value,t,"submit");break;case"ArrowDown":case"ArrowUp":case"ArrowRight":case"ArrowLeft":break;case void 0:""!=e.target.value&&void 0!=e.target.value&&t.supplementGeocoder(e.target.value,t,"submit");break;default:t.clearSuggestions(t),t.supplementGeocoder(e.target.value,t,"suggestions")}}},{key:"clearSuggestions",value:function(e){for(;e.form.childNodes[3].firstChild;)e.form.childNodes[3].removeChild(e.form.childNodes[3].firstChild)}},{key:"needGeocode",value:function(e,t,n){fetch("https://us-central1-local-services-loopkup.cloudfunctions.net/getToken").then((function(e){return e.json()})).then((function(a){var r=e.split(" RECOMMENDED")[0],o=[{attributes:{valid_parcel_status:t.parcelStatus,user_input:r},geometry:{x:0,y:0}}];null!=n&&(o[0].geometry.x=n.x,o[0].geometry.y=n.y);var i=new Request("https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/addressvalidator/FeatureServer/0/addFeatures?token=".concat(a.access_token,"&features=").concat(encodeURIComponent(JSON.stringify(o)),"&f=json"),{method:"POST",body:"",headers:new Headers,mode:"cors",cache:"default"});fetch(i).then((function(e){}))}))}},{key:"checkParcelValid",value:function(e){return/\d/.test(e)}},{key:"submit",value:function(e,t){e.preventDefault(),t.supplementGeocoder(e.target[0].value,t,"submit")}}],[{key:"observedAttributes",get:function(){return["form","parcelStatus","user"]}}]),n}((0,c.Z)(HTMLElement));function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,s.Z)(e);if(t){var r=(0,s.Z)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,i.Z)(this,n)}}var f=function(e){(0,o.Z)(n,e);var t=p(n);function n(){var e;(0,a.Z)(this,n);(e=t.call(this)).attachShadow({mode:"open"});return e.navToolsStyle=document.createElement("style"),e.navToolsStyle.textContent="\n            #nav-tools-wrapper { display: flex; flex-direction: column;}\n            button.clear { font-size: 1.25em; width: 2.5em; height: 2.5em; background-color: #FEB70D; cursor: pointer; border: none; }\n            button.nav { width: 3.75em; height: 3.75em; border: none; cursor: pointer;background: #fff; }\n            button.nav:hover { background-color: #e6e6e6; transition: all 500ms cubic-bezier(.64,.09,.08,1); }\n            button.nav.active { background-color: #9fd5b3; }\n            button.nav img { width: 100%; }\n        ",e.loadNavTools((0,l.Z)(e)),e}return(0,r.Z)(n,[{key:"clearDisplay",value:function(e){console.log("clearing nav tools");for(var t=e.shadowRoot;t.firstChild;)t.removeChild(t.firstChild)}},{key:"loadNavTools",value:function(e){var t=document.getElementsByTagName("my-home-info"),n=t[0].getAttribute("data-app-mode");console.log("loading navigation");var a=e.shadowRoot;a.appendChild(e.navToolsStyle);var r=document.createElement("section");r.id="nav-tools-wrapper",r.setAttribute("role","navigation"),r.setAttribute("aria-label","Data Navigation");var o=document.createElement("button");if(o.className="clear",o.innerText="x",o.addEventListener("click",(function(e){"my-home-info"==t[0].getAttribute("data-app-mode")?t[0].setAttribute("data-app-state","welcome-screen"):t[0].setAttribute("data-app-state","active-screen"),t[0].setAttribute("data-parcel-id","none"),t[0].setAttribute("data-api-stored-datasets","{}"),t[0].setAttribute("data-api-active-datasets","none"),t[0].setAttribute("data-active-sets","assessors-data,neighborhood,recycling,rental-data,rental-cert,demo-status,blight-data,permit-data"),t[0].setAttribute("data-active-section","property")})),r.appendChild(o),"my-home-info"==n){var i=document.createElement("button"),s=document.createElement("img");s.src="/sites/default/files/2023-01/home.png",s.setAttribute("alt","about this property"),i.setAttribute("data-nav-value","about this property"),i.appendChild(s),"about this property"==t[0].getAttribute("data-active-section")?i.className="nav active":(i.className="nav",i.addEventListener("click",(function(e){if("none"!=t[0].getAttribute("data-api-active-datasets")){var n=JSON.parse(t[0].getAttribute("data-api-stored-datasets")),a=JSON.parse(t[0].getAttribute("data-api-active-datasets"));for(var r in a)r in n||(n[r]=a[r]);t[0].setAttribute("data-api-stored-datasets",JSON.stringify(n))}t[0].setAttribute("data-api-active-datasets","none"),t[0].setAttribute("data-active-sets","assessors-data,neighborhood,recycling,rental-data,rental-cert,demo-status,blight-data,permit-data"),t[0].setAttribute("data-active-section","about this property"),t[0].setAttribute("data-app-state","loading-screen")}))),r.appendChild(i);var c=document.createElement("button"),l=document.createElement("img");l.src="/sites/default/files/2023-01/government.png",l.setAttribute("alt","government officials"),c.setAttribute("data-nav-value","government officials"),"government officials"==t[0].getAttribute("data-active-section")?c.className="nav active":(c.className="nav",c.addEventListener("click",(function(e){if("none"!=t[0].getAttribute("data-api-active-datasets")){var n=JSON.parse(t[0].getAttribute("data-api-stored-datasets")),a=JSON.parse(t[0].getAttribute("data-api-active-datasets"));for(var r in a)r in n||(n[r]=a[r]);t[0].setAttribute("data-api-stored-datasets",JSON.stringify(n))}t[0].setAttribute("data-api-active-datasets","none"),t[0].setAttribute("data-active-sets","council,council-members,district-managers,business-liaison,district-inspectors,npo"),t[0].setAttribute("data-active-section","government officials"),t[0].setAttribute("data-app-state","loading-screen")}))),c.appendChild(l),r.appendChild(c);var u=document.createElement("button"),d=document.createElement("img");d.src="/sites/default/files/2023-01/zone.png",d.setAttribute("alt","special areas and zones"),u.setAttribute("data-nav-value","special areas and zones"),"special areas and zones"==t[0].getAttribute("data-active-section")?u.className="nav active":(u.className="nav",u.addEventListener("click",(function(e){if("none"!=t[0].getAttribute("data-api-active-datasets")){var n=JSON.parse(t[0].getAttribute("data-api-stored-datasets")),a=JSON.parse(t[0].getAttribute("data-api-active-datasets"));for(var r in a)r in n||(n[r]=a[r]);t[0].setAttribute("data-api-stored-datasets",JSON.stringify(n))}t[0].setAttribute("data-api-active-datasets","none"),t[0].setAttribute("data-active-sets","nez,nrsa,historicDistrict"),t[0].setAttribute("data-active-section","special areas and zones"),t[0].setAttribute("data-app-state","loading-screen")}))),u.appendChild(d),r.appendChild(u);var p=document.createElement("button"),f=document.createElement("img");f.src="/sites/default/files/2023-01/nearby.png",f.setAttribute("alt","things nearby"),p.setAttribute("data-nav-value","things nearby"),"things nearby"==t[0].getAttribute("data-active-section")?p.className="nav active":(p.className="nav",p.addEventListener("click",(function(e){if("none"!=t[0].getAttribute("data-api-active-datasets")){var n=JSON.parse(t[0].getAttribute("data-api-stored-datasets")),a=JSON.parse(t[0].getAttribute("data-api-active-datasets"));for(var r in a)r in n||(n[r]=a[r]);t[0].setAttribute("data-api-stored-datasets",JSON.stringify(n))}t[0].setAttribute("data-api-active-datasets","none"),t[0].setAttribute("data-active-sets","demos-data,improve-det"),t[0].setAttribute("data-active-section","things nearby"),t[0].setAttribute("data-app-state","loading-screen")}))),p.appendChild(f),r.appendChild(p);var m=document.createElement("button"),g=document.createElement("img");g.src="/sites/default/files/2023-01/print.png",g.setAttribute("alt","print"),m.setAttribute("data-nav-value","print"),"print"==t[0].getAttribute("data-active-section")?p.className="nav active":(m.className="nav",m.addEventListener("click",(function(){t[0].setAttribute("data-app-state","print")}))),m.appendChild(g),r.appendChild(m)}a.appendChild(r)}}]),n}((0,c.Z)(HTMLElement));function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,s.Z)(e);if(t){var r=(0,s.Z)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,i.Z)(this,n)}}customElements.define("app-geocoder",d),customElements.define("app-nav-tools",f);var g=function(e){(0,o.Z)(n,e);var t=m(n);function n(){var e;(0,a.Z)(this,n);(e=t.call(this)).attachShadow({mode:"open"});return e.neighborhoodImage=document.createElement("img"),e.neighborhoodImage.src="/sites/default/files/2023-01/neighborhood.png",e.neighborhoodImage.setAttribute("alt",""),e.welcomeStyle=document.createElement("style"),e.welcomeStyle.textContent="\n          @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@100;700&display=swap')\n          #display-wrapper { display: flex; padding: 1em; flex-wrap: wrap; font-family: 'Montserrat', sans-serif;}\n          #display-wrapper > img { max-width: 100%; }\n          #display-wrapper p { text-align: center; font-family: 'Montserrat', sans-serif;}\n          #display-wrapper button { padding: 1em 3em;  background-color: #004445; color: #fff; border: none; cursor: pointer; margin: auto; width: 100%;}\n          p.display-title { font-weight: bold; font-size: 1.25em; }\n          app-geocoder { width: 100%}\n          .btn-group { display:flex; width: 100%; }\n          @media all and (min-width: 551px) {\n            #display-wrapper{ display: flex; }\n            #display-wrapper > img { width: 15em; }\n            #display-wrapper article { flex: 1; padding: 1em; }\n          }\n        ",e.loadingStyle=document.createElement("style"),e.loadingStyle.textContent="\n        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@100;700&display=swap')\n        p { text-align: center; font-family: 'Montserrat', sans-serif;}\n        .loader-box{\n            display: flex;\n            width: 100%;\n            height: 100%;\n            background-color: rgba(255, 255, 255, .75);\n            position: absolute;\n            left: -0.2em;\n            top: -0.2em;\n        }\n        .loader-container{\n          display: flex;\n          margin: auto;\n        }\n        .loader-container article{\n          margin:auto;\n        }\n        .loader {\n            position: relative;\n            width: 75px;\n            height: 100px;\n       }\n        .loader__bar {\n            position: absolute;\n            bottom: 0;\n            width: 10px;\n            height: 50%;\n            background: #ea4961;\n            transform-origin: center bottom;\n            box-shadow: 1px 1px 0 rgba(0, 0, 0, .2);\n       }\n        .loader__bar:nth-child(1) {\n            left: 0px;\n            transform: scale(1, 0.2);\n            animation: barUp1 4s infinite;\n       }\n        .loader__bar:nth-child(2) {\n            left: 20px;\n            transform: scale(1, 0.4);\n            animation: barUp2 4s infinite;\n       }\n        .loader__bar:nth-child(3) {\n            left: 40px;\n            transform: scale(1, 0.6);\n            animation: barUp3 4s infinite;\n       }\n        .loader__bar:nth-child(4) {\n            left: 60px;\n            transform: scale(1, 0.8);\n            animation: barUp4 4s infinite;\n       }\n        .loader__bar:nth-child(5) {\n            left: 80px;\n            transform: scale(1, 1);\n            animation: barUp5 4s infinite;\n       }\n        .loader__ball {\n            position: absolute;\n            bottom: 10px;\n            left: 0;\n            width: 10px;\n            height: 10px;\n            background: #ea4961;\n            border-radius: 50%;\n            animation: ball 4s infinite;\n       }\n        @keyframes ball {\n            0% {\n                transform: translate(0, 0);\n           }\n            5% {\n                transform: translate(10px, -14px);\n           }\n            10% {\n                transform: translate(20px, -10px);\n           }\n            17% {\n                transform: translate(30px, -24px);\n           }\n            20% {\n                transform: translate(40px, -20px);\n           }\n            27% {\n                transform: translate(50px, -34px);\n           }\n            30% {\n                transform: translate(60px, -30px);\n           }\n            37% {\n                transform: translate(70px, -44px);\n           }\n            40% {\n                transform: translate(80px, -40px);\n           }\n            50% {\n                transform: translate(80px, 0);\n           }\n            57% {\n                transform: translate(70px, -14px);\n           }\n            60% {\n                transform: translate(60px, -10px);\n           }\n            67% {\n                transform: translate(50px, -24px);\n           }\n            70% {\n                transform: translate(40px, -20px);\n           }\n            77% {\n                transform: translate(30px, -34px);\n           }\n            80% {\n                transform: translate(20px, -30px);\n           }\n            87% {\n                transform: translate(10px, -44px);\n           }\n            90% {\n                transform: translate(0, -40px);\n           }\n            100% {\n                transform: translate(0, 0);\n           }\n       }\n        @keyframes barUp1 {\n            0% {\n                transform: scale(1, 0.2);\n           }\n            40% {\n                transform: scale(1, 0.2);\n           }\n            50% {\n                transform: scale(1, 1);\n           }\n            90% {\n                transform: scale(1, 1);\n           }\n            100% {\n                transform: scale(1, 0.2);\n           }\n       }\n        @keyframes barUp2 {\n            0% {\n                transform: scale(1, 0.4);\n           }\n            40% {\n                transform: scale(1, 0.4);\n           }\n            50% {\n                transform: scale(1, 0.8);\n           }\n            90% {\n                transform: scale(1, 0.8);\n           }\n            100% {\n                transform: scale(1, 0.4);\n           }\n       }\n        @keyframes barUp3 {\n            0% {\n                transform: scale(1, 0.6);\n           }\n            100% {\n                transform: scale(1, 0.6);\n           }\n       }\n        @keyframes barUp4 {\n            0% {\n                transform: scale(1, 0.8);\n           }\n            40% {\n                transform: scale(1, 0.8);\n           }\n            50% {\n                transform: scale(1, 0.4);\n           }\n            90% {\n                transform: scale(1, 0.4);\n           }\n            100% {\n                transform: scale(1, 0.8);\n           }\n       }\n        @keyframes barUp5 {\n            0% {\n                transform: scale(1, 1);\n           }\n            40% {\n                transform: scale(1, 1);\n           }\n            50% {\n                transform: scale(1, 0.2);\n           }\n            90% {\n                transform: scale(1, 0.2);\n           }\n            100% {\n                transform: scale(1, 1);\n           }\n       }       \n        ",e.resultsStyle=document.createElement("style"),e.resultsStyle.textContent="\n          .results-container{ display: flex; }\n          #data-results { background-color: #e6e6e6; padding: 1em }\n          .data-title { font-weight: bold; border-left: solid .2em #FEB70D; padding: .5em; margin: 0 0 1em 0; font-family: 'Montserrat', sans-serif;}\n          .result-address {background-color: #fff; border: solid 0.1em #e6e6e6; padding: 0.78em 0.6em; font-family: 'Montserrat', sans-serif;}\n          .data-block-title { padding: .5em; background-color: #FEB70D; margin: 0; font-weight: bold; font-family: 'Montserrat', sans-serif;}\n          .data-block-content { padding: .5em; margin-bottom: .5em; background-color: #fff; }\n          .data-block-content p { margin: 0; font-family: 'Montserrat', sans-serif;}\n          .dataset-results {flex: 1;}\n          .critical-text { color: #CF3234; }\n          @media all and (min-width: 551px) {\n            #data-blocks { column-count: 2; }\n            #data-blocks .data-block {     -webkit-column-break-inside: avoid; page-break-inside: avoid; break-inside: avoid; }\n          }\n\n          @media all and (min-width: 1024px) {\n            #data-blocks { column-count: 3; }\n            #data-blocks .data-block {     -webkit-column-break-inside: avoid; page-break-inside: avoid; break-inside: avoid; }\n          }\n        ",e.loadDisplay((0,l.Z)(e)),e}return(0,r.Z)(n,[{key:"attributeChangedCallback",value:function(e,t,n){console.log("Display - attribute: ".concat(e,", old: ").concat(t,", new: ").concat(n)),"results"==n&&this.clearDisplay(this),this.loadDisplay(this)}},{key:"clearDisplay",value:function(e){console.log("clearing display");for(var t=e.shadowRoot;t.firstChild;)t.removeChild(t.firstChild)}},{key:"formatDate",value:function(e){var t=new Date(e);return"".concat(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()]," ").concat(t.getDate(),", ").concat(t.getFullYear())}},{key:"buildCouncil",value:function(e){var t=window.location.hostname,n={title:"Council District",content:null};return n.content="\n        <p><strong>District Number:</strong> ".concat(e.data.district,'</p>\n        <p><strong>Council Member:</strong> <a href="http://').concat(t).concat(e.data.url,'" target="_blank">').concat(e.data.name,"</a></p>\n        <p><strong>Council Member Phone:</strong> ").concat(e.data.phone,"</p>\n      "),n}},{key:"buildDistrictManagers",value:function(e){console.log("building district manager");var t={title:"District Managers",content:null};return e&&0!=Object.keys(e.data).length&&e.data.constructor===Object&&"Not found."!==e.data.detail?t.content='\n          <p><strong>District Manager:</strong> <a href="'.concat(e.data.manager.url,'" target="_blank">').concat(e.data.manager.name,"</a></p>\n          <p><strong>Manager Phone:</strong> ").concat(e.data.manager.phone,'</p>\n          <p><strong>Deputy Manager:</strong> <a href="').concat(e.data.deputy.url,'" target="_blank">').concat(e.data.deputy.name,"</a></p>\n          <p><strong>Deputy Manager Phone:</strong> ").concat(e.data.deputy.phone,"</p>\n          "):t.content="\n            <p>No data found</p>\n          ",console.log(t),t}},{key:"buildBusinessLiaison",value:function(e){var t={title:"Business Liaison",content:null};return e&&0!=Object.keys(e.data).length&&e.data.constructor===Object&&"Not found."!==e.data.detail?t.content="\n          <p><strong>Liaison:</strong> ".concat(e.data.name,"</p>\n          <p><strong>Liaison Phone:</strong> ").concat(e.data.email,"</p>\n          "):t.content="\n            <p>No data found</p>\n          ",t}},{key:"buildInspector",value:function(e){console.log("building inspector");var t={title:"Enforcement Inspector",content:null};return e&&0!=Object.keys(e.data).length&&e.data.constructor===Object&&"Not found."!==e.data.detail?t.content="\n          <p><strong>Inspector:</strong> ".concat(e.data.name,"</p>\n          <p><strong>Inspector Phone:</strong> ").concat(e.data.phone,"</p>\n          "):t.content="\n            <p>No data found</p>\n          ",console.log(t),t}},{key:"buildNeighborhood",value:function(e){var t={title:"Neighborhood",content:null};return e&&0!=Object.keys(e.data).length&&e.data.constructor===Object&&"Not found."!==e.data.detail?t.content="\n            <p><strong>Neighborhood name:</strong> ".concat(e.data.attributes.neighborhood_name,"</p>\n          "):t.content="\n            <p>No neighborhood found</p>\n          ",t}},{key:"buildDWSDBackupProtection",value:function(e){var t=["Aviation Sub","Barton-McFarland","Chadsey Condon","Cornerstone Village","East English Village","Morningside","Jefferson Chalmers","Warrendale","Victoria Park","Moross-Morang","Garden View"];return e.neighborhood&&e.neighborhood.data.features.length?t.includes(e.neighborhood.data.features[0].attributes.nhood_name)?'\n            <article class="info-section">\n              <span>DWSD Basement Backup Protection Program</span>\n              <div>\n                <p>You qualify for the DWSD Basement Backup Protection Program.</p>\n                <a href="https://app.smartsheet.com/b/form/509cb1e905a74948bce7b0135da53277?Property%20Street%20Address='.concat(e.title,"&Property%20City=Detroit&Property%20Zip%20Code=").concat(e["assessors-data"].data.zipcode,"&Neighborhood=").concat(e.neighborhood.data.features[0].attributes.nhood_name,'" target="_blank"><button>Apply Now</button></a>\n              </div>\n            </article>'):'\n            <article class="info-section">\n              <span>DWSD Basement Backup Protection Program</span>\n              <div>\n                <p>You don\'t qualify for the Basement Backup Protection Program. To learn more please <a href="https://detroitmi.gov/departments/water-and-sewerage-department/dwsd-resources/basement-flooding-protection">visit our page.</a></p>\n              </div>\n            </article>':e.DWSDBackupProtection&&e.DWSDBackupProtection.data.features.length?t.includes(e.DWSDBackupProtection.data.features[0].attributes.nhood_name)?'\n            <article class="info-section">\n              <span>DWSD Basement Backup Protection Program</span>\n              <div>\n                <p>You qualify for the DWSD Basement Backup Protection Program.</p>\n                <a href="https://app.smartsheet.com/b/form/509cb1e905a74948bce7b0135da53277?Property%20Street%20Address='.concat(e.title,"&Property%20City=Detroit&Property%20Zip%20Code=").concat(e["assessors-data"].data.zipcode,"&Neighborhood=").concat(e.DWSDBackupProtection.data.features[0].attributes.nhood_name,'" target="_blank"><button>Apply Now</button></a>\n              </div>\n            </article>'):'\n            <article class="info-section">\n              <span>DWSD Basement Backup Protection Program</span>\n              <div>\n                <p>You don\'t qualify for the Basement Backup Protection Program. To learn more please <a href="https://detroitmi.gov/departments/water-and-sewerage-department/dwsd-resources/basement-flooding-protection">visit our page.</a></p>\n              </div>\n            </article>':'\n          <article class="info-section">\n            <span>DWSD Basement Backup Protection Program</span>\n            <div>\n              <p>You don\'t qualify for the Basement Backup Protection Program. To learn more please <a href="https://detroitmi.gov/departments/water-and-sewerage-department/dwsd-resources/basement-flooding-protection">visit our page.</a></p>\n            </div>\n          </article>'}},{key:"buildHistoricDistrict",value:function(e,t){var n={title:"NEZ Homestead Zone",content:null};return 0!=Object.keys(e.data).length&&e.data.constructor===Object&&e.data.features.length>0?n.content="\n          <p><strong>NAME:</strong> ".concat(e.data.features[0].attributes.Name,"</p>\n          <p><strong>DESIGNATED ON:</strong> ").concat(t.formatDate(e.data.features[0].attributes.Year_Enacted).format("MMM DD, YYYY"),"</p>\n          "):n.content="\n          <p>This property is not in a historic district.</p>\n          ",n}},{key:"buildNEZ",value:function(e){var t={title:"NEZ Homestead Zone",content:null};return 0!=Object.keys(e.data).length&&e.data.constructor===Object&&e.data.features.length>0?t.content="\n          <p><strong>Name:</strong> ".concat(e.data.features[0].attributes.RNNAME,"</p>\n          <p><strong>ID:</strong> ").concat(e.data.features[0].attributes.RID,'</p>\n          <p class="noprint"><a href="https://data.detroitmi.gov/datasets/proposed-nez-homestead-2021/explore" target="_blank">View Map</a></p>\n          '):t.content='\n          <p>This property is not on a NEZ Homestead zone.</p>\n          <p class="noprint"><a href="https://data.detroitmi.gov/datasets/nez-h-districts/explore" target="_blank">View Map</a></p>\n          ',t}},{key:"buildNRSA",value:function(e){var t={title:"Neighborhood Revitalization Strategy Areas (NRSA)",content:null};return 0!=Object.keys(e.data).length&&e.data.constructor===Object&&e.data.features.length>0?t.content="\n          <p><strong>Name:</strong> ".concat(e.data.features[0].attributes.Name,"</p>\n          "):t.content="\n          <p>This property is not on a NRSA.</p>\n          ",t}},{key:"buildNPO",value:function(e){var t={title:"Police",content:null};return e&&e.data.features.length?(console.log("building police section"),t.content="\n          <p><strong>PRECINCT</strong></p>\n          <p><strong>Number:</strong> ".concat(e.data.features[0].attributes.precinct,"</p>\n          <p><strong>Address:</strong> ").concat(e.data.features[0].attributes.precinct_location,"</p>\n          <br>\n          <p><strong>NEIGHBORHOOD POLICE OFFICER (NPO)</strong></p>\n          <p><strong>Name:</strong> ").concat(e.data.features[0].attributes.police_officer,"</p>\n          <p><strong>Phone:</strong> ").concat(e.data.features[0].attributes.phone_number,"</p>\n          <p><strong>Email:</strong> ").concat(e.data.features[0].attributes.email,"</p>\n          ")):t.content="<p>No police info found</p>",t}},{key:"checkRecyclingStatus",value:function(e){try{if(e.next_pickups["yard waste"]){var t=null,n=null;return e.details.forEach((function(e){"start-date"==e.type&&"yard waste"==e.service&&(t=null!=e.normalDay?e.normalDay:e.newDay),"end-date"==e.type&&"yard waste"==e.service&&(n=null!=e.normalDay?e.normalDay:e.newDay)})),!!moment(e.next_pickups["yard waste"].next_pickup).isBetween(t,n)}return!1}catch(a){return!1}}},{key:"buildRecycling",value:function(e,t){var n={title:"Trash & Recycling",content:null};if(e&&0!=Object.keys(e.data).length&&e.data.constructor===Object){var a={name:null,url:null,phone:null};"GFL"===e.data.next_pickups.trash.contractor?(a.name="GFL",a.url="http://gflusa.com/residential/detroit/",a.phone="(844) 464-3587"):(a.name="WM",a.url="http://www.advanceddisposal.com/mi/detroit/detroit-residential-collection",a.phone=" (844) 233-8764"),n.content='\n            <p><strong>Provider:</strong> <a href="'.concat(a.url,'" target="_blank">').concat(a.name,"</a> ").concat(a.phone,"</p>\n            <p><strong>Next Trash:</strong> ").concat(t.formatDate(e.data.next_pickups.trash.next_pickup),"</p>\n            <p><strong>Next Recycling:</strong> ").concat(t.formatDate(e.data.next_pickups.recycling.next_pickup),"</p>\n            <p><strong>Next Bulk:</strong> ").concat(t.formatDate(e.data.next_pickups.bulk.next_pickup),"</p>\n            ").concat(t.checkRecyclingStatus(e.data)?tempHTML+="<p><strong>Next Yard:</strong> ".concat(t.formatDate(e.data.next_pickups["yard waste"].next_pickup),"</p>"):"","\n          ")}else n.content="<p>No data found</p>";return n}},{key:"buildAssessors",value:function(e){var t={title:"Assessor's Data",content:null};if(e&&0!=Object.keys(e.data).length&&e.data.constructor===Object&&"Not found."!==e.data.detail){var n={year:null,value:null,floor:null,buildingClass:null};t.content="\n            <p><strong>Owner's address:</strong> ".concat(e.data.ownerstreetaddr,"</p>\n            <p><strong>Owner's city:</strong> ").concat(e.data.ownercity,"</p>\n            <p><strong>Owner's state:</strong> ").concat(e.data.ownerstate,"</p>\n            <p><strong>Owner's zip:</strong> ").concat(e.data.ownerzip,"</p>\n          "),0===e.data.resb_bldgclass?(n.year=e.data.cib_yearbuilt,n.value=e.data.cib_value,n.floor=e.data.cib_yearbuilt,n.buildingClass=e.data.cib_yearbuilt):(n.year=e.data.resb_yearbuilt,n.value=e.data.resb_value,n.floor=e.data.resb_floorarea,n.buildingClass=e.data.resb_bldgclass),t.content+="\n            <p><strong>Parcel number:</strong> ".concat(e.data.pnum,"</p>\n            <p><strong>Year build:</strong> ").concat(n.year,"</p>\n            <p><strong>Calculated value:</strong> $").concat(n.value.toLocaleString(),"</p>\n            <p><strong>Floor area:</strong> ").concat(n.floor.toLocaleString()," SQFT</p>\n            <p><strong>Building class:</strong> ").concat(n.buildingClass,"</p>\n          ")}else t.content="<p>No data found</p>";return t}},{key:"buildRental",value:function(e,t){var n=document.getElementsByTagName("my-home-info"),a=JSON.parse(n[0].getAttribute("data-api-active-datasets")),r={title:"Rental Enforcement Status",content:null};return e&&e.data.features.length||a["rental-cert-data"]&&a["rental-cert-data"].data.features.length?r.content="\n            <p><strong>Registered:</strong> ".concat(e.data.features.length?"".concat(t.formatDate(e.data.features[0].attributes.date_status)):"Not registered","</p>\n            <p><strong>Certified:</strong> ").concat(a["rental-cert-data"].data.features.length?"".concat(t.formatDate(a["rental-cert-data"].data.features[0].attributes.issued_date)):"Not certified","</p>\n          "):r.content="\n          <p><strong>Registered:</strong> Not registered</p>\n          <p><strong>Certified:</strong> Not certified</p>\n          ",r}},{key:"buildFireEscrow",value:function(e){var t="";return e&&e.data.features.length?t+='\n            <article class="info-section">\n            <span>FIRE ESCROW</span>\n            <div>\n              <p><strong>STATUS:</strong> Fire Escrow found</p>\n              <p><a href="https://detroitmi.gov/taxonomy/term/8501"><button>Start Process</button></a></p>\n            </div>\n            </article>':t+='\n          <article class="info-section">\n            <span>FIRE ESCROW</span>\n            <div>\n              <p><strong>STATUS:</strong> Fire Escrow not found</p>\n            </div>\n            </article>',t}},{key:"buildBlight",value:function(e,t){var n={title:"Blight Tickets",content:null};return e&&e.data.features.length?n.content="\n            <p><strong>Ticket ID:</strong> ".concat(e.attributes.ticket_number,"</p>\n            <p><strong>Fine Amount:</strong> $").concat(e.attributes.fine_amount,"</p>\n            <p><strong>Agency name:</strong> ").concat(e.attributes.agency_name,"</p>\n            <p><strong>Disposition:</strong> ").concat(e.attributes.disposition,"</p>\n            <p><strong>Description:</strong> ").concat(e.attributes.violation_description,"</p>\n            <p><strong>Hearing Date:</strong> ").concat(t.formatDate(e.attributes.hearing_date),"</p>\n            <p><strong>Hearing Time:</strong> ").concat(e.attributes.hearing_time,"</p>\n          "):n.content="<p>No blight tickets found</p>",n}},{key:"buildPermit",value:function(e,t){var n={title:"Building Permits",content:null};return e&&e.data.features.length?n.content="\n          <p><strong>PERMIT NUMBER:</strong> ".concat(e.attributes.record_id,"</p>\n          <p><strong>PERMIT TYPE:</strong> ").concat(e.attributes.permit_type,"</p>\n          <p><strong>PERMIT BUILDING TYPE:</strong> ").concat(e.attributes.permit_type,"</p>\n          <p><strong>PERMIT STATUS:</strong> ").concat(e.attributes.status,"</p>\n          <p><strong>PERMIT ISSUED:</strong> ").concat(t.formatDate(e.attributes.issued_date),"</p>\n          <p><strong>PERMIT DESCRIPTION:</strong> ").concat(e.attributes.description_of_work,"</p>\n          "):n.content="<p>No building permits found</p>",n}},{key:"buildDemoStatus",value:function(e,t){var n=document.getElementsByTagName("my-home-info"),a=JSON.parse(n[0].getAttribute("data-parcel-id")).address.replace(" ","%2520");a=a.replace(",","%252C");var r={title:"Demolition Status",content:null};return console.log(e),e&&e.data.features.length?r.content='\n            <p class="critical-text"><strong>WARNIG!</strong></p>\n            <p>THIS PROPERTY IS SCHEDULED FOR DEMOLITION</p> \n            '.concat(null==e.data.features[0].attributes.demolish_by_date?"<p><strong>Date to be determined</strong></p>":"<p><strong>".concat(t.formatDate(e.attributes.demolish_by_date),'</stron></p>\n            <p><a href="https://detroitmi.maps.arcgis.com/apps/instant/nearby/index.html?appid=41ba8dd946d842b9ba632ecc0a5d2556&sliderDistance=1&find=').concat(a,'" target="_blank">Expand your demo search</a></p>\n            '),"\n          "):r.content='\n          <p>This property is not on the demolition list</p>\n          <p><a href="https://detroitmi.maps.arcgis.com/apps/instant/nearby/index.html?appid=41ba8dd946d842b9ba632ecc0a5d2556&sliderDistance=1&find='.concat(a,'" target="_blank">Expand your demo search</a></p>'),r}},{key:"buildDemosNear",value:function(e,t){var n={title:"Demolitions Nearby",content:null};return e&&e.data.features.length?e.data.features.forEach((function(e,a){0==a?n.content="\n              <p><strong>Address:</strong> ".concat(e.attributes.address,"</p>\n              <p><strong>Commercial:</strong> ").concat(e.attributes.commercial_building,"</p>\n              <p><strong>Price:</strong> $").concat(parseInt(e.attributes.price).toLocaleString(),"</p>\n              <p><strong>Parcel:</strong> ").concat(e.attributes.parcel_id,"</p>\n              <p><strong>Contractor:</strong> ").concat(e.attributes.contractor_name,"</p>\n              <p><strong>Council District:</strong> ").concat(e.attributes.council_district,"</p>\n              <p><strong>Neighborhood:</strong> ").concat(e.attributes.neighborhood,"</p>\n              ").concat(void 0==e.attributes.demolish_by_date||null==e.attributes.demolish_by_date?"<p><p><strong>Expected Date:</strong> Date to be determined</p>":"<p><strong>Expected Date:</strong>".concat(t.formatDate(e.attributes.demolish_by_date),"</stron></p>\n              <p><strong>Expected Date:</strong> ").concat(t.formatDate(e.attributes.demolish_by_date),"</p>"),"\n              <br>\n              "):n.content+="\n              <p><strong>Address:</strong> ".concat(e.attributes.address,"</p>\n              <p><strong>Commercial:</strong> ").concat(e.attributes.commercial_building,"</p>\n              <p><strong>Price:</strong> $").concat(parseInt(e.attributes.price).toLocaleString(),"</p>\n              <p><strong>Parcel:</strong> ").concat(e.attributes.parcel_id,"</p>\n              <p><strong>Contractor:</strong> ").concat(e.attributes.contractor_name,"</p>\n              <p><strong>Council District:</strong> ").concat(e.attributes.council_district,"</p>\n              <p><strong>Neighborhood:</strong> ").concat(e.attributes.neighborhood,"</p>\n              ").concat(null==e.attributes.demolish_by_date?"<p><p><strong>Expected Date:</strong> Date to be determined</p>":"<p><strong>Expected Date:</strong>".concat(t.formatDate(e.attributes.demolish_by_date),"</stron></p>\n              <p><strong>Expected Date:</strong> ").concat(t.formatDate(e.attributes.demolish_by_date),"</p>"),"\n              <br>\n              ")})):n.content="<p>No demolitions are happening nearby.</p>",n}},{key:"buildImproveDet",value:function(e,t){var n={title:"Improve Detroit Issues Nearby",content:null};return e&&e.data.features.length?e.data.features.forEach((function(e,a){0==a?n.content='\n              <p><strong>ID:</strong> <a href="'.concat(e.attributes.web_url,'" target="_blank">').concat(e.attributes.id,"</a></p>\n              <p><strong>Type:</strong> ").concat(e.attributes.request_type_title,"</p>\n              <p><strong>Status:</strong> ").concat(e.attributes.status,"</p>\n              <p><strong>Reported on:</strong> ").concat(t.formatDate(e.attributes.created_at),"</p>\n              <br>\n              "):n.content+='\n              <p><strong>ID:</strong> <a href="'.concat(e.attributes.web_url,'" target="_blank">').concat(e.attributes.id,"</a></p>\n              <p><strong>Type:</strong> ").concat(e.attributes.request_type_title,"</p>\n              <p><strong>Status:</strong> ").concat(e.attributes.status,"</p>\n              <p><strong>Reported on:</strong> ").concat(t.formatDate(e.attributes.created_at),"</p>\n              <br>\n              ")})):n.content="<p>No active issues nearby.</p>",n}},{key:"selectDataBlockType",value:function(e,t){switch(t.id){case"council-members":try{return e.buildCouncil(t)}catch(n){return console.log(n),""}break;case"district-managers":try{return e.buildDistrictManagers(t)}catch(n){return console.log(n),""}break;case"business-liaison":try{return e.buildBusinessLiaison(t)}catch(n){return console.log(n),""}break;case"district-inspectors":try{return e.buildInspector(t)}catch(n){return console.log(n),""}break;case"neighborhood":try{return e.buildNeighborhood(t)}catch(n){return console.log(n),""}break;case"nez":try{return e.buildNEZ(t)}catch(n){return console.log(n),""}break;case"nrsa":try{return e.buildNRSA(t)}catch(n){return console.log(n),""}break;case"assessors-data":try{return e.buildAssessors(t)}catch(n){return console.log(n),""}break;case"permit-data":try{return e.buildPermit(t,e)}catch(n){return console.log(n),""}break;case"rental-data":try{return e.buildRental(t,e)}catch(n){return console.log(n),""}break;case"blight-data":try{return e.buildBlight(t,e)}catch(n){return console.log(n),""}break;case"demos-data":try{return e.buildDemosNear(t,e)}catch(n){return console.log(n),""}break;case"demo-status":try{return e.buildDemoStatus(t)}catch(n){return console.log(n),""}break;case"npo":try{return e.buildNPO(t)}catch(n){return console.log(n),""}break;case"improve-det":try{return e.buildImproveDet(t,e)}catch(n){return console.log(n),""}break;case"recycling":try{return e.buildRecycling(t,e)}catch(n){return console.log(n),""}break;case"historicDistrict":try{return e.buildHistoricDistrict(t)}catch(n){return console.log(n),""}break;case"fireEscrow":try{return e.buildFireEscrow(t)}catch(n){return console.log(n),""}break;case"DWSDBackupProtection":try{return e.buildDWSDBackupProtection(values)}catch(n){return""}break;default:return""}}},{key:"printInfo",value:function(e){var t=e.buildDataSection(e),n=window.open("","","height=500, width=500");n.document.write("<html>"),n.document.write("<head><style>@media print {.noprint { visibility: hidden;} p.data-block-title{border-bottom: 1px solid;} }</style></head>"),n.document.write("<body >"),n.document.write(t.children[1].innerHTML),n.document.write("</body>"),n.document.close(),n.print()}},{key:"buildDataBlock",value:function(e,t){var n=document.createElement("article");n.className="data-block",console.log(t);var a=e.selectDataBlockType(e,t);if(console.log(a),void 0==a||null==a.content)return null;var r=document.createElement("p");r.className="data-block-title",r.innerText=a.title,n.appendChild(r);var o=document.createElement("article");return o.className="data-block-content",o.innerHTML=a.content,n.appendChild(o),n}},{key:"buildDataSection",value:function(e){var t=document.getElementsByTagName("my-home-info"),n=t[0].getAttribute("data-app-mode"),a=document.createElement("section");if(a.id="data-results","my-home-info"==n){var r=document.createElement("p");r.className="data-title",r.innerText=t[0].getAttribute("data-active-section").toUpperCase(),a.appendChild(r)}var o=document.createElement("div");o.id="data-blocks",a.appendChild(o);var i=JSON.parse(t[0].getAttribute("data-api-active-datasets"));for(var s in i)Object.hasOwnProperty.call(i,s)&&null!=e.buildDataBlock(e,i[s])&&o.appendChild(e.buildDataBlock(e,i[s]));return a}},{key:"loadDisplay",value:function(e){var t=e.shadowRoot,n=document.createElement("section"),a=document.createElement("app-geocoder"),r=document.createElement("app-nav-tools"),o=document.getElementsByTagName("my-home-info");switch(r.printInfo=e.printInfo,n.id="display-wrapper",this.getAttribute("data-display-type")){case"welcome":t.appendChild(e.welcomeStyle),n.appendChild(this.neighborhoodImage);var i=document.createElement("article");n.appendChild(i);var s=document.createElement("p");s.setAttribute("aria-label","title"),s.innerText="It\u2019s all here. All in one place.",s.className="display-title",i.appendChild(s);var c=document.createElement("p");c.innerText="Enter your home address to find out your city councilmember and neighborhood district manager, along with local information about trash/recycling, your neighborhood police officer, city issues reported in your neighborhood, and more.",i.appendChild(c);var l=document.createElement("div");l.className="btn-group";var u=document.createElement("button");u.innerText="Start",u.addEventListener("click",(function(e){document.getElementsByTagName("my-home-info")[0].setAttribute("data-app-state","active-screen")})),l.appendChild(u),i.appendChild(l),t.appendChild(n);break;case"active":t.appendChild(e.welcomeStyle),n.appendChild(a),t.appendChild(n);break;case"loading":t.appendChild(e.loadingStyle);var d=document.createElement("article");d.innerHTML='\n                <article class="loader-container">\n                    <article>\n                    <div class="loader">\n                        <div class="loader__bar"></div>\n                        <div class="loader__bar"></div>\n                        <div class="loader__bar"></div>\n                        <div class="loader__bar"></div>\n                        <div class="loader__bar"></div>\n                        <div class="loader__ball"></div>\n                    </div>\n                    <p>LOADING</p>\n                    </article>\n                </article>',n.appendChild(d),t.appendChild(n);break;case"results":var p=JSON.parse(o[0].getAttribute("data-parcel-id"));t.appendChild(e.resultsStyle);var f=document.createElement("section");f.className="results-container",f.appendChild(r);var m=document.createElement("article");m.className="dataset-results";var g=document.createElement("article");g.className="result-address",g.innerText=p.address,m.appendChild(g);var h=e.buildDataSection(e);m.appendChild(h),f.appendChild(m),n.appendChild(f),t.appendChild(n);break;case"print":p=JSON.parse(o[0].getAttribute("data-parcel-id")),t.appendChild(e.resultsStyle),(f=document.createElement("section")).className="results-container",f.appendChild(r),(m=document.createElement("article")).className="dataset-results",(g=document.createElement("article")).className="result-address",g.innerText=p.address,m.appendChild(g),h=e.buildDataSection(e),m.appendChild(h),f.appendChild(m),n.appendChild(f),t.appendChild(n),e.printInfo(e)}}}],[{key:"observedAttributes",get:function(){return["data-display-type"]}}]),n}((0,c.Z)(HTMLElement));function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,s.Z)(e);if(t){var r=(0,s.Z)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,i.Z)(this,n)}}var b=n(530),y=n(55),v=function(e){(0,o.Z)(n,e);var t=h(n);function n(){var e;(0,a.Z)(this,n);var r=(e=t.call(this)).attachShadow({mode:"open"}),o=document.createElement("section");return o.id="loader-wrapper",r.appendChild(o),e}return(0,r.Z)(n,[{key:"attributeChangedCallback",value:function(e,t,n){this.shadowRoot;if(console.log("Loader - attribute: ".concat(e,", old: ").concat(t,", new: ").concat(n)),"data-loader-state"===e)this.clearLoader(this),this.loadLoader(this)}},{key:"getDataSets",value:function(){var e=document.getElementsByTagName("my-home-info"),t=e[0].getAttribute("data-active-sets").split(","),n=JSON.parse(e[0].getAttribute("data-parcel-id")),a=[],r=new Promise((function(e,t){if("CONDO BUILDING"!=n.attributes.parcel_id){var a="https://apis.detroitmi.gov/assessments/parcel/"+n.attributes.parcel_id+"/";return fetch(a).then((function(e){return e.json()})).then((function(t){e({id:"assessors-data",data:t})})).catch((function(e){}))}e({id:"assessors-data",data:null})})),o=new Promise((function(e,t){e({id:"neighborhood",data:n})})),i=new Promise((function(e,t){return e({id:"council",data:n})})),s=new Promise((function(e,t){return fetch("/rest/district-managers?_format=json").then((function(e){return e.json()})).then((function(t){e({id:"district-managers",data:t})})).catch((function(e){}))})),c=new Promise((function(e,t){return fetch("/rest/district-inspectors?_format=json").then((function(e){return e.json()})).then((function(t){e({id:"district-inspectors",data:t})})).catch((function(e){}))})),l=new Promise((function(e,t){return fetch("/rest/council-members?_format=json").then((function(e){return e.json()})).then((function(t){e({id:"council-members",data:t})})).catch((function(e){}))})),u=new Promise((function(e,t){var a="https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/Current_City_of_Detroit_Neighborhoods/FeatureServer/0/query?where=&objectIds=&time=&geometry=".concat(n.location.x,"%2C").concat(n.location.y,"&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&returnCentroid=false&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json&token=");return fetch(a).then((function(e){return e.json()})).then((function(t){e({id:"DWSDBackupProtection",data:t})})).catch((function(e){}))})),d=new Promise((function(e,t){var a="https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/NRSA_2020/FeatureServer/0/query?where=&objectIds=&time=&geometry=".concat(n.location.x,"%2C").concat(n.location.y,"&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&returnCentroid=false&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json&token=");return fetch(a).then((function(e){return e.json()})).then((function(t){e({id:"nrsa",data:t})})).catch((function(e){}))})),p=new Promise((function(e,t){var a="https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/NEZHOMESTEAD2021/FeatureServer/0/query?where=&objectIds=&time=&geometry=".concat(n.location.x,"%2C").concat(n.location.y,"&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&returnCentroid=false&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json&token=");return fetch(a).then((function(e){return e.json()})).then((function(t){e({id:"nez",data:t})})).catch((function(e){}))})),f=(new Promise((function(e,t){var a="https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/NEZ_H_Districts/FeatureServer/0/query?where=&objectIds=&time=&geometry=".concat(n.location.x,"%2C").concat(n.location.y,"&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&returnCentroid=false&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json&token=");return fetch(a).then((function(e){return e.json()})).then((function(t){e({id:"nezOld",data:t})})).catch((function(e){}))})),new Promise((function(e,t){var a="https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/BuildingPermits/FeatureServer/0/query?where=parcel_id+%3D+%27".concat(n.attributes.parcel_id,"%27&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=3&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json");return fetch(a).then((function(e){return e.json()})).then((function(t){e({id:"permit-data",data:t})})).catch((function(e){}))}))),m=new Promise((function(e,t){var a;return a="CONDO BUILDING"!=n.attributes.parcel_id?"https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/RentalStatuses/FeatureServer/0/query?where=parcel_id+%3D+%27".concat(n.attributes.parcel_id,"%27&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json"):"https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/RentalStatuses/FeatureServer/0/query?where=&objectIds=&time=&geometry=".concat(n.location.x,"%2C+").concat(n.location.y,"&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelIndexIntersects&distance=&units=esriSRUnit_Foot&relationParam=&outFields=*&returnGeometry=true&maxAllowableOffset=&geometryPrecision=&outSR=&gdbVersion=&returnDistinctValues=false&returnIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&multipatchOption=&resultOffset=&resultRecordCount=&f=json"),fetch(a).then((function(e){return e.json()})).then((function(t){e({id:"rental-data",data:t})})).catch((function(e){}))})),g=new Promise((function(e,t){var a;return a="CONDO BUILDING"!=n.attributes.parcel_id?"https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/active_cofc/FeatureServer/0/query?where=parcel_id%3D%27".concat(n.attributes.parcel_id,"%27&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=1&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json"):"https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/active_cofc/FeatureServer/0/query?where=&objectIds=&time=&geometry=".concat(n.location.x,"%2C+").concat(n.location.y,"&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelIndexIntersects&distance=&units=esriSRUnit_Foot&relationParam=&outFields=*&returnGeometry=true&maxAllowableOffset=&geometryPrecision=&outSR=&gdbVersion=&returnDistinctValues=false&returnIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&multipatchOption=&resultOffset=&resultRecordCount=&f=json"),fetch(a).then((function(e){return e.json()})).then((function(t){e({id:"rental-cert-data",data:t})})).catch((function(e){}))})),h=new Promise((function(e,t){var a="https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/Blight_Violations_(DAH)/FeatureServer/0/query?where=parcelno%3D%27".concat(n.attributes.parcel_id,"%27&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=violation_date&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=2&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json&token=");return fetch(a).then((function(e){return e.json()})).then((function(t){e({id:"blight-data",data:t})})).catch((function(e){}))})),v=new Promise((function(e,t){var a="https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/Property_Sales/FeatureServer/0/query?where=PARCEL_NO%3D%27".concat(n.attributes.parcel_id,"%27&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=4326&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=SALE_DATE&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=2&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json&token=");return fetch(a).then((function(e){return e.json()})).then((function(t){e({id:"sales-data",data:t})})).catch((function(e){}))})),_=new Promise((function(e,t){var a=new Date,r=("".concat(a.getFullYear(),"-").concat(a.getMonth()+1,"-").concat(a.getDate()),"".concat(a.getFullYear(),"-").concat(a.getMonth()+6,"-").concat(a.getDate()),b.point([n.location.x,n.location.y])),o=b.buffer(r,1,{units:"miles"}),i=b.simplify(o.geometry,{tolerance:.005,highQuality:!1}),s=y.convert(i),c="https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/Demolitions_under_Contract/FeatureServer/0/query?where=&objectIds=&time=&geometry=".concat(encodeURI(JSON.stringify(s)),"&geometryType=esriGeometryPolygon&inSR=&spatialRel=esriSpatialRelIntersects&relationParam=&outFields=*&returnGeometry=true&returnTrueCurves=false&maxAllowableOffset=&geometryPrecision=&outSR=4326&returnIdsOnly=false&returnCountOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&gdbVersion=&returnDistinctValues=false&resultOffset=&resultRecordCount=3&f=json");return fetch(c).then((function(e){return e.json()})).then((function(t){e({id:"demos-data",data:t})})).catch((function(e){}))})),S=new Promise((function(e,t){var a="https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/Demolitions_under_Contract/FeatureServer/0/query?where=parcel_id+%3D+%27".concat(n.attributes.parcel_id,"%27&objectIds=&time=&geometry=&geometryType=esriGeometryPolygon&inSR=&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=4326&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=demolish_by_date&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=1&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json&token=");return fetch(a).then((function(e){return e.json()})).then((function(t){e({id:"demo-status",data:t})})).catch((function(e){}))})),k=(new Promise((function(e,t){var a=b.point([n.location.x,n.location.y]),r=b.buffer(a,1,{units:"miles"}),o=b.simplify(r.geometry,{tolerance:.005,highQuality:!1}),i=y.convert(o),s="https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/Schools2017/FeatureServer/0/query?where=1%3D1&text=&objectIds=&time=&geometry="+encodeURI(JSON.stringify(i))+"&geometryType=esriGeometryPolygon&inSR=&spatialRel=esriSpatialRelIntersects&relationParam=&outFields=*&returnGeometry=true&returnTrueCurves=false&maxAllowableOffset=&geometryPrecision=&outSR=4326&returnIdsOnly=false&returnCountOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&gdbVersion=&returnDistinctValues=false&resultOffset=&resultRecordCount=&f=json";return fetch(s).then((function(e){return e.json()})).then((function(t){e({id:"schools",data:t})})).catch((function(e){}))})),new Promise((function(e,t){var a="https://opengis.detroitmi.gov/opengis/rest/services/PublicSafety/NeighborhoodPoliceOfficers/FeatureServer/0/query?where=&objectIds=&time=&geometry=".concat(n.location.x,"%2C").concat(n.location.y,"&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelIntersects&resultType=none&distance=1&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&returnCentroid=false&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=4326&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnDistinctValues=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json&token=");return fetch(a).then((function(e){return e.json()})).then((function(t){e({id:"npo",data:t})})).catch((function(e){}))}))),D=new Promise((function(e,t){var a=b.point([n.location.x,n.location.y]),r=b.buffer(a,300,{units:"meters"}),o=b.simplify(r.geometry,{tolerance:.005,highQuality:!1}),i=y.convert(o),s="https://opengis.detroitmi.gov/opengis/rest/services/DoIT/ImproveDetroitIssues/FeatureServer/0/query?where=status+%3C%3E+%27Closed%27+and+status+%3C%3E+%27Archived%27&objectIds=&time=&geometry=".concat(encodeURI(JSON.stringify(i)),"&geometryType=esriGeometryPolygon&inSR=&spatialRel=esriSpatialRelIntersects&relationParam=&outFields=*&returnGeometry=true&returnTrueCurves=false&maxAllowableOffset=&geometryPrecision=&outSR=4326&returnIdsOnly=false&returnCountOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&gdbVersion=&returnDistinctValues=false&resultOffset=&resultRecordCount=3&f=json");return fetch(s).then((function(e){return e.json()})).then((function(t){e({id:"improve-det",data:t})})).catch((function(e){}))})),C=new Promise((function(e,t){var a="https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/WasteCollectionAreas/FeatureServer/0/query?where=&text=&objectIds=&time=&geometry="+n.location.x+"%2C+"+n.location.y+"&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelWithin&relationParam=&outFields=*&returnGeometry=true&returnTrueCurves=false&maxAllowableOffset=&geometryPrecision=&outSR=&returnIdsOnly=false&returnCountOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&gdbVersion=&returnDistinctValues=false&resultOffset=&resultRecordCount=&f=json";fetch(a).then((function(e){return e.json()})).then((function(t){var n=new Date,a=n.getMonth()+1,r=n.getFullYear(),o="https://apis.detroitmi.gov/waste_schedule/details/".concat(t.features[0].attributes.FID,"/year/").concat(r,"/month/").concat(a,"/");return fetch(o).then((function(e){return e.json()})).then((function(t){e({id:"recycling",data:t})}))})).catch((function(e){}))})),E=new Promise((function(e,t){var a="https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/Detroit_Local_Historic_Districts/FeatureServer/0/query?where=&text=&objectIds=&time=&geometry="+n.location.x+"%2C+"+n.location.y+"&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelWithin&relationParam=&outFields=*&returnGeometry=true&returnTrueCurves=false&maxAllowableOffset=&geometryPrecision=&outSR=&returnIdsOnly=false&returnCountOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&gdbVersion=&returnDistinctValues=false&resultOffset=&resultRecordCount=&f=json";fetch(a).then((function(e){return e.json()})).then((function(t){e({id:"historicDistrict",data:t})})).catch((function(e){}))})),x=new Promise((function(e,t){var a="https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/fie_properties_final/FeatureServer/0/query?where=parcel_id%3D%27".concat(n.attributes.parcel_id,"%27&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnHiddenFields=false&returnGeometry=true&returnCentroid=false&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json&token=");return fetch(a).then((function(e){return e.json()})).then((function(t){e({id:"fireEscrow",data:t})})).catch((function(e){}))}));return console.log("------------- list of query data --------------"),console.log(t),t.forEach((function(e){switch(e){case"council":a.push(i);break;case"neighborhood":a.push(o);break;case"assessors-data":null!=n.attributes.parcel_id&&""!=n.attributes.parcel_id&&("CONDO BUILDING"==n.attributes.parcel_id||a.push(r));break;case"permit-data":null!=n.attributes.parcel_id&&""!=n.attributes.parcel_id&&a.push(f);break;case"blight-data":null!=n.attributes.parcel_id&&""!=n.attributes.parcel_id&&a.push(h);break;case"salesHistoryData":null!=n.attributes.parcel_id&&""!=n.attributes.parcel_id&&a.push(v);break;case"fireEscrow":null!=n.attributes.parcel_id&&""!=n.attributes.parcel_id&&a.push(x);break;case"nez":a.push(p);break;case"nrsa":a.push(d);break;case"demos-data":a.push(_);break;case"npo":a.push(k);break;case"improve-det":a.push(D);break;case"recycling":a.push(C);break;case"rental-data":null!=n.attributes.parcel_id&&""!=n.attributes.parcel_id&&a.push(m);break;case"rental-cert":a.push(g);break;case"demo-status":null!=n.attributes.parcel_id&&""!=n.attributes.parcel_id&&a.push(S);break;case"historicDistrict":a.push(E);break;case"district-managers":a.push(s);break;case"district-inspectors":a.push(c);break;case"council-members":a.push(l);break;case"DWSDBackupProtection":filters.includes("neighborhood")||a.push(u)}})),console.log(a),a}},{key:"buildCouncilData",value:function(e){var t={council:{district:"District ".concat(e.council.data.attributes.council_district),districtURL:null,name:null,url:null,phone:null},dmanager:{name:null,url:"/departments/department-of-neighborhoods/district-".concat(e.council.data.attributes.council_district,"#block-views-block-contacts-special-block-1"),phone:null},ddmanager:{name:null,url:"/departments/department-of-neighborhoods/district-".concat(e.council.data.attributes.council_district,"#block-views-block-contacts-special-block-1"),phone:null},bliaision:{name:null,email:null},enforcement:{name:null,phone:null}};switch(e.council.data.attributes.council_district){case"1":t.council.districtURL="/taxonomy/term/1276",e["council-members"].data.forEach((function(e){"1276"==e.tid&&(t.council.name=e.field_organization_head_name,t.council.url="/taxonomy/term/1276",t.council.phone=e.field_phone)})),e["district-managers"].data.forEach((function(e){e.field_contact_position.includes("District 1 Manager")&&(t.dmanager.name=e.title,t.dmanager.phone=e.field_telephone),e.field_contact_position.includes("District 1 Deputy Manager")&&(t.ddmanager.name=e.title,t.ddmanager.phone=e.field_telephone),e.field_contact_position.includes("District 1 Business Liaison")&&(t.bliaision.name=e.title,t.bliaision.email=e.field_email_address)})),e["district-inspectors"].data.forEach((function(e){e.field_responsibilities.includes("District 1")&&(t.enforcement.name=e.title,t.enforcement.phone=e.field_telephone)}));break;case"2":t.council.districtURL="/taxonomy/term/1476",e["council-members"].data.forEach((function(e){"1476"==e.tid&&(t.council.name=e.field_organization_head_name,t.council.url="/taxonomy/term/1476",t.council.phone=e.field_phone)})),e["district-managers"].data.forEach((function(e){e.field_contact_position.includes("District 2 Manager")&&(t.dmanager.name=e.title,t.dmanager.phone=e.field_telephone),e.field_contact_position.includes("District 2 Deputy Manager")&&(t.ddmanager.name=e.title,t.ddmanager.phone=e.field_telephone),e.field_contact_position.includes("District 2 Business Liaison")&&(t.bliaision.name=e.title,t.bliaision.email=e.field_email_address)})),e["district-inspectors"].data.forEach((function(e){e.field_responsibilities.includes("District 2")&&(t.enforcement.name=e.title,t.enforcement.phone=e.field_telephone)}));break;case"3":t.council.districtURL="/taxonomy/term/1481",e["council-members"].data.forEach((function(e){"1481"==e.tid&&(t.council.name=e.field_organization_head_name,t.council.url="/taxonomy/term/1481",t.council.phone=e.field_phone)})),e["district-managers"].data.forEach((function(e){e.field_contact_position.includes("District 3 Manager")&&(t.dmanager.name=e.title,t.dmanager.phone=e.field_telephone),e.field_contact_position.includes("District 3 Deputy Manager")&&(t.ddmanager.name=e.title,t.ddmanager.phone=e.field_telephone),e.field_contact_position.includes("District 3 Business Liaison")&&(t.bliaision.name=e.title,t.bliaision.email=e.field_email_address)})),e["district-inspectors"].data.forEach((function(e){e.field_responsibilities.includes("District 3")&&(t.enforcement.name=e.title,t.enforcement.phone=e.field_telephone)}));break;case"4":t.council.districtURL="/taxonomy/term/1486",e["council-members"].data.forEach((function(e){"1486"==e.tid&&(t.council.name=e.field_organization_head_name,t.council.url="/taxonomy/term/1486",t.council.phone=e.field_phone)})),e["district-managers"].data.forEach((function(e){e.field_contact_position.includes("District 4 Manager")&&(t.dmanager.name=e.title,t.dmanager.phone=e.field_telephone),e.field_contact_position.includes("District 4 Deputy Manager")&&(t.ddmanager.name=e.title,t.ddmanager.phone=e.field_telephone),e.field_contact_position.includes("District 4 Business Liaison")&&(t.bliaision.name=e.title,t.bliaision.email=e.field_email_address)})),e["district-inspectors"].data.forEach((function(e){e.field_responsibilities.includes("District 4")&&(t.enforcement.name=e.title,t.enforcement.phone=e.field_telephone)}));break;case"5":t.council.districtURL="/taxonomy/term/1346",e["council-members"].data.forEach((function(e){"1346"==e.tid&&(t.council.name=e.field_organization_head_name,t.council.url="/taxonomy/term/1346",t.council.phone=e.field_phone)})),e["district-managers"].data.forEach((function(e){e.field_contact_position.includes("District 5 Manager")&&(t.dmanager.name=e.title,t.dmanager.phone=e.field_telephone),e.field_contact_position.includes("District 5 Deputy Manager")&&(t.ddmanager.name=e.title,t.ddmanager.phone=e.field_telephone),e.field_contact_position.includes("District 5 Business Liaison")&&(t.bliaision.name=e.title,t.bliaision.email=e.field_email_address)})),e["district-inspectors"].data.forEach((function(e){e.field_responsibilities.includes("District 5")&&(t.enforcement.name=e.title,t.enforcement.phone=e.field_telephone)}));break;case"6":console.log("building district 6"),t.council.districtURL="/taxonomy/term/1491",console.log(e["council-members"].data),e["council-members"].data.forEach((function(e){if("1491"==e.tid){var n=e.field_phone.replace("Office: ","");n=(n=n.replace(/ /g,"-")).replace(/[()]/g,""),t.council.name=e.field_organization_head_name,t.council.url="/taxonomy/term/1491",t.council.phone='<a href="tel:'.concat(n,'">').concat(e.field_phone,"</a>")}})),e["district-managers"].data.forEach((function(e){if(e.field_contact_position.includes("District 6 Manager")){var n=e.field_telephone.replace(/ /g,"-");n=n.replace(/[()]/g,""),t.dmanager.name=e.title,t.dmanager.phone='<a href="tel:'.concat(n,'">').concat(e.field_telephone,"</a>")}if(e.field_contact_position.includes("District 6 Deputy Manager")){var a=e.field_telephone.replace(/ /g,"-");a=a.replace(/[()]/g,""),t.ddmanager.name=e.title,t.ddmanager.phone='<a href="tel:'.concat(a,'">').concat(e.field_telephone,"</a>")}e.field_contact_position.includes("District 6 Business Liaison")&&(t.bliaision.name=e.title,t.bliaision.email=e.field_email_address)})),e["district-inspectors"].data.forEach((function(e){if(e.field_responsibilities.includes("District 6")){console.log("found inspector");var n=e.field_telephone.replace(/ /g,"-");n=n.replace(/[()]/g,""),t.enforcement.name=e.title,t.enforcement.phone='<a href="tel:'.concat(n,'">').concat(e.field_telephone,"</a>")}}));break;case"7":t.council.districtURL="/taxonomy/term/1511",e["council-members"].data.forEach((function(e){"1511"==e.tid&&(t.council.name=e.field_organization_head_name,t.council.url="/taxonomy/term/1511",t.council.phone=e.field_phone)})),e["district-managers"].data.forEach((function(e){e.field_contact_position.includes("District 7 Manager")&&(t.dmanager.name=e.title,t.dmanager.phone=e.field_telephone),e.field_contact_position.includes("District 7 Deputy Manager")&&(t.ddmanager.name=e.title,t.ddmanager.phone=e.field_telephone),e.field_contact_position.includes("District 7 Business Liaison")&&(t.bliaision.name=e.title,t.bliaision.email=e.field_email_address)})),e["district-inspectors"].data.forEach((function(e){e.field_responsibilities.includes("District 7")&&(t.enforcement.name=e.title,t.enforcement.phone=e.field_telephone)}));break;default:console.log("not inside city")}return t}},{key:"getData",value:function(e){var t=document.getElementsByTagName("my-home-info"),n=t[0].getAttribute("data-active-sets").split(","),a=(JSON.parse(t[0].getAttribute("data-parcel-id")),JSON.parse(t[0].getAttribute("data-api-stored-datasets"))),r=!1;for(var o in a)n.includes(o)&&(r=!0);if(r){console.log("loading stored data");var i={};n.forEach((function(e){i[e]=a[e]})),t[0].setAttribute("data-api-active-datasets",JSON.stringify(i)),t[0].setAttribute("data-app-state","results")}else{console.log("getting data from apis");var s=e.getDataSets();Promise.all(s).then((function(a){console.log(a);var r={};for(var o in a)null!=a[o]?r[a[o].id]=a[o]:initialLoadChecker=!1;if(console.log(r),console.log(n),n.includes("council")){var i=e.buildCouncilData(r);console.log(i),r["council-members"]={id:"council-members",data:i.council};var s={manager:i.dmanager,deputy:i.ddmanager};r["district-managers"]={id:"district-managers",data:s},r["business-liaison"]={id:"business-liaison",data:i.bliaision},r["district-inspectors"]={id:"district-inspectors",data:i.enforcement}}if(n.includes("DWSDBackupProtection"))try{r.DWSDBackupProtection||(r.DWSDBackupProtection={id:"DWSDBackupProtection",data:r.neighborhood.data})}catch(c){}console.log(r),t[0].setAttribute("data-api-active-datasets",JSON.stringify(r)),t[0].setAttribute("data-app-state","results")})).catch((function(e){}))}}},{key:"clearLoader",value:function(e){for(var t=e.shadowRoot;t.firstChild;)t.removeChild(t.firstChild)}},{key:"loadLoader",value:function(e){var t=e.shadowRoot,n=document.createElement("section");switch(n.id="loader-wrapper",e.getAttribute("data-loader-state")){case"active":e.getData(e);var a=document.createElement("p");a.innerText="Loading DATA",n.appendChild(a),t.appendChild(n);break;case"finished":var r=document.createElement("p");r.innerText="Data loaded",n.appendChild(r),t.appendChild(n)}}}],[{key:"observedAttributes",get:function(){return["data-loader-state","data-parcel-id"]}}]),n}((0,c.Z)(HTMLElement));function _(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,s.Z)(e);if(t){var r=(0,s.Z)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,i.Z)(this,n)}}customElements.define("app-display",g),customElements.define("app-data-loader",v);var S=function(e){(0,o.Z)(n,e);var t=_(n);function n(){var e;(0,a.Z)(this,n);var r=(e=t.call(this)).attachShadow({mode:"open"}),o=document.getElementsByTagName("my-home-info")[0].getAttribute("data-app-state"),i=document.createElement("section");i.id="app-wrapper";var s=document.createElement("app-display");return"active-screen"==o?s.setAttribute("data-display-type","active"):s.setAttribute("data-display-type","welcome"),i.appendChild(s),r.appendChild(i),e}return(0,r.Z)(n,[{key:"attributeChangedCallback",value:function(e,t,n){this.shadowRoot;var a=document.getElementsByTagName("my-home-info")[0].getAttribute("data-app-mode");switch(console.log("App - attribute: ".concat(e,", old: ").concat(t,", new: ").concat(n)),e){case"data-app-state":null!=t&&(this.clearApp(this),this.loadApp(this));break;case"data-parcel-id":"none"!=n?this.setAttribute("data-app-state","loading-screen"):"my-home-info"==a&&this.setAttribute("data-app-state","welcome-screen")}}},{key:"clearApp",value:function(e){console.log("clearing app");for(var t=e.shadowRoot;t.firstChild;)t.removeChild(t.firstChild)}},{key:"loadApp",value:function(e){var t=e.shadowRoot,n=document.createElement("section");n.id="app-wrapper";var a=document.createElement("app-display"),r=document.createElement("app-data-loader");switch(e.getAttribute("data-app-state")){case"welcome-screen":a.setAttribute("data-display-type","welcome"),n.appendChild(a);break;case"active-screen":a.setAttribute("data-display-type","active"),n.appendChild(a);break;case"loading-screen":a.setAttribute("data-display-type","loading"),r.setAttribute("data-loader-state","active"),n.appendChild(a);break;case"results":a.setAttribute("data-display-type","results"),n.appendChild(a);break;case"print":a.setAttribute("data-display-type","print"),n.appendChild(a)}console.log(t.firstChild),null==t.firstChild&&t.appendChild(n)}}],[{key:"observedAttributes",get:function(){return["data-app-state","data-parcel-id"]}}]),n}((0,c.Z)(HTMLElement));customElements.define("my-home-info",S)}},function(e){e.O(0,[578,47,600,489],(function(){return t=789,e(e.s=t);var t}));e.O()}]);