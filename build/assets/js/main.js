!function(){try{var t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e=(new Error).stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="3b53f17b-2808-4901-9527-c3f5569823f1",t._sentryDebugIdIdentifier="sentry-dbid-3b53f17b-2808-4901-9527-c3f5569823f1")}catch(t){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"e76cbc730a30c8c3131e84f6ce866822d1aec358"},(self.webpackChunklocal_services_lookup=self.webpackChunklocal_services_lookup||[]).push([[179],{2789:(t,e,a)=>{class r extends HTMLElement{static get observedAttributes(){return["form","parcelStatus","user"]}constructor(){super(),this.form=null,this.parcelStatus="Invalid",this.user=null,this.styles=document.createElement("style"),this.styles.textContent="\n            @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@100;700&display=swap')\n            #geocoder {width: 100%}\n            input {width: calc(100% - 2em); padding: 1em; border:.1em solid #e6e6e6; font-size: 1em;}\n        ";const t=this.attachShadow({mode:"open"});t.appendChild(this.styles);const e=document.createElement("article");e.id="geocoder";let a=document.createElement("form"),r=document.createElement("label");r.style.fontFamily="Montserrat, sans-serif",r.style.fontWeight="bold";let n=document.createElement("input"),i=(document.createElement("ul"),document.createElement("datalist")),s=document.createElement("i");a.addEventListener("submit",(t=>{this.submit(t,this)})),s.className="fas fa-map-marker-alt";const o=document.getElementsByTagName("my-home-info");r.innerText="Property Address:";try{o[0].getAttribute("data-geocoder-label")&&""!=o[0].getAttribute("data-geocoder-label")&&(r.innerText=o[0].getAttribute("data-geocoder-label"))}catch(l){}r.setAttribute("for","geocoder-input"),n.type="text",n.setAttribute("list","addresses-list"),n.placeholder="Enter address",n.setAttribute("id","geocoder-input"),n.setAttribute("autocomplete","off"),n.addEventListener("keyup",(t=>{this.inputChange(t,this)})),i.setAttribute("id","addresses-list"),a.appendChild(r),a.appendChild(n),a.appendChild(s),a.appendChild(i),this.form=a,e.appendChild(a),t.appendChild(e)}supplementGeocoder(t,e,a){const r=document.getElementsByTagName("my-home-info");let n=t.split(",");n=n[0],n=n.split(" ");let i="",s=n.length;n.forEach((function(t,e){i+=t,e<s&&e+1!==s&&(i+="+")}));let o=`https://opengis.detroitmi.gov/opengis/rest/services/BaseUnits/BaseUnitGeocoder/GeocodeServer/findAddressCandidates?Address=&Address2=&Address3=&Neighborhood=&City=&Subregion=&Region=&Postal=&PostalExt=&CountryCode=&SingleLine=${i}&outFields=*&maxLocations=&matchOutOfRange=true&langCode=&locationType=&sourceCountry=&category=&location=&distance=&searchExtent=&outSR=&magicKey=&f=json`;try{fetch(o).then((t=>t.json())).then((function(n){if("suggestions"===a)n.candidates.forEach((t=>{let a=document.createElement("option");""===t.attributes.parcel_id?(a.value=t.address,a.setAttribute("data-parsel","no-parcel")):(a.value=`${t.address} RECOMMENDED`,a.setAttribute("data-parsel",t.attributes.parcel_id)),a.onclick=t=>{e.selectSuggestion(t,e)},e.form.childNodes[3].appendChild(a)}));else if(n.candidates.length){let a=`https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/City_of_Detroit_Boundary/FeatureServer/0/query?where=&objectIds=&time=&geometry=${n.candidates[0].location.x}%2C+${n.candidates[0].location.y}&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=4326&returnGeometry=true&returnCentroid=false&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnDistinctValues=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=geojson&token=`;try{fetch(a).then((t=>t.json())).then((function(a){if(a.features.length){let a,i=null;n.candidates.forEach((t=>{""!==t.attributes.parcel_id&&e.checkParcelValid(t.attributes.parcel_id)&&(i=t)})),a=null==i?n.candidates[0].location:null,null===i?(e.parcelStatus="Invalid",e.needGeocode(t,e,a),e.clearSuggestions(e),r[0].setAttribute("data-parcel-id",JSON.stringify(n.candidates[0]))):(e.parcelStatus="Valid",e.needGeocode(t,e,a),e.clearSuggestions(e),r[0].setAttribute("data-parcel-id",JSON.stringify(i)))}else e.parcelStatus="Invalid",e.needGeocode(t,e,location),e.clearSuggestions(e),r[0].setAttribute("data-app-state","error")}))}catch(i){e.parcelStatus="Invalid",e.needGeocode(t,e,location),e.clearSuggestions(e),r[0].setAttribute("data-app-state","error")}}else e.parcelStatus="Invalid",e.needGeocode(t,e,location),e.clearSuggestions(e),r[0].setAttribute("data-app-state","error")}))}catch(l){e.parcelStatus="Invalid",e.needGeocode(t,e,location),e.clearSuggestions(e),r[0].setAttribute("data-app-state","error")}}selectSuggestion(t,e){let a=null;a="SPAN"===t.target.tagName?t.target.parentNode:t.target,"no-parcel"===a.attributes[0].value?(e.clearSuggestions(e),e.supplementGeocoder(a.innerText,e,"submit")):e.supplementGeocoder(a.innerText,e,"submit")}inputChange(t,e){switch(t.key){case"Enter":""!=t.target.value&&void 0!=t.target.value&&e.supplementGeocoder(t.target.value,e,"submit");break;case"ArrowDown":case"ArrowUp":case"ArrowRight":case"ArrowLeft":break;case void 0:""!=t.target.value&&void 0!=t.target.value&&e.supplementGeocoder(t.target.value,e,"submit");break;default:e.clearSuggestions(e),e.supplementGeocoder(t.target.value,e,"suggestions")}}clearSuggestions(t){for(;t.form.childNodes[3].firstChild;)t.form.childNodes[3].removeChild(t.form.childNodes[3].firstChild)}needGeocode(t,e,a){fetch("https://us-central1-local-services-loopkup.cloudfunctions.net/getToken").then((t=>t.json())).then((function(r){let n=t.split(" RECOMMENDED")[0],i=[{attributes:{valid_parcel_status:e.parcelStatus,user_input:n},geometry:{x:0,y:0}}];null!=a&&(i[0].geometry.x=a.x,i[0].geometry.y=a.y);let s=new Request(`https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/addressvalidator/FeatureServer/0/addFeatures?token=${r.access_token}&features=${encodeURIComponent(JSON.stringify(i))}&f=json`,{method:"POST",body:"",headers:new Headers,mode:"cors",cache:"default"});fetch(s).then((t=>{}))}))}checkParcelValid(t){return/\d/.test(t)}submit(t,e){t.preventDefault(),e.supplementGeocoder(t.target[0].value,e,"submit")}}class n extends HTMLElement{constructor(){super();this.attachShadow({mode:"open"});this.navToolsStyle=document.createElement("style"),this.navToolsStyle.textContent="\n            #nav-tools-wrapper { display: flex; flex-direction: column;}\n            button.clear { font-size: 1.25em; width: 2.5em; height: 2.5em; background-color: #FEB70D; cursor: pointer; border: none; }\n            button.nav { width: 3.75em; height: 3.75em; border: none; cursor: pointer;background: #fff; }\n            button.nav:hover { background-color: #e6e6e6; transition: all 500ms cubic-bezier(.64,.09,.08,1); }\n            button.nav.active { background-color: #9fd5b3; }\n            button.nav img { width: 100%; }\n        ",this.loadNavTools(this)}clearDisplay(t){const e=t.shadowRoot;for(;e.firstChild;)e.removeChild(e.firstChild)}loadNavTools(t){const e=document.getElementsByTagName("my-home-info"),a=e[0].getAttribute("data-app-state"),r=e[0].getAttribute("data-app-mode"),n=e[0].getAttribute("data-inital-sets"),i=e[0].getAttribute("data-initial-map-available"),s=t.shadowRoot;s.appendChild(t.navToolsStyle);const o=document.createElement("section");o.id="nav-tools-wrapper",o.setAttribute("role","navigation"),o.setAttribute("aria-label","Data Navigation");const l=document.createElement("cod-button");if(l.addEventListener("click",(t=>{"my-home-info"==e[0].getAttribute("data-app-mode")?(e[0].setAttribute("data-app-state","welcome-screen"),e[0].setAttribute("data-active-sets","assessors-data,neighborhood,recycling,rental-data,rental-cert,demo-status,blight-data,permit-data,DWSDBackupProtection")):(e[0].setAttribute("data-app-state","active-screen"),e[0].setAttribute("data-active-sets",n)),"true"==i?e[0].setAttribute("data-map-available","true"):e[0].setAttribute("data-map-available","false"),e[0].setAttribute("data-parcel-id","none"),e[0].setAttribute("data-api-stored-datasets","{}"),e[0].setAttribute("data-api-active-datasets","none"),e[0].setAttribute("data-active-section","property")})),l.setAttribute("data-primary",!0),l.setAttribute("data-label","x"),l.setAttribute("data-size","lg"),l.setAttribute("data-hover",!1),l.setAttribute("data-extra-classes","fw-bold"),l.setAttribute("data-background-color","warning"),l.setAttribute("data-img",""),l.setAttribute("data-img-alt",""),l.setAttribute("data-shape","square"),l.setAttribute("data-icon",""),o.appendChild(l),"my-home-info"==r&&"error"!=a){const t=document.createElement("cod-button");t.setAttribute("data-label",""),t.setAttribute("data-size","lg"),t.setAttribute("data-img","https://detroitmi.gov/sites/detroitmi.localhost/files/2023-01/home.png"),t.setAttribute("data-img-alt","about this property"),t.setAttribute("data-shape","square"),t.setAttribute("data-nav-value","about this property"),t.setAttribute("data-icon",""),"about this property"==e[0].getAttribute("data-active-section")?(t.setAttribute("data-background-color","success"),t.setAttribute("data-primary",!0)):(t.setAttribute("data-background-color","secondary"),t.setAttribute("data-primary",!1),t.addEventListener("click",(t=>{if("none"!=e[0].getAttribute("data-api-active-datasets")){let t=JSON.parse(e[0].getAttribute("data-api-stored-datasets")),a=JSON.parse(e[0].getAttribute("data-api-active-datasets"));for(const e in a)e in t||(t[e]=a[e]);e[0].setAttribute("data-api-stored-datasets",JSON.stringify(t))}e[0].setAttribute("data-api-active-datasets","none"),e[0].setAttribute("data-active-sets","assessors-data,neighborhood,recycling,rental-data,rental-cert,demo-status,blight-data,permit-data,DWSDBackupProtection"),e[0].setAttribute("data-map-available","false"),e[0].setAttribute("data-active-section","about this property"),e[0].setAttribute("data-app-state","loading-screen")}))),o.appendChild(t);const a=document.createElement("cod-button");a.setAttribute("data-label",""),a.setAttribute("data-size","lg"),a.setAttribute("data-img","https://detroitmi.gov/sites/detroitmi.localhost/files/2023-01/government.png"),a.setAttribute("data-img-alt","government officials"),a.setAttribute("data-shape","square"),a.setAttribute("data-nav-value","government officials"),a.setAttribute("data-icon",""),"government officials"==e[0].getAttribute("data-active-section")?(a.setAttribute("data-background-color","success"),a.setAttribute("data-primary",!0)):(a.setAttribute("data-background-color","secondary"),a.setAttribute("data-primary",!1),a.addEventListener("click",(t=>{if("none"!=e[0].getAttribute("data-api-active-datasets")){let t=JSON.parse(e[0].getAttribute("data-api-stored-datasets")),a=JSON.parse(e[0].getAttribute("data-api-active-datasets"));for(const e in a)e in t||(t[e]=a[e]);e[0].setAttribute("data-api-stored-datasets",JSON.stringify(t))}e[0].setAttribute("data-api-active-datasets","none"),e[0].setAttribute("data-active-sets","council,council-members,bop-members,district-managers,business-liaison,district-inspectors,npo"),e[0].setAttribute("data-map-available","false"),e[0].setAttribute("data-active-section","government officials"),e[0].setAttribute("data-app-state","loading-screen")}))),o.appendChild(a);const r=document.createElement("cod-button");r.setAttribute("data-label",""),r.setAttribute("data-size","lg"),r.setAttribute("data-img","https://detroitmi.gov/sites/detroitmi.localhost/files/2023-01/zone.png"),r.setAttribute("data-img-alt","special areas and zones"),r.setAttribute("data-shape","square"),r.setAttribute("data-nav-value","special areas and zones"),r.setAttribute("data-icon",""),"special areas and zones"==e[0].getAttribute("data-active-section")?(r.setAttribute("data-background-color","success"),r.setAttribute("data-primary",!0)):(r.setAttribute("data-background-color","secondary"),r.setAttribute("data-primary",!1),r.addEventListener("click",(t=>{if("none"!=e[0].getAttribute("data-api-active-datasets")){let t=JSON.parse(e[0].getAttribute("data-api-stored-datasets")),a=JSON.parse(e[0].getAttribute("data-api-active-datasets"));for(const e in a)e in t||(t[e]=a[e]);e[0].setAttribute("data-api-stored-datasets",JSON.stringify(t))}e[0].setAttribute("data-api-active-datasets","none"),e[0].setAttribute("data-active-sets","nez,nrsa,historicDistrict"),e[0].setAttribute("data-map-available","false"),e[0].setAttribute("data-active-section","special areas and zones"),e[0].setAttribute("data-app-state","loading-screen")}))),o.appendChild(r);const n=document.createElement("cod-button");n.setAttribute("data-label",""),n.setAttribute("data-size","lg"),n.setAttribute("data-img","https://detroitmi.gov/sites/detroitmi.localhost/files/2023-01/nearby.png"),n.setAttribute("data-img-alt","things nearby"),n.setAttribute("data-shape","square"),n.setAttribute("data-nav-value","things nearby"),n.setAttribute("data-icon",""),"things nearby"==e[0].getAttribute("data-active-section")?(n.setAttribute("data-background-color","success"),n.setAttribute("data-primary",!0)):(n.setAttribute("data-background-color","secondary"),n.setAttribute("data-primary",!1),n.addEventListener("click",(t=>{if("none"!=e[0].getAttribute("data-api-active-datasets")){let t=JSON.parse(e[0].getAttribute("data-api-stored-datasets")),a=JSON.parse(e[0].getAttribute("data-api-active-datasets"));for(const e in a)e in t||(t[e]=a[e]);e[0].setAttribute("data-api-stored-datasets",JSON.stringify(t))}e[0].setAttribute("data-api-active-datasets","none"),e[0].setAttribute("data-active-sets","schools,demos-data,stabilization-data,improve-det"),e[0].setAttribute("data-active-section","things nearby"),e[0].setAttribute("data-map-available","true"),e[0].setAttribute("data-app-state","loading-screen")}))),o.appendChild(n);const i=document.createElement("cod-button");i.setAttribute("data-label",""),i.setAttribute("data-size","lg"),i.setAttribute("data-img","https://detroitmi.gov/sites/detroitmi.localhost/files/2023-01/print.png"),i.setAttribute("data-img-alt","print"),i.setAttribute("data-shape","square"),i.setAttribute("data-nav-value","print"),i.setAttribute("data-icon",""),"print"==e[0].getAttribute("data-active-section")?(i.setAttribute("data-background-color","success"),i.setAttribute("data-primary",!0)):(i.setAttribute("data-background-color","secondary"),i.setAttribute("data-primary",!1),i.addEventListener("click",(t=>{t.target.getAttribute("data-nav-value")&&e[0].setAttribute("data-app-state","print")}))),o.appendChild(i)}s.appendChild(o)}}customElements.define("app-geocoder",r),customElements.define("app-nav-tools",n);class i extends HTMLElement{static get observedAttributes(){return["data-display-type","data-pagination"]}constructor(){super();this.attachShadow({mode:"open"});this.neighborhoodImage=document.createElement("img"),this.neighborhoodImage.src="https://detroitmi.gov/sites/detroitmi.localhost/files/2023-01/neighborhood.png",this.neighborhoodImage.setAttribute("alt",""),this.welcomeStyle=document.createElement("style"),this.welcomeStyle.textContent="\n          @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@100;700&display=swap')\n          #display-wrapper { display: flex; padding: 1em; flex-wrap: wrap; font-family: 'Montserrat', sans-serif;}\n          #display-wrapper #welcome-img-wrapper { display: flex; }\n          #display-wrapper #welcome-img-wrapper img { height: 10em; margin: auto }\n          #display-wrapper p { text-align: center; font-family: 'Montserrat', sans-serif;}\n          #display-wrapper button { padding: 1em 3em;  background-color: #004445; color: #fff; border: none; cursor: pointer; margin: auto; width: 100%;}\n          p.display-title { font-weight: bold; font-size: 1.25em; }\n          app-geocoder { width: 100%}\n          .btn-group { display:flex; width: 100%; }\n          @media all and (min-width: 551px) {\n            #display-wrapper{ display: flex; }\n            #display-wrapper #welcome-img-wrapper img { width: 15em; height: auto; }\n            #display-wrapper article { flex: 1; padding: 1em; }\n          }\n        ",this.resultsStyle=document.createElement("style"),this.resultsStyle.textContent="\n          .results-container{ display: flex; }\n          #data-results { background-color: #e6e6e6; padding: 1em; height: 40em; overflow-y: auto; }\n          .data-title { font-weight: bold; border-left: solid .2em #FEB70D; padding: .5em; margin: 0 0 1em 0; font-family: 'Montserrat', sans-serif;}\n          .result-address {background-color: #fff; border: solid 0.1em #e6e6e6; padding: 1.04em 0.6em; font-family: 'Montserrat', sans-serif;}\n          .data-block-title { padding: .5em; background-color: #FEB70D; margin: 0; font-weight: bold; font-family: 'Montserrat', sans-serif; display: flex;}\n          .data-block-title span { flex: 1; margin: auto; }\n          .data-block-content { padding: .5em; margin-bottom: .5em; background-color: #fff; }\n          .data-block-content p { margin: 0; font-family: 'Montserrat', sans-serif;}\n          .data-block-content hr { border-top: 1px dotted;}\n          .dataset-results {flex: 1;}\n          .critical-text { color: #CF3234; }\n          .error-result { padding: 1em; }\n          .data-block-title button { background-color: #fff; border: none; padding: 0.25em 0.5em; box-shadow: 1px 1px 3px 0px rgb(0 0 0 / 75%);}\n          .data-block-title button img { height: 1em; }\n          @media all and (min-width: 551px) {\n            #data-results { height: auto; }\n            #data-blocks { column-count: 2; }\n            #data-blocks .data-block {     -webkit-column-break-inside: avoid; page-break-inside: avoid; break-inside: avoid; }\n          }\n\n          @media all and (min-width: 1024px) {\n            #data-results { height: auto; }\n            #data-blocks { column-count: 3; }\n            #data-blocks .data-block {     -webkit-column-break-inside: avoid; page-break-inside: avoid; break-inside: avoid; }\n          }\n        ",this.loadDisplay(this)}attributeChangedCallback(t,e,a){"results"==a&&this.clearDisplay(this),"data-pagination"==t&&this.clearDisplay(this),this.loadDisplay(this)}clearDisplay(t){const e=t.shadowRoot;for(;e.firstChild;)e.removeChild(e.firstChild)}formatDate(t){const e=new Date(t);return`${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()]} ${e.getDate()}, ${e.getFullYear()}`}buildCouncil(t){let e=window.location.hostname,a={title:"Council District",content:null};return a.content=`\n        <p><strong>District Number:</strong> ${t.data.district}</p>\n        <p><strong>Council Member:</strong> <a href="http://${e}${t.data.url}" target="_blank">${t.data.name}</a></p>\n        <p><strong>Council Member Phone:</strong> ${t.data.phone}</p>\n      `,a}buildBOP(t){let e=window.location.hostname,a={title:"Police Commissioner",content:null};return a.content=`\n        <p><strong>Commissioner:</strong> <a href="http://${e}${t.data.url}" target="_blank">${t.data.name}</a></p>\n        <p><strong>Commissioner's Phone:</strong> ${t.data.phone}</p>\n        <p><strong>Commissioner's Email:</strong> ${t.data.email}</p>\n      `,a}buildDistrictManagers(t){let e={title:"District Managers",content:null};return t&&0!=Object.keys(t.data).length&&t.data.constructor===Object&&"Not found."!==t.data.detail?e.content=`\n          <p><strong>District Manager:</strong> <a href="${t.data.manager.url}" target="_blank">${t.data.manager.name}</a></p>\n          <p><strong>Manager Phone:</strong> ${t.data.manager.phone}</p>\n          <p><strong>Deputy Manager:</strong> <a href="${t.data.deputy.url}" target="_blank">${t.data.deputy.name}</a></p>\n          <p><strong>Deputy Manager Phone:</strong> ${t.data.deputy.phone}</p>\n          `:e.content="\n            <p>No data found</p>\n          ",e}buildBusinessLiaison(t){let e={title:"Business Liaison",content:null};return t&&0!=Object.keys(t.data).length&&t.data.constructor===Object&&"Not found."!==t.data.detail?e.content=`\n          <p><strong>Liaison:</strong> ${t.data.name}</p>\n          <p><strong>Liaison Phone:</strong> ${t.data.email}</p>\n          `:e.content="\n            <p>No data found</p>\n          ",e}buildInspector(t){let e={title:"Enforcement Inspector",content:null};return t&&0!=Object.keys(t.data).length&&t.data.constructor===Object&&"Not found."!==t.data.detail?e.content=`\n          <p><strong>Inspector:</strong> ${t.data.name}</p>\n          <p><strong>Inspector Phone:</strong> ${t.data.phone}</p>\n          `:e.content="\n            <p>No data found</p>\n          ",e}buildNeighborhood(t){let e={title:"Neighborhood",content:null};return t&&0!=Object.keys(t.data).length&&t.data.constructor===Object&&"Not found."!==t.data.detail?e.content=`\n            <p><strong>Neighborhood name:</strong> ${t.data.attributes.neighborhood_name}</p>\n          `:e.content="\n            <p>No neighborhood found</p>\n          ",e}buildDWSDBackupProtection(t){let e=["Aviation Sub","Barton-McFarland","Chadsey Condon","Cornerstone Village","East English Village","Morningside","Jefferson Chalmers","Warrendale","Victoria Park","Moross-Morang","Garden View"],a={title:"DWSD Basement Backup Protection Program",content:null};return t&&t.data.attributes.neighborhood_name&&e.includes(t.data.attributes.neighborhood_name)?a.content=`\n        <p>This property qualifies for the DWSD Basement Backup Protection Program.</p>\n        <br>\n        <a href="https://app.smartsheet.com/b/form/509cb1e905a74948bce7b0135da53277?Property%20Street%20Address=${t.data.address}&Property%20City=Detroit&Property%20Zip%20Code=${t.data.attributes.Postal}&Neighborhood=${t.data.attributes.neighborhood_name}" target="_blank"><cod-button data-label="Apply Now" data-background-color="primary" data-size="xsmall" data-icon="" data-primary="true" data-img-alt=""></cod-button></a>\n        `:a.content='\n        <p>This property doesn\'t qualify for the Basement Backup Protection Program. To learn more please <a href="https://detroitmi.gov/departments/water-and-sewerage-department/dwsd-resources/basement-flooding-protection">visit our page.</a></p>\n        ',a}buildHRDFlooding(t){let e=["Cornerstone Village","Morningside","Chandler Park","Fox Creek","Riverbend","Morningside","West End ","Midwest","Chadsey\u2010Condon","Claytown","North Corktown","Michigan\u2010 Martin","Aviation Sub","Garden View","Plymouth\u2010I96","Plymouth\u2010Hubell","Paveway","We Care Community","Fiskhorn","Joy-Schaefer","Warrendale","Warren Ave Community","Barton-McFarland"],a={title:"CDBG Disaster Recovery Basement Backup Protection Program",content:null};return t&&t.data.attributes.neighborhood_name&&e.includes(t.data.attributes.neighborhood_name)?a.content='\n        <p>This property qualifies for the CDBG Disaster Recovery Basement Backup Protection Program.</p>\n        <br>\n        <cod-button data-label="Apply Now" data-background-color="primary" data-size="xsmall" data-icon="" data-primary="true" data-img-alt="" data-link="https://app.smartsheet.com/b/form/3dab24dc95bf469b8ac4c27669536507"></cod-button>\n        ':a.content='\n        <p>This property doesn\u2019t qualify for the CDBG Disaster Recovery Basement Backup Protection Program. To learn more please <a href="https://detroitmi.gov/departments/housing-and-revitalization-department/disaster-recovery">visit our page.</a></p>\n        ',a}buildHistoricDistrict(t,e){let a={title:"NEZ Homestead Zone",content:null};return 0!=Object.keys(t.data).length&&t.data.constructor===Object&&t.data.features.length>0?a.content=`\n          <p><strong>NAME:</strong> ${t.data.features[0].attributes.Name}</p>\n          <p><strong>DESIGNATED ON:</strong> ${e.formatDate(t.data.features[0].attributes.Year_Enacted).format("MMM DD, YYYY")}</p>\n          `:a.content="\n          <p>This property is not in a historic district.</p>\n          ",a}buildNEZ(t){let e={title:"NEZ Homestead Zone",content:null};return 0!=Object.keys(t.data).length&&t.data.constructor===Object&&t.data.features.length>0?e.content=`\n          <p><strong>Name:</strong> ${t.data.features[0].attributes.RNNAME}</p>\n          <p><strong>ID:</strong> ${t.data.features[0].attributes.RID}</p>\n          <p class="noprint"><a href="https://data.detroitmi.gov/datasets/proposed-nez-homestead-2021/explore" target="_blank">View Map</a></p>\n          `:e.content='\n          <p>This property is not on a NEZ Homestead zone.</p>\n          <p class="noprint"><a href="https://data.detroitmi.gov/datasets/nez-h-districts/explore" target="_blank">View Map</a></p>\n          ',e}buildNRSA(t){let e={title:"Neighborhood Revitalization Strategy Areas (NRSA)",content:null};return 0!=Object.keys(t.data).length&&t.data.constructor===Object&&t.data.features.length>0?e.content=`\n          <p><strong>Name:</strong> ${t.data.features[0].attributes.Name}</p>\n          `:e.content="\n          <p>This property is not on a NRSA.</p>\n          ",e}buildNPO(t){let e={title:"Police",content:null};return t&&t.data.features.length?e.content=`\n          <p><strong>PRECINCT</strong></p>\n          <p><strong>Number:</strong> ${t.data.features[0].attributes.precinct}</p>\n          <p><strong>Address:</strong> ${t.data.features[0].attributes.precinct_location}</p>\n          <br>\n          <p><strong>NEIGHBORHOOD POLICE OFFICER (NPO)</strong></p>\n          <p><strong>Name:</strong> ${t.data.features[0].attributes.police_officer}</p>\n          <p><strong>Phone:</strong> ${t.data.features[0].attributes.phone_number}</p>\n          <p><strong>Email:</strong> ${t.data.features[0].attributes.email}</p>\n          `:e.content="<p>No police info found</p>",e}checkRecyclingStatus(t){try{if(t.next_pickups["yard waste"]){let e=null,a=null;return t.details.forEach((t=>{"start-date"==t.type&&"yard waste"==t.service&&(e=null!=t.normalDay?t.normalDay:t.newDay),"end-date"==t.type&&"yard waste"==t.service&&(a=null!=t.normalDay?t.normalDay:t.newDay)})),!!moment(t.next_pickups["yard waste"].next_pickup).isBetween(e,a)}return!1}catch(e){return!1}}buildRecycling(t,e){let a={title:"Trash & Recycling",content:null};if(t&&0!=Object.keys(t.data).length&&t.data.constructor===Object){let r={name:null,url:null,phone:null};"GFL"===t.data.next_pickups.trash.contractor?(r.name="GFL",r.url="http://gflusa.com/residential/detroit/",r.phone="(844) 464-3587"):(r.name="WM",r.url="http://www.advanceddisposal.com/mi/detroit/detroit-residential-collection",r.phone=" (844) 233-8764"),a.content=`\n            <p><strong>Provider:</strong> <a href="${r.url}" target="_blank">${r.name}</a> ${r.phone}</p>\n            <p><strong>Next Trash:</strong> ${e.formatDate(t.data.next_pickups.trash.next_pickup)}</p>\n            <p><strong>Next Recycling:</strong> ${e.formatDate(t.data.next_pickups.recycling.next_pickup)}</p>\n            <p><strong>Next Bulk:</strong> ${e.formatDate(t.data.next_pickups.bulk.next_pickup)}</p>\n            ${e.checkRecyclingStatus(t.data)?tempHTML+=`<p><strong>Next Yard:</strong> ${e.formatDate(t.data.next_pickups["yard waste"].next_pickup)}</p>`:""}\n          `}else a.content="<p>No data found</p>";return a}buildAssessors(t){let e={title:"Assessor's Data",content:null};if(t&&0!=Object.keys(t.data).length&&t.data.constructor===Object&&"Not found."!==t.data.detail){let a={year:null,value:null,floor:null,buildingClass:null};e.content=`\n            <p><strong>Owner's address:</strong> ${t.data.ownerstreetaddr}</p>\n            <p><strong>Owner's city:</strong> ${t.data.ownercity}</p>\n            <p><strong>Owner's state:</strong> ${t.data.ownerstate}</p>\n            <p><strong>Owner's zip:</strong> ${t.data.ownerzip}</p>\n          `,0===t.data.resb_bldgclass?(a.year=t.data.cib_yearbuilt,a.value=t.data.cib_value,a.floor=t.data.cib_yearbuilt,a.buildingClass=t.data.cib_yearbuilt):(a.year=t.data.resb_yearbuilt,a.value=t.data.resb_value,a.floor=t.data.resb_floorarea,a.buildingClass=t.data.resb_bldgclass),e.content+=`\n            <p><strong>Parcel number:</strong> ${t.data.pnum}</p>\n            <p><strong>Year build:</strong> ${a.year}</p>\n            <p><strong>Calculated value:</strong> $${a.value.toLocaleString()}</p>\n            <p><strong>Floor area:</strong> ${a.floor.toLocaleString()} SQFT</p>\n            <p><strong>Building class:</strong> ${a.buildingClass}</p>\n          `}else e.content="<p>No data found</p>";return e}buildRental(t,e){let a=document.getElementsByTagName("my-home-info"),r=JSON.parse(a[0].getAttribute("data-api-active-datasets")),n={title:"Rental Enforcement Status",content:null};return t&&t.data.features.length||r["rental-cert-data"]&&r["rental-cert-data"].data.features.length?n.content=`\n            <p><strong>Registered:</strong> ${t.data.features.length?`${e.formatDate(t.data.features[0].attributes.date_status)}`:"Not registered"}</p>\n            <p><strong>Certified:</strong> ${r["rental-cert-data"].data.features.length?`${e.formatDate(r["rental-cert-data"].data.features[0].attributes.issued_date)}`:"Not certified"}</p>\n          `:n.content="\n          <p><strong>Registered:</strong> Not registered</p>\n          <p><strong>Certified:</strong> Not certified</p>\n          ",n}buildFireEscrow(t){let e="";return t&&t.data.features.length?e+='\n            <article class="info-section">\n            <span>FIRE ESCROW</span>\n            <div>\n              <p><strong>STATUS:</strong> Fire Escrow found</p>\n              <p><a href="https://detroitmi.gov/taxonomy/term/8501"><button>Start Process</button></a></p>\n            </div>\n            </article>':e+='\n          <article class="info-section">\n            <span>FIRE ESCROW</span>\n            <div>\n              <p><strong>STATUS:</strong> Fire Escrow not found</p>\n            </div>\n            </article>',e}buildBlight(t,e){let a={title:"Blight Tickets",content:null};return t&&t.data.features.length?a.content=`\n            <p><strong>Ticket ID:</strong> ${t.attributes.ticket_number}</p>\n            <p><strong>Fine Amount:</strong> $${t.attributes.fine_amount}</p>\n            <p><strong>Agency name:</strong> ${t.attributes.agency_name}</p>\n            <p><strong>Disposition:</strong> ${t.attributes.disposition}</p>\n            <p><strong>Description:</strong> ${t.attributes.violation_description}</p>\n            <p><strong>Hearing Date:</strong> ${e.formatDate(t.attributes.hearing_date)}</p>\n            <p><strong>Hearing Time:</strong> ${t.attributes.hearing_time}</p>\n          `:a.content="<p>No blight tickets found</p>",a}buildSchools(t,e){let a={title:"Schools",content:null};return t&&t.data.features.length?t.data.features.forEach((function(t,e){0==e?a.content=`\n              <p><strong>Name:</strong> ${t.properties.EntityOfficialName}</p>\n              <p><strong>EntityActualGrades:</strong> ${t.properties.EntityActualGrades}</p>\n              <p><strong>Type:</strong> ${t.properties.EntityTypeName}</p>\n              <p><strong>Address:</strong> ${t.properties.EntityPhysicalStreet}</p>\n              <hr>\n              `:a.content+=`\n              <p><strong>Name:</strong> ${t.properties.EntityOfficialName}</p>\n              <p><strong>EntityActualGrades:</strong> ${t.properties.EntityActualGrades}</p>\n              <p><strong>Type:</strong> ${t.properties.EntityTypeName}</p>\n              <p><strong>Address:</strong> ${t.properties.EntityPhysicalStreet}</p>\n              <hr>\n              `})):a.content="<p>No schools nearby.</p>",a}buildPermit(t,e){let a={title:"Building Permits",content:null};return t&&t.data.features.length?a.content=`\n          <p><strong>PERMIT NUMBER:</strong> ${t.attributes.record_id}</p>\n          <p><strong>PERMIT TYPE:</strong> ${t.attributes.permit_type}</p>\n          <p><strong>PERMIT BUILDING TYPE:</strong> ${t.attributes.permit_type}</p>\n          <p><strong>PERMIT STATUS:</strong> ${t.attributes.status}</p>\n          <p><strong>PERMIT ISSUED:</strong> ${e.formatDate(t.attributes.issued_date)}</p>\n          <p><strong>PERMIT DESCRIPTION:</strong> ${t.attributes.description_of_work}</p>\n          `:a.content="<p>No building permits found</p>",a}buildDemoStatus(t,e){let a=document.getElementsByTagName("my-home-info"),r=JSON.parse(a[0].getAttribute("data-parcel-id")).address.replace(" ","%2520");r=r.replace(",","%252C");let n={title:"Demolition Status",content:null};return t&&t.data.features.length?n.content=`\n            <p class="critical-text"><strong>WARNIG!</strong></p>\n            <p>THIS PROPERTY IS SCHEDULED FOR DEMOLITION</p> \n            ${null==t.data.features[0].attributes.demolish_by_date?"<p><strong>Date to be determined</strong></p>":`<p><strong>${e.formatDate(t.attributes.demolish_by_date)}</stron></p>`}\n            <br>\n            <p><a href="https://detroitmi.maps.arcgis.com/apps/instant/nearby/index.html?appid=41ba8dd946d842b9ba632ecc0a5d2556&sliderDistance=1&find=${r}" target="_blank"><cod-button data-label="Expand your demo search" data-background-color="primary" data-icon="" data-size="xsmall" data-primary="true" data-img-alt=""></cod-button></a></p>\n          `:n.content=`\n          <p>This property is not on the demolition list</p>\n          <br>\n          <p><a href="https://detroitmi.maps.arcgis.com/apps/instant/nearby/index.html?appid=41ba8dd946d842b9ba632ecc0a5d2556&sliderDistance=1&find=${r}" target="_blank"><cod-button data-label="Expand your demo search" data-background-color="primary" data-icon="" data-size="xsmall" data-primary="true" data-img-alt=""></cod-button></a></p>`,n}buildDemosNear(t,e){let a={title:"Demolitions Nearby",content:null};return t&&t.data.features.length?t.data.features.forEach((function(t,r){0==r?a.content=`\n              <p><strong>Address:</strong> ${t.properties.address}</p>\n              <p><strong>Commercial:</strong> ${t.properties.commercial_building}</p>\n              <p><strong>Price:</strong> $${parseInt(t.properties.price).toLocaleString()}</p>\n              <p><strong>Parcel:</strong> ${t.properties.parcel_id}</p>\n              <p><strong>Contractor:</strong> ${t.properties.contractor_name}</p>\n              <p><strong>Council District:</strong> ${t.properties.council_district}</p>\n              <p><strong>Neighborhood:</strong> ${t.properties.neighborhood}</p>\n              ${void 0==t.properties.demolish_by_date||null==t.properties.demolish_by_date?"<p><p><strong>Expected Date:</strong> Date to be determined</p>":`<p><strong>Expected Date:</strong>${e.formatDate(t.properties.demolish_by_date)}</strong></p>`}\n              <hr>\n              `:a.content+=`\n              <p><strong>Address:</strong> ${t.properties.address}</p>\n              <p><strong>Commercial:</strong> ${t.properties.commercial_building}</p>\n              <p><strong>Price:</strong> $${parseInt(t.properties.price).toLocaleString()}</p>\n              <p><strong>Parcel:</strong> ${t.properties.parcel_id}</p>\n              <p><strong>Contractor:</strong> ${t.properties.contractor_name}</p>\n              <p><strong>Council District:</strong> ${t.properties.council_district}</p>\n              <p><strong>Neighborhood:</strong> ${t.properties.neighborhood}</p>\n              ${void 0==t.properties.demolish_by_date||null==t.properties.demolish_by_date?"<p><p><strong>Expected Date:</strong> Date to be determined</p>":`<p><strong>Expected Date:</strong>${e.formatDate(t.properties.demolish_by_date)}</strong></p>`}\n              <hr>\n              `})):a.content="<p>No demolitions are happening nearby.</p>",a}buildStabilizationsNear(t,e){let a={title:"Stabilizations Nearby",content:null};return t&&t.data.features.length?t.data.features.forEach((function(t,e){0==e?a.content=`\n              <p><strong>Address:</strong> ${t.properties.address}</p>\n              <p><strong>Parcel:</strong> ${t.properties.parcel_id}</p>\n              <p><strong>Council District:</strong> ${t.properties.council_district}</p>\n              <p><strong>Neighborhood:</strong> ${t.properties.neighborhood}</p>\n              <p><strong>Status:</strong> ${t.properties.rehab_status}</p>\n              <hr>\n              `:a.content+=`\n          <p><strong>Address:</strong> ${t.properties.address}</p>\n          <p><strong>Parcel:</strong> ${t.properties.parcel_id}</p>\n          <p><strong>Council District:</strong> ${t.properties.council_district}</p>\n          <p><strong>Neighborhood:</strong> ${t.properties.neighborhood}</p>\n          <p><strong>Status:</strong> ${t.properties.rehab_status}</p>\n              <hr>\n              `})):a.content="<p>No stabilizations are happening nearby.</p>",a}buildImproveDet(t,e){let a={title:"Improve Detroit Issues Nearby",content:null};return t&&t.data.features.length?t.data.features.forEach((function(t,r){0==r?a.content=`\n              <p><strong>ID:</strong> <a href="${t.properties.web_url}" target="_blank">${t.properties.id}</a></p>\n              <p><strong>Type:</strong> ${t.properties.request_type_title}</p>\n              <p><strong>Status:</strong> ${t.properties.status}</p>\n              <p><strong>Reported on:</strong> ${e.formatDate(t.properties.created_at)}</p>\n              <hr>\n              `:a.content+=`\n              <p><strong>ID:</strong> <a href="${t.properties.web_url}" target="_blank">${t.properties.id}</a></p>\n              <p><strong>Type:</strong> ${t.properties.request_type_title}</p>\n              <p><strong>Status:</strong> ${t.properties.status}</p>\n              <p><strong>Reported on:</strong> ${e.formatDate(t.properties.created_at)}</p>\n              <hr>\n              `})):a.content="<p>No active issues nearby.</p>",a}selectDataBlockType(t,e){switch(e.id){case"council-members":try{return t.buildCouncil(e)}catch(a){return""}break;case"bop-members":try{return t.buildBOP(e)}catch(a){return""}break;case"district-managers":try{return t.buildDistrictManagers(e)}catch(a){return""}break;case"business-liaison":try{return t.buildBusinessLiaison(e)}catch(a){return""}break;case"district-inspectors":try{return t.buildInspector(e)}catch(a){return""}break;case"neighborhood":try{return t.buildNeighborhood(e)}catch(a){return""}break;case"nez":try{return t.buildNEZ(e)}catch(a){return""}break;case"nrsa":try{return t.buildNRSA(e)}catch(a){return""}break;case"assessors-data":try{return t.buildAssessors(e)}catch(a){return""}break;case"permit-data":try{return t.buildPermit(e,t)}catch(a){return""}break;case"rental-data":try{return t.buildRental(e,t)}catch(a){return""}break;case"blight-data":try{return t.buildBlight(e,t)}catch(a){return""}break;case"demos-data":try{return t.buildDemosNear(e,t)}catch(a){return""}break;case"stabilization-data":try{return t.buildStabilizationsNear(e,t)}catch(a){return""}break;case"demo-status":try{return t.buildDemoStatus(e)}catch(a){return""}break;case"npo":try{return t.buildNPO(e)}catch(a){return""}break;case"improve-det":try{return t.buildImproveDet(e,t)}catch(a){return""}break;case"schools":try{return t.buildSchools(e,t)}catch(a){return""}break;case"recycling":try{return t.buildRecycling(e,t)}catch(a){return""}break;case"historicDistrict":try{return t.buildHistoricDistrict(e)}catch(a){return""}break;case"fireEscrow":try{return t.buildFireEscrow(e)}catch(a){return""}break;case"DWSDBackupProtection":try{return t.buildDWSDBackupProtection(e)}catch(a){return""}break;case"HRDFlooding":try{return t.buildHRDFlooding(e)}catch(a){return""}break;default:return""}}setDatasetPagination(t,e){if(t.hasAttribute("data-pagination")){let a=JSON.parse(t.getAttribute("data-pagination"));if(a[e.id]){let t={start:a[e.id].start};return e.data.features.length<=a[e.id].end+3?(t.end=e.data.features.length,t.more=!1):(t.end=a[e.id].end+3,t.more=!0),t}{let t={start:0,end:3,more:!0};return e.data.features?e.data.features.length<=3&&(t.end=e.data.features.length,t.more=!1):(t.start=null,t.more=!1),t}}{let t={start:0,end:3,more:!0};return e.data.features?e.data.features.length<=3&&(t.end=e.data.features.length,t.more=!1):(t.start=null,t.more=!1),t}}printInfo(t){let e=t.buildDataSection(t),a=window.open("","","height=500, width=500");a.document.write("<html>"),a.document.write("<head><style>@media print {.noprint { visibility: hidden;} p.data-block-title{border-bottom: 1px solid;} .data-block-title button { display: none; } body { column-count: 2;} .data-block {     -webkit-column-break-inside: avoid; page-break-inside: avoid; break-inside: avoid; } }</style></head>"),a.document.write("<body >"),a.document.write(e.children[1].innerHTML),a.document.write("</body>"),a.document.close(),a.print()}buildDataBlock(t,e){const a=document.getElementsByTagName("my-home-info"),r=a[0].getAttribute("data-map-available"),n=document.createElement("article");n.className="data-block";let i=t.setDatasetPagination(t,e),s=JSON.parse(JSON.stringify(e));null!==i.start&&(s.data.features=e.data.features.slice(i.start,i.end));let o=t.selectDataBlockType(t,s);if(void 0==o||null==o.content)return null;{const s=document.createElement("p");s.className="data-block-title";const l=document.createElement("article");if(l.className="data-block-content",l.innerHTML=o.content,"true"==r){const t=document.createElement("span");t.innerText=o.title;const r=document.createElement("cod-button");r.setAttribute("data-map-active-data",e.id),r.setAttribute("data-label","View Map"),r.setAttribute("data-size","xsmall"),r.setAttribute("data-icon",""),r.setAttribute("data-img","https://detroitmi.gov/sites/detroitmi.localhost/files/2023-02/map.png"),r.setAttribute("data-img-alt","map"),r.setAttribute("data-shape",""),r.setAttribute("data-hover",!1),r.setAttribute("data-extra-classes","fw-bold"),r.setAttribute("data-background-color","light"),r.setAttribute("data-primary",!0),r.addEventListener("click",(t=>{t.target.getAttribute("data-map-active-data")&&(a[0].setAttribute("data-map-active-data",t.target.getAttribute("data-map-active-data")),a[0].setAttribute("data-app-state","map"))})),s.appendChild(t),s.appendChild(r)}else s.innerText=o.title;if(n.appendChild(s),n.appendChild(l),i.more){let a=document.createElement("cod-button");a.setAttribute("data-pagination-id",e.id),a.setAttribute("data-pagination",JSON.stringify(i)),a.setAttribute("data-label","Load More +"),a.setAttribute("data-size","xsmall"),a.setAttribute("data-icon",""),a.setAttribute("data-img",""),a.setAttribute("data-img-alt",""),a.setAttribute("data-shape",""),a.setAttribute("data-hover",!1),a.setAttribute("data-extra-classes","fw-bold"),a.setAttribute("data-background-color","primary"),a.setAttribute("data-primary",!1),a.addEventListener("click",(e=>{if(e.target.getAttribute("data-pagination")){let a=document.createElement("cod-spinner");a.setAttribute("data-type","border"),a.setAttribute("data-background-color","primary"),a.setAttribute("data-size","sm");let r=t.getAttribute("data-pagination");r=null===r?{}:JSON.parse(r),r[`${e.target.getAttribute("data-pagination-id")}`]=JSON.parse(e.target.getAttribute("data-pagination")),t.setAttribute("data-pagination",JSON.stringify(r)),e.target.parentElement.appendChild(a),e.target.remove()}})),l.appendChild(a)}return n}}buildDataSection(t){const e=document.getElementsByTagName("my-home-info"),a=e[0].getAttribute("data-app-mode"),r=document.createElement("section");if(r.id="data-results","my-home-info"==a){const t=document.createElement("p");t.className="data-title",t.innerText=e[0].getAttribute("data-active-section").toUpperCase(),r.appendChild(t)}const n=document.createElement("div");n.id="data-blocks",r.appendChild(n);const i=JSON.parse(e[0].getAttribute("data-api-active-datasets"));for(const s in i)Object.hasOwnProperty.call(i,s)&&null!=t.buildDataBlock(t,i[s])&&n.appendChild(t.buildDataBlock(t,i[s]));return r}loadDisplay(t){const e=t.shadowRoot,a=document.createElement("section"),r=document.createElement("app-geocoder"),n=document.createElement("app-nav-tools"),i=document.getElementsByTagName("my-home-info");switch(n.printInfo=t.printInfo,a.id="display-wrapper",this.getAttribute("data-display-type")){case"welcome":e.appendChild(t.welcomeStyle);const s=document.createElement("div");s.id="welcome-img-wrapper",s.appendChild(this.neighborhoodImage),a.appendChild(s);const o=document.createElement("article");a.appendChild(o);const l=document.createElement("p");l.setAttribute("aria-label","title"),l.innerText="It\u2019s all here. All in one place.",l.className="display-title",o.appendChild(l);const d=document.createElement("p");d.innerText="Enter your home address to find out your city councilmember and neighborhood district manager, along with local information about trash/recycling, your neighborhood police officer, city issues reported in your neighborhood, and more.",o.appendChild(d),o.appendChild(r),e.appendChild(a);break;case"active":e.appendChild(t.welcomeStyle),a.appendChild(r),e.appendChild(a);break;case"loading":const c=document.createElement("cod-loader");c.setAttribute("data-color","color-3"),a.appendChild(c),e.appendChild(a);break;case"results":let u=JSON.parse(i[0].getAttribute("data-parcel-id"));e.appendChild(t.resultsStyle);let p=document.createElement("section");p.className="results-container",p.appendChild(n);let m=document.createElement("article");m.className="dataset-results";let g=document.createElement("article");g.className="result-address",g.innerText=u.address,m.appendChild(g);let b=t.buildDataSection(t);m.appendChild(b),p.appendChild(m),a.appendChild(p),e.appendChild(a);break;case"error":let h=document.createElement("section");e.appendChild(t.resultsStyle),h.className="results-container",h.appendChild(n);let f=document.createElement("article");f.className="error-result",f.innerHTML='\n        <svg xmlns="http://www.w3.org/2000/svg" width="100" height="70" viewBox="0 0 100 68">\n          <g id="large">\n            <path fill="none" stroke="#F44" d="M55.8 38.5l6.2-1.2c0-1.8-.1-3.5-.4-5.3l-6.3-.2c-.5-2-1.2-4-2.1-6l4.8-4c-.9-1.6-1.9-3-3-4.4l-5.6 3c-1.3-1.6-3-3-4.7-4.1l2-6A30 30 0 0 0 42 8l-3.3 5.4c-2-.7-4.2-1-6.2-1.2L31.3 6c-1.8 0-3.5.1-5.3.4l-.2 6.3c-2 .5-4 1.2-6 2.1l-4-4.8c-1.6.9-3 1.9-4.4 3l3 5.6c-1.6 1.3-3 3-4.1 4.7l-6-2A32.5 32.5 0 0 0 2 26l5.4 3.3c-.7 2-1 4.2-1.2 6.2L0 36.7c0 1.8.1 3.5.4 5.3l6.3.2c.5 2 1.2 4 2.1 6l-4.8 4c.9 1.6 1.9 3 3 4.4l5.6-3c1.4 1.6 3 3 4.7 4.1l-2 6A30.5 30.5 0 0 0 20 66l3.4-5.4c2 .7 4 1 6.1 1.2l1.2 6.2c1.8 0 3.5-.1 5.3-.4l.2-6.3c2-.5 4-1.2 6-2.1l4 4.8c1.6-.9 3-1.9 4.4-3l-3-5.6c1.6-1.3 3-3 4.1-4.7l6 2A32 32 0 0 0 60 48l-5.4-3.3c.7-2 1-4.2 1.2-6.2zm-13.5 4a12.5 12.5 0 1 1-22.6-11 12.5 12.5 0 0 1 22.6 11z"/>\n            <animateTransform attributeName="transform" begin="0s" dur="3s" from="0 31 37" repeatCount="indefinite" to="360 31 37" type="rotate"/>\n          </g>\n          <g id="small">\n            <path fill="none" stroke="#F44" d="M93 19.3l6-3c-.4-1.6-1-3.2-1.7-4.8L90.8 13c-.9-1.4-2-2.7-3.4-3.8l2.1-6.3A21.8 21.8 0 0 0 85 .7l-3.6 5.5c-1.7-.4-3.4-.5-5.1-.3l-3-5.9c-1.6.4-3.2 1-4.7 1.7L70 8c-1.5 1-2.8 2-3.9 3.5L60 9.4a20.6 20.6 0 0 0-2.2 4.6l5.5 3.6a15 15 0 0 0-.3 5.1l-5.9 3c.4 1.6 1 3.2 1.7 4.7L65 29c1 1.5 2.1 2.8 3.5 3.9l-2.1 6.3a21 21 0 0 0 4.5 2.2l3.6-5.6c1.7.4 3.5.5 5.2.3l2.9 5.9c1.6-.4 3.2-1 4.8-1.7L86 34c1.4-1 2.7-2.1 3.8-3.5l6.3 2.1a21.5 21.5 0 0 0 2.2-4.5l-5.6-3.6c.4-1.7.5-3.5.3-5.1zM84.5 24a7 7 0 1 1-12.8-6.2 7 7 0 0 1 12.8 6.2z"/>\n            <animateTransform attributeName="transform" begin="0s" dur="2s" from="0 78 21" repeatCount="indefinite" to="-360 78 21" type="rotate"/>\n          </g>\n        </svg>\n        <h3>No Information found on this address. Please close and try again.</h3>\n        ',h.appendChild(f),a.appendChild(h),e.appendChild(a);break;case"print":let y=JSON.parse(i[0].getAttribute("data-parcel-id"));e.appendChild(t.resultsStyle);let _=document.createElement("section");_.className="results-container",_.appendChild(n);let v=document.createElement("article");v.className="dataset-results";let A=document.createElement("article");A.className="result-address",A.innerText=y.address,v.appendChild(A);let S=t.buildDataSection(t);v.appendChild(S),_.appendChild(v),a.appendChild(_),e.appendChild(a),t.printInfo(t)}}}const s=a(530),o=a(7055);class l extends HTMLElement{static get observedAttributes(){return["data-loader-state","data-parcel-id"]}constructor(){super();const t=this.attachShadow({mode:"open"}),e=document.createElement("section");e.id="loader-wrapper",t.appendChild(e)}attributeChangedCallback(t,e,a){this.shadowRoot;if("data-loader-state"===t)this.clearLoader(this),this.loadLoader(this)}getDataSets(t){const e=document.getElementsByTagName("my-home-info"),a=e[0].getAttribute("data-active-sets").split(","),r=JSON.parse(e[0].getAttribute("data-parcel-id"));let n=[],i=new Promise(((t,e)=>{if("CONDO BUILDING"!=r.attributes.parcel_id){let e="https://apis.detroitmi.gov/assessments/parcel/"+r.attributes.parcel_id+"/";return fetch(e).then((t=>t.json())).then((function(e){t({id:"assessors-data",data:e})})).catch((t=>{}))}t({id:"assessors-data",data:null})})),l=new Promise(((t,e)=>{t({id:"neighborhood",data:r})})),d=new Promise(((t,e)=>t({id:"council",data:r}))),c=new Promise(((t,e)=>fetch("/rest/bop?_format=json").then((t=>t.json())).then((function(e){t({id:"bop-members",data:e})})).catch((t=>{})))),u=new Promise(((t,e)=>fetch("/rest/district-managers?_format=json").then((t=>t.json())).then((function(e){t({id:"district-managers",data:e})})).catch((t=>{})))),p=new Promise(((t,e)=>fetch("/rest/district-inspectors?_format=json").then((t=>t.json())).then((function(e){t({id:"district-inspectors",data:e})})).catch((t=>{})))),m=new Promise(((t,e)=>fetch("/rest/council-members?_format=json").then((t=>t.json())).then((function(e){t({id:"council-members",data:e})})).catch((t=>{})))),g=(new Promise(((t,e)=>{t({id:"DWSDBackupProtection",data:r})})),new Promise(((t,e)=>{t({id:"HRDFlooding",data:r})}))),b=new Promise(((t,e)=>{let a=`https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/NRSA_2020/FeatureServer/0/query?where=&objectIds=&time=&geometry=${r.location.x}%2C${r.location.y}&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&returnCentroid=false&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json&token=`;return fetch(a).then((t=>t.json())).then((function(e){t({id:"nrsa",data:e})})).catch((t=>{}))})),h=new Promise(((t,e)=>{let a=`https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/NEZHOMESTEAD2021/FeatureServer/0/query?where=&objectIds=&time=&geometry=${r.location.x}%2C${r.location.y}&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&returnCentroid=false&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json&token=`;return fetch(a).then((t=>t.json())).then((function(e){t({id:"nez",data:e})})).catch((t=>{}))})),f=new Promise(((t,e)=>{let a=`https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/BuildingPermits/FeatureServer/0/query?where=parcel_id+%3D+%27${r.attributes.parcel_id}%27&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=3&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json`;return fetch(a).then((t=>t.json())).then((function(e){t({id:"permit-data",data:e})})).catch((t=>{}))})),y=new Promise(((t,e)=>{let a;return a="CONDO BUILDING"!=r.attributes.parcel_id?`https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/RentalStatuses/FeatureServer/0/query?where=parcel_id+%3D+%27${r.attributes.parcel_id}%27&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json`:`https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/RentalStatuses/FeatureServer/0/query?where=&objectIds=&time=&geometry=${r.location.x}%2C+${r.location.y}&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelIndexIntersects&distance=&units=esriSRUnit_Foot&relationParam=&outFields=*&returnGeometry=true&maxAllowableOffset=&geometryPrecision=&outSR=&gdbVersion=&returnDistinctValues=false&returnIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&multipatchOption=&resultOffset=&resultRecordCount=&f=json`,fetch(a).then((t=>t.json())).then((function(e){t({id:"rental-data",data:e})})).catch((t=>{}))})),_=new Promise(((t,e)=>{let a;return a="CONDO BUILDING"!=r.attributes.parcel_id?`https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/active_cofc/FeatureServer/0/query?where=parcel_id%3D%27${r.attributes.parcel_id}%27&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=1&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json`:`https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/active_cofc/FeatureServer/0/query?where=&objectIds=&time=&geometry=${r.location.x}%2C+${r.location.y}&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelIndexIntersects&distance=&units=esriSRUnit_Foot&relationParam=&outFields=*&returnGeometry=true&maxAllowableOffset=&geometryPrecision=&outSR=&gdbVersion=&returnDistinctValues=false&returnIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&multipatchOption=&resultOffset=&resultRecordCount=&f=json`,fetch(a).then((t=>t.json())).then((function(e){t({id:"rental-cert-data",data:e})})).catch((t=>{}))})),v=new Promise(((t,e)=>{let a=`https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/Blight_Violations_(DAH)/FeatureServer/0/query?where=parcelno%3D%27${r.attributes.parcel_id}%27&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=violation_date&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=2&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json&token=`;return fetch(a).then((t=>t.json())).then((function(e){t({id:"blight-data",data:e})})).catch((t=>{}))})),A=new Promise(((t,e)=>{let a=`https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/Property_Sales/FeatureServer/0/query?where=PARCEL_NO%3D%27${r.attributes.parcel_id}%27&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=4326&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=SALE_DATE&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=2&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json&token=`;return fetch(a).then((t=>t.json())).then((function(e){t({id:"sales-data",data:e})})).catch((t=>{}))})),S=new Promise(((e,a)=>{let n=s.point([r.location.x,r.location.y]),i=s.buffer(n,2,{units:"miles"}),l=s.simplify(i.geometry,{tolerance:.005,highQuality:!1}),d=o.convert(l),c=`https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/Demolitions_under_Contract/FeatureServer/0/query?where=&objectIds=&time=&geometry=${encodeURI(JSON.stringify(d))}&geometryType=esriGeometryPolygon&inSR=&spatialRel=esriSpatialRelIntersects&relationParam=&outFields=*&returnGeometry=true&returnTrueCurves=false&maxAllowableOffset=&geometryPrecision=&outSR=4326&returnIdsOnly=false&returnCountOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&gdbVersion=&returnDistinctValues=false&resultOffset=&resultRecordCount=&f=geojson`;return fetch(c).then((t=>t.json())).then((function(a){a.features.sort(t.sortFeaturesByDistanceTo(n)),e({id:"demos-data",data:a})})).catch((t=>{}))})),C=new Promise(((e,a)=>{let n=s.point([r.location.x,r.location.y]),i=s.buffer(n,2,{units:"miles"}),l=s.simplify(i.geometry,{tolerance:.005,highQuality:!1}),d=o.convert(l),c=`https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/Contracted_Stabilizations/FeatureServer/0/query?where=&objectIds=&time=&geometry=${encodeURI(JSON.stringify(d))}&geometryType=esriGeometryPolygon&inSR=&spatialRel=esriSpatialRelIntersects&relationParam=&outFields=*&returnGeometry=true&returnTrueCurves=false&maxAllowableOffset=&geometryPrecision=&outSR=4326&returnIdsOnly=false&returnCountOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&gdbVersion=&returnDistinctValues=false&resultOffset=&resultRecordCount=3&f=geojson`;return fetch(c).then((t=>t.json())).then((function(a){a.features.sort(t.sortFeaturesByDistanceTo(n)),e({id:"stabilization-data",data:a})})).catch((t=>{}))})),k=new Promise(((t,e)=>{let a=`https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/Demolitions_under_Contract/FeatureServer/0/query?where=parcel_id+%3D+%27${r.attributes.parcel_id}%27&objectIds=&time=&geometry=&geometryType=esriGeometryPolygon&inSR=&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=4326&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=demolish_by_date&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=1&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json&token=`;return fetch(a).then((t=>t.json())).then((function(e){t({id:"demo-status",data:e})})).catch((t=>{}))})),D=new Promise(((e,a)=>{let n=s.point([r.location.x,r.location.y]),i=s.buffer(n,2,{units:"miles"}),l=s.simplify(i.geometry,{tolerance:.005,highQuality:!1}),d=o.convert(l),c=`https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/2018_2019_Schools_(EEM)/FeatureServer/0/query?where=&objectIds=&time=&geometry=${encodeURI(JSON.stringify(d))}&geometryType=esriGeometryPolygon&inSR=&spatialRel=esriSpatialRelIntersects&relationParam=&outFields=*&returnGeometry=true&returnTrueCurves=false&maxAllowableOffset=&geometryPrecision=&outSR=4326&returnIdsOnly=false&returnCountOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&gdbVersion=&returnDistinctValues=false&resultOffset=&resultRecordCount=&f=geojson`;return fetch(c).then((t=>t.json())).then((function(a){a.features.sort(t.sortFeaturesByDistanceTo(n)),e({id:"schools",data:a})})).catch((t=>{}))})),E=new Promise(((t,e)=>{let a=`https://opengis.detroitmi.gov/opengis/rest/services/PublicSafety/NeighborhoodPoliceOfficers/FeatureServer/0/query?where=&objectIds=&time=&geometry=${r.location.x}%2C${r.location.y}&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelIntersects&resultType=none&distance=1&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&returnCentroid=false&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=4326&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnDistinctValues=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json&token=`;return fetch(a).then((t=>t.json())).then((function(e){t({id:"npo",data:e})})).catch((t=>{}))})),w=new Promise(((t,e)=>{let a=s.point([r.location.x,r.location.y]),n=s.buffer(a,300,{units:"meters"}),i=s.simplify(n.geometry,{tolerance:.005,highQuality:!1}),l=o.convert(i),d=`https://opengis.detroitmi.gov/opengis/rest/services/DoIT/ImproveDetroitIssues/FeatureServer/0/query?where=status+%3C%3E+%27Closed%27+and+status+%3C%3E+%27Archived%27&objectIds=&time=&geometry=${encodeURI(JSON.stringify(l))}&geometryType=esriGeometryPolygon&inSR=&spatialRel=esriSpatialRelIntersects&relationParam=&outFields=*&returnGeometry=true&returnTrueCurves=false&maxAllowableOffset=&geometryPrecision=&outSR=4326&returnIdsOnly=false&returnCountOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&gdbVersion=&returnDistinctValues=false&resultOffset=&resultRecordCount=3&f=geojson`;return fetch(d).then((t=>t.json())).then((function(e){t({id:"improve-det",data:e})})).catch((t=>{}))})),O=new Promise(((t,e)=>{let a="https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/WasteCollectionAreas/FeatureServer/0/query?where=&text=&objectIds=&time=&geometry="+r.location.x+"%2C+"+r.location.y+"&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelWithin&relationParam=&outFields=*&returnGeometry=true&returnTrueCurves=false&maxAllowableOffset=&geometryPrecision=&outSR=&returnIdsOnly=false&returnCountOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&gdbVersion=&returnDistinctValues=false&resultOffset=&resultRecordCount=&f=json";fetch(a).then((t=>t.json())).then((function(e){let a=new Date,r=a.getMonth()+1,n=a.getFullYear(),i=`https://apis.detroitmi.gov/waste_schedule/details/${e.features[0].attributes.FID}/year/${n}/month/${r}/`;return fetch(i).then((t=>t.json())).then((function(e){t({id:"recycling",data:e})}))})).catch((t=>{}))})),R=new Promise(((t,e)=>{let a="https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/Detroit_Local_Historic_Districts/FeatureServer/0/query?where=&text=&objectIds=&time=&geometry="+r.location.x+"%2C+"+r.location.y+"&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelWithin&relationParam=&outFields=*&returnGeometry=true&returnTrueCurves=false&maxAllowableOffset=&geometryPrecision=&outSR=&returnIdsOnly=false&returnCountOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&gdbVersion=&returnDistinctValues=false&resultOffset=&resultRecordCount=&f=json";fetch(a).then((t=>t.json())).then((function(e){t({id:"historicDistrict",data:e})})).catch((t=>{}))})),x=new Promise(((t,e)=>{let a=`https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/fie_properties_final/FeatureServer/0/query?where=parcel_id%3D%27${r.attributes.parcel_id}%27&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnHiddenFields=false&returnGeometry=true&returnCentroid=false&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json&token=`;return fetch(a).then((t=>t.json())).then((function(e){t({id:"fireEscrow",data:e})})).catch((t=>{}))}));return a.forEach((t=>{switch(t){case"council":n.push(d);break;case"neighborhood":n.push(l);break;case"assessors-data":null!=r.attributes.parcel_id&&""!=r.attributes.parcel_id&&("CONDO BUILDING"==r.attributes.parcel_id||n.push(i));break;case"permit-data":null!=r.attributes.parcel_id&&""!=r.attributes.parcel_id&&n.push(f);break;case"blight-data":null!=r.attributes.parcel_id&&""!=r.attributes.parcel_id&&n.push(v);break;case"salesHistoryData":null!=r.attributes.parcel_id&&""!=r.attributes.parcel_id&&n.push(A);break;case"fireEscrow":null!=r.attributes.parcel_id&&""!=r.attributes.parcel_id&&n.push(x);break;case"nez":n.push(h);break;case"nrsa":n.push(b);break;case"npo":n.push(E);break;case"improve-det":n.push(w);break;case"recycling":n.push(O);break;case"rental-data":null!=r.attributes.parcel_id&&""!=r.attributes.parcel_id&&n.push(y);break;case"rental-cert":n.push(_);break;case"demo-status":null!=r.attributes.parcel_id&&""!=r.attributes.parcel_id&&n.push(k);break;case"demos-data":n.push(S);break;case"stabilization-data":n.push(C);break;case"schools":n.push(D);break;case"historicDistrict":n.push(R);break;case"district-managers":n.push(u);break;case"district-inspectors":n.push(p);break;case"council-members":n.push(m);break;case"bop-members":n.push(c);break;case"HRDFlooding":console.log("pushing HRDFlooding"),n.push(g)}})),n}buildCouncilData(t){let e={council:{district:`District ${t.council.data.attributes.council_district}`,districtURL:null,name:null,url:null,phone:null},bop:{district:`District ${t.council.data.attributes.council_district}`,url:null,name:null,url:null,phone:null,email:null},dmanager:{name:null,url:`/departments/department-of-neighborhoods/district-${t.council.data.attributes.council_district}#block-views-block-contacts-special-block-1`,phone:null},ddmanager:{name:null,url:`/departments/department-of-neighborhoods/district-${t.council.data.attributes.council_district}#block-views-block-contacts-special-block-1`,phone:null},bliaision:{name:null,email:null},enforcement:{name:null,phone:null}};switch(t.council.data.attributes.council_district.toString()){case"1":e.council.districtURL="/taxonomy/term/1276",t["council-members"].data.forEach((t=>{"1276"==t.tid&&(e.council.name=t.field_organization_head_name,e.council.url="/taxonomy/term/1276",e.council.phone=t.field_phone)})),t["bop-members"].data.forEach((t=>{if(t.field_responsibilities.includes("District 1")){e.bop.name=t.title,e.bop.url="/taxonomy/term/4331";let a=t.field_telephone.replace(/ /g,"-");a=a.replace(/[()]/g,""),e.bop.phone=`<a href="tel:${a}">${t.field_telephone}</a>`,e.bop.email=t.field_email_address}})),t["district-managers"].data.forEach((t=>{t.field_contact_position.includes("District 1 Manager")&&(e.dmanager.name=t.title,e.dmanager.phone=t.field_telephone),t.field_contact_position.includes("District 1 Deputy Manager")&&(e.ddmanager.name=t.title,e.ddmanager.phone=t.field_telephone),t.field_contact_position.includes("District 1 Business Liaison")&&(e.bliaision.name=t.title,e.bliaision.email=t.field_email_address)})),t["district-inspectors"].data.forEach((t=>{t.field_responsibilities.includes("District 1")&&(e.enforcement.name=t.title,e.enforcement.phone=t.field_telephone)}));break;case"2":e.council.districtURL="/taxonomy/term/1476",t["council-members"].data.forEach((t=>{"1476"==t.tid&&(e.council.name=t.field_organization_head_name,e.council.url="/taxonomy/term/1476",e.council.phone=t.field_phone)})),t["bop-members"].data.forEach((t=>{if(t.field_responsibilities.includes("District 2")){e.bop.name=t.title,e.bop.url="/taxonomy/term/4336";let a=t.field_telephone.replace(/ /g,"-");a=a.replace(/[()]/g,""),e.bop.phone=`<a href="tel:${a}">${t.field_telephone}</a>`,e.bop.email=t.field_email_address}})),t["district-managers"].data.forEach((t=>{t.field_contact_position.includes("District 2 Manager")&&(e.dmanager.name=t.title,e.dmanager.phone=t.field_telephone),t.field_contact_position.includes("District 2 Deputy Manager")&&(e.ddmanager.name=t.title,e.ddmanager.phone=t.field_telephone),t.field_contact_position.includes("District 2 Business Liaison")&&(e.bliaision.name=t.title,e.bliaision.email=t.field_email_address)})),t["district-inspectors"].data.forEach((t=>{t.field_responsibilities.includes("District 2")&&(e.enforcement.name=t.title,e.enforcement.phone=t.field_telephone)}));break;case"3":e.council.districtURL="/taxonomy/term/1481",t["council-members"].data.forEach((t=>{"1481"==t.tid&&(e.council.name=t.field_organization_head_name,e.council.url="/taxonomy/term/1481",e.council.phone=t.field_phone)})),t["bop-members"].data.forEach((t=>{if(t.field_responsibilities.includes("District 3")){e.bop.name=t.title,e.bop.url="/taxonomy/term/4341";let a=t.field_telephone.replace(/ /g,"-");a=a.replace(/[()]/g,""),e.bop.phone=`<a href="tel:${a}">${t.field_telephone}</a>`,e.bop.email=t.field_email_address}})),t["district-managers"].data.forEach((t=>{t.field_contact_position.includes("District 3 Manager")&&(e.dmanager.name=t.title,e.dmanager.phone=t.field_telephone),t.field_contact_position.includes("District 3 Deputy Manager")&&(e.ddmanager.name=t.title,e.ddmanager.phone=t.field_telephone),t.field_contact_position.includes("District 3 Business Liaison")&&(e.bliaision.name=t.title,e.bliaision.email=t.field_email_address)})),t["district-inspectors"].data.forEach((t=>{t.field_responsibilities.includes("District 3")&&(e.enforcement.name=t.title,e.enforcement.phone=t.field_telephone)}));break;case"4":e.council.districtURL="/taxonomy/term/1486",t["council-members"].data.forEach((t=>{"1486"==t.tid&&(e.council.name=t.field_organization_head_name,e.council.url="/taxonomy/term/1486",e.council.phone=t.field_phone)})),t["bop-members"].data.forEach((t=>{if(t.field_responsibilities.includes("District 4")){e.bop.name=t.title,e.bop.url="/taxonomy/term/4346";let a=t.field_telephone.replace(/ /g,"-");a=a.replace(/[()]/g,""),e.bop.phone=`<a href="tel:${a}">${t.field_telephone}</a>`,e.bop.email=t.field_email_address}})),t["district-managers"].data.forEach((t=>{t.field_contact_position.includes("District 4 Manager")&&(e.dmanager.name=t.title,e.dmanager.phone=t.field_telephone),t.field_contact_position.includes("District 4 Deputy Manager")&&(e.ddmanager.name=t.title,e.ddmanager.phone=t.field_telephone),t.field_contact_position.includes("District 4 Business Liaison")&&(e.bliaision.name=t.title,e.bliaision.email=t.field_email_address)})),t["district-inspectors"].data.forEach((t=>{t.field_responsibilities.includes("District 4")&&(e.enforcement.name=t.title,e.enforcement.phone=t.field_telephone)}));break;case"5":e.council.districtURL="/taxonomy/term/1346",t["council-members"].data.forEach((t=>{"1346"==t.tid&&(e.council.name=t.field_organization_head_name,e.council.url="/taxonomy/term/1346",e.council.phone=t.field_phone)})),t["bop-members"].data.forEach((t=>{if(t.field_responsibilities.includes("District 5")){e.bop.name=t.title,e.bop.url="/taxonomy/term/4351";let a=t.field_telephone.replace(/ /g,"-");a=a.replace(/[()]/g,""),e.bop.phone=`<a href="tel:${a}">${t.field_telephone}</a>`,e.bop.email=t.field_email_address}})),t["district-managers"].data.forEach((t=>{t.field_contact_position.includes("District 5 Manager")&&(e.dmanager.name=t.title,e.dmanager.phone=t.field_telephone),t.field_contact_position.includes("District 5 Deputy Manager")&&(e.ddmanager.name=t.title,e.ddmanager.phone=t.field_telephone),t.field_contact_position.includes("District 5 Business Liaison")&&(e.bliaision.name=t.title,e.bliaision.email=t.field_email_address)})),t["district-inspectors"].data.forEach((t=>{t.field_responsibilities.includes("District 5")&&(e.enforcement.name=t.title,e.enforcement.phone=t.field_telephone)}));break;case"6":e.council.districtURL="/taxonomy/term/1491",t["council-members"].data.forEach((t=>{if("1491"==t.tid){let a=t.field_phone.replace("Office: ","");a=a.replace(/ /g,"-"),a=a.replace(/[()]/g,""),e.council.name=t.field_organization_head_name,e.council.url="/taxonomy/term/1491",e.council.phone=`<a href="tel:${a}">${t.field_phone}</a>`}})),t["bop-members"].data.forEach((t=>{if(t.field_responsibilities.includes("District 6")){e.bop.name=t.title,e.bop.url="/taxonomy/term/4321";let a=t.field_telephone.replace(/ /g,"-");a=a.replace(/[()]/g,""),e.bop.phone=`<a href="tel:${a}">${t.field_telephone}</a>`,e.bop.email=t.field_email_address}})),t["district-managers"].data.forEach((t=>{if(t.field_contact_position.includes("District 6 Manager")){let a=t.field_telephone.replace(/ /g,"-");a=a.replace(/[()]/g,""),e.dmanager.name=t.title,e.dmanager.phone=`<a href="tel:${a}">${t.field_telephone}</a>`}if(t.field_contact_position.includes("District 6 Deputy Manager")){let a=t.field_telephone.replace(/ /g,"-");a=a.replace(/[()]/g,""),e.ddmanager.name=t.title,e.ddmanager.phone=`<a href="tel:${a}">${t.field_telephone}</a>`}t.field_contact_position.includes("District 6 Business Liaison")&&(e.bliaision.name=t.title,e.bliaision.email=t.field_email_address)})),t["district-inspectors"].data.forEach((t=>{if(t.field_responsibilities.includes("District 6")){let a=t.field_telephone.replace(/ /g,"-");a=a.replace(/[()]/g,""),e.enforcement.name=t.title,e.enforcement.phone=`<a href="tel:${a}">${t.field_telephone}</a>`}}));break;case"7":e.council.districtURL="/taxonomy/term/1511",t["council-members"].data.forEach((t=>{"1511"==t.tid&&(e.council.name=t.field_organization_head_name,e.council.url="/taxonomy/term/1511",e.council.phone=t.field_phone)})),t["bop-members"].data.forEach((t=>{if(t.field_responsibilities.includes("District 7")){e.bop.name=t.title,e.bop.url="/taxonomy/term/4356";let a=t.field_telephone.replace(/ /g,"-");a=a.replace(/[()]/g,""),e.bop.phone=`<a href="tel:${a}">${t.field_telephone}</a>`,e.bop.email=t.field_email_address}})),t["district-managers"].data.forEach((t=>{t.field_contact_position.includes("District 7 Manager")&&(e.dmanager.name=t.title,e.dmanager.phone=t.field_telephone),t.field_contact_position.includes("District 7 Deputy Manager")&&(e.ddmanager.name=t.title,e.ddmanager.phone=t.field_telephone),t.field_contact_position.includes("District 7 Business Liaison")&&(e.bliaision.name=t.title,e.bliaision.email=t.field_email_address)})),t["district-inspectors"].data.forEach((t=>{t.field_responsibilities.includes("District 7")&&(e.enforcement.name=t.title,e.enforcement.phone=t.field_telephone)}))}return e}sortFeaturesByDistanceTo(t){return function(e,a){var r={units:"radians"};return s.distance(t,e,r)-s.distance(t,a,r)}}getData(t){const e=document.getElementsByTagName("my-home-info"),a=e[0].getAttribute("data-active-sets").split(","),r=(JSON.parse(e[0].getAttribute("data-parcel-id")),JSON.parse(e[0].getAttribute("data-api-stored-datasets")));let n=!1;for(let i in r)a.includes(i)&&(n=!0);if(n){let t={};a.forEach((e=>{t[e]=r[e]})),e[0].setAttribute("data-api-active-datasets",JSON.stringify(t)),e[0].setAttribute("data-app-state","results")}else{let r=t.getDataSets(t);Promise.all(r).then((r=>{console.log(r);let n={};for(let t in r)null!=r[t]?n[r[t].id]=r[t]:initialLoadChecker=!1;if(a.includes("council")){let e=t.buildCouncilData(n);n["council-members"]={id:"council-members",data:e.council},n["bop-members"]={id:"bop-members",data:e.bop};let a={manager:e.dmanager,deputy:e.ddmanager};n["district-managers"]={id:"district-managers",data:a},n["business-liaison"]={id:"business-liaison",data:e.bliaision},n["district-inspectors"]={id:"district-inspectors",data:e.enforcement}}if(a.includes("DWSDBackupProtection"))try{n.DWSDBackupProtection||(n.DWSDBackupProtection={id:"DWSDBackupProtection",data:n.neighborhood.data})}catch(i){}e[0].setAttribute("data-api-active-datasets",JSON.stringify(n)),e[0].setAttribute("data-app-state","results")})).catch((t=>{}))}}clearLoader(t){const e=t.shadowRoot;for(;e.firstChild;)e.removeChild(e.firstChild)}loadLoader(t){const e=t.shadowRoot,a=document.createElement("section");switch(a.id="loader-wrapper",t.getAttribute("data-loader-state")){case"active":t.getData(t);const r=document.createElement("p");r.innerText="Loading DATA",a.appendChild(r),e.appendChild(a);break;case"finished":const n=document.createElement("p");n.innerText="Data loaded",a.appendChild(n),e.appendChild(a)}}}customElements.define("app-display",i),customElements.define("app-data-loader",l);class d extends HTMLElement{static get observedAttributes(){return["data-app-state","data-parcel-id","data-map-state"]}constructor(){super();const t=this.attachShadow({mode:"open"});let e=document.getElementsByTagName("my-home-info")[0].getAttribute("data-app-state");const a=document.createElement("section");a.id="app-wrapper";const r=document.createElement("app-display");"active-screen"==e?r.setAttribute("data-display-type","active"):r.setAttribute("data-display-type","welcome"),a.appendChild(r),t.appendChild(a)}attributeChangedCallback(t,e,a){this.shadowRoot;const r=document.getElementsByTagName("my-home-info")[0].getAttribute("data-app-mode");switch(t){case"data-app-state":null!=e&&(this.clearApp(this),this.loadApp(this));break;case"data-parcel-id":"none"!=a?this.setAttribute("data-app-state","loading-screen"):"my-home-info"==r&&this.setAttribute("data-app-state","welcome-screen");break;case"data-map-state":break;default:console.log("not catched")}}clearApp(t){const e=t.shadowRoot;for(;e.firstChild;)e.removeChild(e.firstChild)}loadApp(t){const e=t.shadowRoot,a=document.createElement("div");a.id="app-wrapper";const r=document.createElement("app-display"),n=document.createElement("app-data-loader");switch(t.getAttribute("data-app-state")){case"welcome-screen":r.setAttribute("data-display-type","welcome"),a.appendChild(r);break;case"active-screen":r.setAttribute("data-display-type","active"),a.appendChild(r);break;case"loading-screen":r.setAttribute("data-display-type","loading"),n.setAttribute("data-loader-state","active"),a.appendChild(r);break;case"results":r.setAttribute("data-display-type","results"),a.appendChild(r);break;case"map":const t=document.createElement("cod-map");t.id="cod-map";let e=JSON.parse(this.getAttribute("data-api-active-datasets")),i=this.getAttribute("data-map-active-data");t.setAttribute("data-parent-component","my-home-info"),t.setAttribute("data-map-mode","my-home-info"),t.setAttribute("data-map-active-data",this.getAttribute("data-map-active-data")),t.setAttribute("data-map-data",JSON.stringify(e[i])),t.setAttribute("data-location",this.getAttribute("data-parcel-id")),t.setAttribute("data-map-state","init"),a.appendChild(t);break;case"error":r.setAttribute("data-display-type","error"),a.appendChild(r);break;case"print":r.setAttribute("data-display-type","print"),a.appendChild(r)}null==e.firstChild&&e.appendChild(a)}}var c=a(2181),u=a(9766),p=a(6869);customElements.define("my-home-info",d),c.S1({dsn:"https://536fad340d72a07ee08fe3df749b982e@o4505717305704448.ingest.sentry.io/4505720878792704",release:"local-services-lookup@2.0.9",integrations:[new u.gE,new p.U],tracesSampleRate:1,tracePropagationTargets:["localhost",/^https:\/\/detroitmi\.gov/],replaysSessionSampleRate:.1,replaysOnErrorSampleRate:1})}},t=>{t.O(0,[315,152,47,600,489],(()=>{return e=2789,t(t.s=e);var e}));t.O()}]);
//# sourceMappingURL=main.js.map