!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="adee9e3c-60c7-493f-9457-39d80f670862",e._sentryDebugIdIdentifier="sentry-dbid-adee9e3c-60c7-493f-9457-39d80f670862")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"76503864802ce9c9b190bc17b1ae9b04fddb1bd5"},(self.webpackChunklocal_services_lookup=self.webpackChunklocal_services_lookup||[]).push([[179],{2789:(e,t,a)=>{class r extends HTMLElement{static get observedAttributes(){return["form","parcelStatus","user"]}constructor(){super(),this.form=null,this.parcelStatus="Invalid",this.user=null,this.styles=document.createElement("style"),this.styles.textContent="\n            @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@100;700&display=swap')\n            #geocoder {width: 100%}\n            input {width: calc(100% - 2em); padding: 1em; border:.1em solid #e6e6e6; font-size: 1em;}\n        ";const e=this.attachShadow({mode:"open"});e.appendChild(this.styles);const t=document.createElement("article");t.id="geocoder";let a=document.createElement("form"),r=document.createElement("label");r.style.fontFamily="Montserrat, sans-serif",r.style.fontWeight="bold";let n=document.createElement("input"),i=(document.createElement("ul"),document.createElement("datalist")),s=document.createElement("i");a.addEventListener("submit",(e=>{this.submit(e,this)})),s.className="fas fa-map-marker-alt";const o=document.getElementsByTagName("my-home-info");r.innerText="Property Address:";try{o[0].getAttribute("data-geocoder-label")&&""!=o[0].getAttribute("data-geocoder-label")&&(r.innerText=o[0].getAttribute("data-geocoder-label"))}catch(l){}r.setAttribute("for","geocoder-input"),n.type="text",n.setAttribute("list","addresses-list"),n.placeholder="Enter address",n.setAttribute("id","geocoder-input"),n.setAttribute("autocomplete","off"),n.addEventListener("keyup",(e=>{this.inputChange(e,this)})),i.setAttribute("id","addresses-list"),a.appendChild(r),a.appendChild(n),a.appendChild(s),a.appendChild(i),this.form=a,t.appendChild(a),e.appendChild(t)}supplementGeocoder(e,t,a){const r=document.getElementsByTagName("my-home-info");let n=e.split(",");n=n[0],n=n.split(" ");let i="",s=n.length;n.forEach((function(e,t){i+=e,t<s&&t+1!==s&&(i+="+")}));let o=`https://opengis.detroitmi.gov/opengis/rest/services/BaseUnits/BaseUnitGeocoder/GeocodeServer/findAddressCandidates?Address=&Address2=&Address3=&Neighborhood=&City=&Subregion=&Region=&Postal=&PostalExt=&CountryCode=&SingleLine=${i}&outFields=*&maxLocations=&matchOutOfRange=true&langCode=&locationType=&sourceCountry=&category=&location=&distance=&searchExtent=&outSR=&magicKey=&f=json`;try{fetch(o).then((e=>e.json())).then((function(n){if("suggestions"===a)n.candidates.forEach((e=>{let a=document.createElement("option");""===e.attributes.parcel_id?(a.value=e.address,a.setAttribute("data-parsel","no-parcel")):(a.value=`${e.address} RECOMMENDED`,a.setAttribute("data-parsel",e.attributes.parcel_id)),a.onclick=e=>{t.selectSuggestion(e,t)},t.form.childNodes[3].appendChild(a)}));else if(n.candidates.length){let a=`https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/City_of_Detroit_Boundary/FeatureServer/0/query?where=&objectIds=&time=&geometry=${n.candidates[0].location.x}%2C+${n.candidates[0].location.y}&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=4326&returnGeometry=true&returnCentroid=false&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnDistinctValues=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=geojson&token=`;try{fetch(a).then((e=>e.json())).then((function(a){if(a.features.length){let a,i=null;n.candidates.forEach((e=>{""!==e.attributes.parcel_id&&t.checkParcelValid(e.attributes.parcel_id)&&(i=e)})),a=null==i?n.candidates[0].location:null,null===i?(t.parcelStatus="Invalid",t.needGeocode(e,t,a),t.clearSuggestions(t),r[0].setAttribute("data-parcel-id",JSON.stringify(n.candidates[0]))):(t.parcelStatus="Valid",t.needGeocode(e,t,a),t.clearSuggestions(t),r[0].setAttribute("data-parcel-id",JSON.stringify(i)))}else t.parcelStatus="Invalid",t.needGeocode(e,t,location),t.clearSuggestions(t),r[0].setAttribute("data-app-state","error")}))}catch(i){t.parcelStatus="Invalid",t.needGeocode(e,t,location),t.clearSuggestions(t),r[0].setAttribute("data-app-state","error")}}else t.parcelStatus="Invalid",t.needGeocode(e,t,location),t.clearSuggestions(t),r[0].setAttribute("data-app-state","error")}))}catch(l){t.parcelStatus="Invalid",t.needGeocode(e,t,location),t.clearSuggestions(t),r[0].setAttribute("data-app-state","error")}}selectSuggestion(e,t){let a=null;a="SPAN"===e.target.tagName?e.target.parentNode:e.target,"no-parcel"===a.attributes[0].value?(t.clearSuggestions(t),t.supplementGeocoder(a.innerText,t,"submit")):t.supplementGeocoder(a.innerText,t,"submit")}inputChange(e,t){switch(e.key){case"Enter":""!=e.target.value&&void 0!=e.target.value&&t.supplementGeocoder(e.target.value,t,"submit");break;case"ArrowDown":case"ArrowUp":case"ArrowRight":case"ArrowLeft":break;case void 0:""!=e.target.value&&void 0!=e.target.value&&t.supplementGeocoder(e.target.value,t,"submit");break;default:t.clearSuggestions(t),t.supplementGeocoder(e.target.value,t,"suggestions")}}clearSuggestions(e){for(;e.form.childNodes[3].firstChild;)e.form.childNodes[3].removeChild(e.form.childNodes[3].firstChild)}needGeocode(e,t,a){fetch("https://us-central1-local-services-loopkup.cloudfunctions.net/getToken").then((e=>e.json())).then((function(r){let n=e.split(" RECOMMENDED")[0],i=[{attributes:{valid_parcel_status:t.parcelStatus,user_input:n},geometry:{x:0,y:0}}];null!=a&&(i[0].geometry.x=a.x,i[0].geometry.y=a.y);let s=new Request(`https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/addressvalidator/FeatureServer/0/addFeatures?token=${r.access_token}&features=${encodeURIComponent(JSON.stringify(i))}&f=json`,{method:"POST",body:"",headers:new Headers,mode:"cors",cache:"default"});fetch(s).then((e=>{}))}))}checkParcelValid(e){return/\d/.test(e)}submit(e,t){e.preventDefault(),t.supplementGeocoder(e.target[0].value,t,"submit")}}class n extends HTMLElement{constructor(){super();this.attachShadow({mode:"open"});this.navToolsStyle=document.createElement("style"),this.navToolsStyle.textContent="\n            #nav-tools-wrapper { display: flex; flex-direction: column;}\n            button.clear { font-size: 1.25em; width: 2.5em; height: 2.5em; background-color: #FEB70D; cursor: pointer; border: none; }\n            button.nav { width: 3.75em; height: 3.75em; border: none; cursor: pointer;background: #fff; }\n            button.nav:hover { background-color: #e6e6e6; transition: all 500ms cubic-bezier(.64,.09,.08,1); }\n            button.nav.active { background-color: #9fd5b3; }\n            button.nav img { width: 100%; }\n        ",this.loadNavTools(this)}clearDisplay(e){const t=e.shadowRoot;for(;t.firstChild;)t.removeChild(t.firstChild)}loadNavTools(e){const t=document.getElementsByTagName("my-home-info"),a=t[0].getAttribute("data-app-state"),r=t[0].getAttribute("data-app-mode"),n=t[0].getAttribute("data-inital-sets"),i=t[0].getAttribute("data-initial-map-available"),s=e.shadowRoot;s.appendChild(e.navToolsStyle);const o=document.createElement("section");o.id="nav-tools-wrapper",o.setAttribute("role","navigation"),o.setAttribute("aria-label","Data Navigation");const l=document.createElement("cod-button");if(l.addEventListener("click",(e=>{"my-home-info"==t[0].getAttribute("data-app-mode")?(t[0].setAttribute("data-app-state","welcome-screen"),t[0].setAttribute("data-active-sets","assessors-data,neighborhood,recycling,rental-data,rental-cert,demo-status,blight-data,permit-data,DWSDBackupProtection")):(t[0].setAttribute("data-app-state","active-screen"),t[0].setAttribute("data-active-sets",n)),"true"==i?t[0].setAttribute("data-map-available","true"):t[0].setAttribute("data-map-available","false"),t[0].setAttribute("data-parcel-id","none"),t[0].setAttribute("data-api-stored-datasets","{}"),t[0].setAttribute("data-api-active-datasets","none"),t[0].setAttribute("data-active-section","property")})),l.setAttribute("data-primary",!0),l.setAttribute("data-label","x"),l.setAttribute("data-size","lg"),l.setAttribute("data-hover",!1),l.setAttribute("data-extra-classes","fw-bold"),l.setAttribute("data-background-color","warning"),l.setAttribute("data-img",""),l.setAttribute("data-img-alt",""),l.setAttribute("data-shape","square"),l.setAttribute("data-icon",""),o.appendChild(l),"my-home-info"==r&&"error"!=a){const e=document.createElement("cod-button");e.setAttribute("data-label",""),e.setAttribute("data-size","lg"),e.setAttribute("data-img","https://detroitmi.gov/sites/detroitmi.localhost/files/2023-01/home.png"),e.setAttribute("data-img-alt","about this property"),e.setAttribute("data-shape","square"),e.setAttribute("data-nav-value","about this property"),e.setAttribute("data-icon",""),"about this property"==t[0].getAttribute("data-active-section")?(e.setAttribute("data-background-color","success"),e.setAttribute("data-primary",!0)):(e.setAttribute("data-background-color","secondary"),e.setAttribute("data-primary",!1),e.addEventListener("click",(e=>{if("none"!=t[0].getAttribute("data-api-active-datasets")){let e=JSON.parse(t[0].getAttribute("data-api-stored-datasets")),a=JSON.parse(t[0].getAttribute("data-api-active-datasets"));for(const t in a)t in e||(e[t]=a[t]);t[0].setAttribute("data-api-stored-datasets",JSON.stringify(e))}t[0].setAttribute("data-api-active-datasets","none"),t[0].setAttribute("data-active-sets","assessors-data,neighborhood,recycling,rental-data,rental-cert,demo-status,blight-data,permit-data,DWSDBackupProtection"),t[0].setAttribute("data-map-available","false"),t[0].setAttribute("data-active-section","about this property"),t[0].setAttribute("data-app-state","loading-screen")}))),o.appendChild(e);const a=document.createElement("cod-button");a.setAttribute("data-label",""),a.setAttribute("data-size","lg"),a.setAttribute("data-img","https://detroitmi.gov/sites/detroitmi.localhost/files/2023-01/government.png"),a.setAttribute("data-img-alt","government officials"),a.setAttribute("data-shape","square"),a.setAttribute("data-nav-value","government officials"),a.setAttribute("data-icon",""),"government officials"==t[0].getAttribute("data-active-section")?(a.setAttribute("data-background-color","success"),a.setAttribute("data-primary",!0)):(a.setAttribute("data-background-color","secondary"),a.setAttribute("data-primary",!1),a.addEventListener("click",(e=>{if("none"!=t[0].getAttribute("data-api-active-datasets")){let e=JSON.parse(t[0].getAttribute("data-api-stored-datasets")),a=JSON.parse(t[0].getAttribute("data-api-active-datasets"));for(const t in a)t in e||(e[t]=a[t]);t[0].setAttribute("data-api-stored-datasets",JSON.stringify(e))}t[0].setAttribute("data-api-active-datasets","none"),t[0].setAttribute("data-active-sets","council,council-members,bop-members,district-managers,business-liaison,district-inspectors,npo"),t[0].setAttribute("data-map-available","false"),t[0].setAttribute("data-active-section","government officials"),t[0].setAttribute("data-app-state","loading-screen")}))),o.appendChild(a);const r=document.createElement("cod-button");r.setAttribute("data-label",""),r.setAttribute("data-size","lg"),r.setAttribute("data-img","https://detroitmi.gov/sites/detroitmi.localhost/files/2023-01/zone.png"),r.setAttribute("data-img-alt","special areas and zones"),r.setAttribute("data-shape","square"),r.setAttribute("data-nav-value","special areas and zones"),r.setAttribute("data-icon",""),"special areas and zones"==t[0].getAttribute("data-active-section")?(r.setAttribute("data-background-color","success"),r.setAttribute("data-primary",!0)):(r.setAttribute("data-background-color","secondary"),r.setAttribute("data-primary",!1),r.addEventListener("click",(e=>{if("none"!=t[0].getAttribute("data-api-active-datasets")){let e=JSON.parse(t[0].getAttribute("data-api-stored-datasets")),a=JSON.parse(t[0].getAttribute("data-api-active-datasets"));for(const t in a)t in e||(e[t]=a[t]);t[0].setAttribute("data-api-stored-datasets",JSON.stringify(e))}t[0].setAttribute("data-api-active-datasets","none"),t[0].setAttribute("data-active-sets","nez,nrsa,historicDistrict"),t[0].setAttribute("data-map-available","false"),t[0].setAttribute("data-active-section","special areas and zones"),t[0].setAttribute("data-app-state","loading-screen")}))),o.appendChild(r);const n=document.createElement("cod-button");n.setAttribute("data-label",""),n.setAttribute("data-size","lg"),n.setAttribute("data-img","https://detroitmi.gov/sites/detroitmi.localhost/files/2023-01/nearby.png"),n.setAttribute("data-img-alt","things nearby"),n.setAttribute("data-shape","square"),n.setAttribute("data-nav-value","things nearby"),n.setAttribute("data-icon",""),"things nearby"==t[0].getAttribute("data-active-section")?(n.setAttribute("data-background-color","success"),n.setAttribute("data-primary",!0)):(n.setAttribute("data-background-color","secondary"),n.setAttribute("data-primary",!1),n.addEventListener("click",(e=>{if("none"!=t[0].getAttribute("data-api-active-datasets")){let e=JSON.parse(t[0].getAttribute("data-api-stored-datasets")),a=JSON.parse(t[0].getAttribute("data-api-active-datasets"));for(const t in a)t in e||(e[t]=a[t]);t[0].setAttribute("data-api-stored-datasets",JSON.stringify(e))}t[0].setAttribute("data-api-active-datasets","none"),t[0].setAttribute("data-active-sets","schools,demos-data,stabilization-data,improve-det"),t[0].setAttribute("data-active-section","things nearby"),t[0].setAttribute("data-map-available","true"),t[0].setAttribute("data-app-state","loading-screen")}))),o.appendChild(n);const i=document.createElement("cod-button");i.setAttribute("data-label",""),i.setAttribute("data-size","lg"),i.setAttribute("data-img","https://detroitmi.gov/sites/detroitmi.localhost/files/2023-01/print.png"),i.setAttribute("data-img-alt","print"),i.setAttribute("data-shape","square"),i.setAttribute("data-nav-value","print"),i.setAttribute("data-icon",""),"print"==t[0].getAttribute("data-active-section")?(i.setAttribute("data-background-color","success"),i.setAttribute("data-primary",!0)):(i.setAttribute("data-background-color","secondary"),i.setAttribute("data-primary",!1),i.addEventListener("click",(e=>{e.target.getAttribute("data-nav-value")&&t[0].setAttribute("data-app-state","print")}))),o.appendChild(i)}s.appendChild(o)}}customElements.define("app-geocoder",r),customElements.define("app-nav-tools",n);class i extends HTMLElement{static get observedAttributes(){return["data-display-type","data-pagination"]}constructor(){super();this.attachShadow({mode:"open"});this.neighborhoodImage=document.createElement("img"),this.neighborhoodImage.src="https://detroitmi.gov/sites/detroitmi.localhost/files/2023-01/neighborhood.png",this.neighborhoodImage.setAttribute("alt",""),this.welcomeStyle=document.createElement("style"),this.welcomeStyle.textContent="\n          @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@100;700&display=swap')\n          #display-wrapper { display: flex; padding: 1em; flex-wrap: wrap; font-family: 'Montserrat', sans-serif;}\n          #display-wrapper #welcome-img-wrapper { display: flex; }\n          #display-wrapper #welcome-img-wrapper img { height: 10em; margin: auto }\n          #display-wrapper p { text-align: center; font-family: 'Montserrat', sans-serif;}\n          #display-wrapper button { padding: 1em 3em;  background-color: #004445; color: #fff; border: none; cursor: pointer; margin: auto; width: 100%;}\n          p.display-title { font-weight: bold; font-size: 1.25em; }\n          app-geocoder { width: 100%}\n          .btn-group { display:flex; width: 100%; }\n          @media all and (min-width: 551px) {\n            #display-wrapper{ display: flex; }\n            #display-wrapper #welcome-img-wrapper img { width: 15em; height: auto; }\n            #display-wrapper article { flex: 1; padding: 1em; }\n          }\n        ",this.resultsStyle=document.createElement("style"),this.resultsStyle.textContent="\n          .results-container{ display: flex; }\n          #data-results { background-color: #e6e6e6; padding: 1em; height: 40em; overflow-y: auto; }\n          .data-title { font-weight: bold; border-left: solid .2em #FEB70D; padding: .5em; margin: 0 0 1em 0; font-family: 'Montserrat', sans-serif;}\n          .result-address {background-color: #fff; border: solid 0.1em #e6e6e6; padding: 1.04em 0.6em; font-family: 'Montserrat', sans-serif;}\n          .data-block-title { padding: .5em; background-color: #FEB70D; margin: 0; font-weight: bold; font-family: 'Montserrat', sans-serif; display: flex;}\n          .data-block-title span { flex: 1; margin: auto; }\n          .data-block-content { padding: .5em; margin-bottom: .5em; background-color: #fff; }\n          .data-block-content p { margin: 0; font-family: 'Montserrat', sans-serif;}\n          .data-block-content hr { border-top: 1px dotted;}\n          .dataset-results {flex: 1;}\n          .critical-text { color: #CF3234; }\n          .error-result { padding: 1em; }\n          .data-block-title button { background-color: #fff; border: none; padding: 0.25em 0.5em; box-shadow: 1px 1px 3px 0px rgb(0 0 0 / 75%);}\n          .data-block-title button img { height: 1em; }\n          @media all and (min-width: 551px) {\n            #data-results { height: auto; }\n            #data-blocks { column-count: 2; }\n            #data-blocks .data-block {     -webkit-column-break-inside: avoid; page-break-inside: avoid; break-inside: avoid; }\n          }\n\n          @media all and (min-width: 1024px) {\n            #data-results { height: auto; }\n            #data-blocks { column-count: 3; }\n            #data-blocks .data-block {     -webkit-column-break-inside: avoid; page-break-inside: avoid; break-inside: avoid; }\n          }\n        ",this.loadDisplay(this)}attributeChangedCallback(e,t,a){"results"==a&&this.clearDisplay(this),"data-pagination"==e&&this.clearDisplay(this),this.loadDisplay(this)}clearDisplay(e){const t=e.shadowRoot;for(;t.firstChild;)t.removeChild(t.firstChild)}formatDate(e){const t=new Date(e);return`${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()]} ${t.getDate()}, ${t.getFullYear()}`}buildCouncil(e){let t=window.location.hostname,a={title:"Council District",content:null};return a.content=`\n        <p><strong>District Number:</strong> ${e.data.district}</p>\n        <p><strong>Council Member:</strong> <a href="http://${t}${e.data.url}" target="_blank">${e.data.name}</a></p>\n        <p><strong>Council Member Phone:</strong> ${e.data.phone}</p>\n      `,a}buildBOP(e){let t=window.location.hostname,a={title:"Police Commissioner",content:null};return a.content=`\n        <p><strong>Commissioner:</strong> <a href="http://${t}${e.data.url}" target="_blank">${e.data.name}</a></p>\n        <p><strong>Commissioner's Phone:</strong> ${e.data.phone}</p>\n        <p><strong>Commissioner's Email:</strong> ${e.data.email}</p>\n      `,a}buildDistrictManagers(e){let t={title:"District Managers",content:null};return e&&0!=Object.keys(e.data).length&&e.data.constructor===Object&&"Not found."!==e.data.detail?t.content=`\n          <p><strong>District Manager:</strong> <a href="${e.data.manager.url}" target="_blank">${e.data.manager.name}</a></p>\n          <p><strong>Manager Phone:</strong> ${e.data.manager.phone}</p>\n          <p><strong>Deputy Manager:</strong> <a href="${e.data.deputy.url}" target="_blank">${e.data.deputy.name}</a></p>\n          <p><strong>Deputy Manager Phone:</strong> ${e.data.deputy.phone}</p>\n          `:t.content="\n            <p>No data found</p>\n          ",t}buildBusinessLiaison(e){let t={title:"Business Liaison",content:null};return e&&0!=Object.keys(e.data).length&&e.data.constructor===Object&&"Not found."!==e.data.detail?t.content=`\n          <p><strong>Liaison:</strong> ${e.data.name}</p>\n          <p><strong>Liaison Phone:</strong> ${e.data.email}</p>\n          `:t.content="\n            <p>No data found</p>\n          ",t}buildInspector(e){let t={title:"Enforcement Inspector",content:null};return e&&0!=Object.keys(e.data).length&&e.data.constructor===Object&&"Not found."!==e.data.detail?t.content=`\n          <p><strong>Inspector:</strong> ${e.data.name}</p>\n          <p><strong>Inspector Phone:</strong> ${e.data.phone}</p>\n          `:t.content="\n            <p>No data found</p>\n          ",t}buildNeighborhood(e){let t={title:"Neighborhood",content:null};return e&&0!=Object.keys(e.data).length&&e.data.constructor===Object&&"Not found."!==e.data.detail?t.content=`\n            <p><strong>Neighborhood name:</strong> ${e.data.attributes.neighborhood_name}</p>\n          `:t.content="\n            <p>No neighborhood found</p>\n          ",t}buildDWSDBackupProtection(e){let t=["Aviation Sub","Barton-McFarland","Chadsey Condon","Cornerstone Village","East English Village","Morningside","Jefferson Chalmers","Warrendale","Victoria Park","Moross-Morang","Garden View"],a={title:"DWSD Basement Backup Protection Program",content:null};return e&&e.data.attributes.neighborhood_name&&t.includes(e.data.attributes.neighborhood_name)?a.content=`\n        <p>This property qualifies for the DWSD Basement Backup Protection Program.</p>\n        <br>\n        <a href="https://app.smartsheet.com/b/form/509cb1e905a74948bce7b0135da53277?Property%20Street%20Address=${e.data.address}&Property%20City=Detroit&Property%20Zip%20Code=${e.data.attributes.Postal}&Neighborhood=${e.data.attributes.neighborhood_name}" target="_blank"><cod-button data-label="Apply Now" data-background-color="primary" data-size="xsmall" data-icon="" data-primary="true" data-img-alt=""></cod-button></a>\n        `:a.content='\n        <p>This property doesn\'t qualify for the Basement Backup Protection Program. To learn more please <a href="https://detroitmi.gov/departments/water-and-sewerage-department/dwsd-resources/basement-flooding-protection">visit our page.</a></p>\n        ',a}buildHRDFlooding(e){let t=["Cornerstone Village","Morningside","Chandler Park","Fox Creek","Riverbend","Morningside","West End ","Midwest","Chadsey\u2010Condon","Claytown","North Corktown","Michigan\u2010 Martin","Aviation Sub","Garden View","Plymouth\u2010I96","Plymouth\u2010Hubell","Paveway","We Care Community","Fiskhorn","Joy-Schaefer","Warrendale","Warren Ave Community","Barton-McFarland"],a={title:"CDBG Disaster Recovery Basement Backup Protection Program",content:null};return e&&e.data.attributes.neighborhood_name&&t.includes(e.data.attributes.neighborhood_name)?a.content='\n        <p>This property qualifies for the CDBG Disaster Recovery Basement Backup Protection Program.</p>\n        <br>\n        <cod-button data-label="Apply Now" data-background-color="primary" data-size="xsmall" data-icon="" data-primary="true" data-img-alt="" data-link="https://app.smartsheet.com/b/form/3dab24dc95bf469b8ac4c27669536507"></cod-button>\n        ':a.content='\n        <p>This property doesn\u2019t qualify for the CDBG Disaster Recovery Basement Backup Protection Program. To learn more please <a href="https://detroitmi.gov/departments/housing-and-revitalization-department/disaster-recovery">visit our page.</a></p>\n        ',a}buildHistoricDistrict(e,t){let a={title:"NEZ Homestead Zone",content:null};return 0!=Object.keys(e.data).length&&e.data.constructor===Object&&e.data.features.length>0?a.content=`\n          <p><strong>NAME:</strong> ${e.data.features[0].attributes.Name}</p>\n          <p><strong>DESIGNATED ON:</strong> ${t.formatDate(e.data.features[0].attributes.Year_Enacted).format("MMM DD, YYYY")}</p>\n          `:a.content="\n          <p>This property is not in a historic district.</p>\n          ",a}buildNEZ(e){let t={title:"NEZ Homestead Zone",content:null};return 0!=Object.keys(e.data).length&&e.data.constructor===Object&&e.data.features.length>0?t.content=`\n          <p><strong>Name:</strong> ${e.data.features[0].attributes.RNNAME}</p>\n          <p><strong>ID:</strong> ${e.data.features[0].attributes.RID}</p>\n          <p class="noprint"><a href="https://data.detroitmi.gov/datasets/proposed-nez-homestead-2021/explore" target="_blank">View Map</a></p>\n          `:t.content='\n          <p>This property is not on a NEZ Homestead zone.</p>\n          <p class="noprint"><a href="https://data.detroitmi.gov/datasets/nez-h-districts/explore" target="_blank">View Map</a></p>\n          ',t}buildNRSA(e){let t={title:"Neighborhood Revitalization Strategy Areas (NRSA)",content:null};return 0!=Object.keys(e.data).length&&e.data.constructor===Object&&e.data.features.length>0?t.content=`\n          <p><strong>Name:</strong> ${e.data.features[0].attributes.Name}</p>\n          `:t.content="\n          <p>This property is not on a NRSA.</p>\n          ",t}buildNPO(e){let t={title:"Police",content:null};return e&&e.data.features.length?t.content=`\n          <p><strong>PRECINCT</strong></p>\n          <p><strong>Number:</strong> ${e.data.features[0].attributes.precinct}</p>\n          <p><strong>Address:</strong> ${e.data.features[0].attributes.precinct_location}</p>\n          <br>\n          <p><strong>NEIGHBORHOOD POLICE OFFICER (NPO)</strong></p>\n          <p><strong>Name:</strong> ${e.data.features[0].attributes.police_officer}</p>\n          <p><strong>Phone:</strong> ${e.data.features[0].attributes.phone_number}</p>\n          <p><strong>Email:</strong> ${e.data.features[0].attributes.email}</p>\n          `:t.content="<p>No police info found</p>",t}checkRecyclingStatus(e){try{if(e.next_pickups["yard waste"]){let t=null,a=null;return e.details.forEach((e=>{"start-date"==e.type&&"yard waste"==e.service&&(t=null!=e.normalDay?e.normalDay:e.newDay),"end-date"==e.type&&"yard waste"==e.service&&(a=null!=e.normalDay?e.normalDay:e.newDay)})),!!moment(e.next_pickups["yard waste"].next_pickup).isBetween(t,a)}return!1}catch(t){return!1}}buildRecycling(e,t){let a={title:"Trash & Recycling",content:null};if(e&&0!=Object.keys(e.data).length&&e.data.constructor===Object){let r={name:null,url:null,phone:null};"GFL"===e.data.next_pickups.trash.contractor?(r.name="GFL",r.url="http://gflusa.com/residential/detroit/",r.phone="(844) 464-3587"):(r.name="WM",r.url="http://www.advanceddisposal.com/mi/detroit/detroit-residential-collection",r.phone=" (844) 233-8764"),a.content=`\n            <p><strong>Provider:</strong> <a href="${r.url}" target="_blank">${r.name}</a> ${r.phone}</p>\n            <p><strong>Next Trash:</strong> ${t.formatDate(e.data.next_pickups.trash.next_pickup)}</p>\n            <p><strong>Next Recycling:</strong> ${t.formatDate(e.data.next_pickups.recycling.next_pickup)}</p>\n            <p><strong>Next Bulk:</strong> ${t.formatDate(e.data.next_pickups.bulk.next_pickup)}</p>\n            ${t.checkRecyclingStatus(e.data)?tempHTML+=`<p><strong>Next Yard:</strong> ${t.formatDate(e.data.next_pickups["yard waste"].next_pickup)}</p>`:""}\n          `}else a.content="<p>No data found</p>";return a}buildAssessors(e){let t={title:"Assessor's Data",content:null};if(e&&0!=Object.keys(e.data).length&&e.data.constructor===Object&&"Not found."!==e.data.detail){let a={year:null,value:null,floor:null,buildingClass:null};t.content=`\n            <p><strong>Owner's address:</strong> ${e.data.ownerstreetaddr}</p>\n            <p><strong>Owner's city:</strong> ${e.data.ownercity}</p>\n            <p><strong>Owner's state:</strong> ${e.data.ownerstate}</p>\n            <p><strong>Owner's zip:</strong> ${e.data.ownerzip}</p>\n          `,0===e.data.resb_bldgclass?(a.year=e.data.cib_yearbuilt,a.value=e.data.cib_value,a.floor=e.data.cib_yearbuilt,a.buildingClass=e.data.cib_yearbuilt):(a.year=e.data.resb_yearbuilt,a.value=e.data.resb_value,a.floor=e.data.resb_floorarea,a.buildingClass=e.data.resb_bldgclass),t.content+=`\n            <p><strong>Parcel number:</strong> ${e.data.pnum}</p>\n            <p><strong>Year build:</strong> ${a.year}</p>\n            <p><strong>Calculated value:</strong> $${a.value.toLocaleString()}</p>\n            <p><strong>Floor area:</strong> ${a.floor.toLocaleString()} SQFT</p>\n            <p><strong>Building class:</strong> ${a.buildingClass}</p>\n          `}else t.content="<p>No data found</p>";return t}buildRental(e,t){let a=document.getElementsByTagName("my-home-info"),r=JSON.parse(a[0].getAttribute("data-api-active-datasets")),n={title:"Rental Enforcement Status",content:null};return e&&e.data.features.length||r["rental-cert-data"]&&r["rental-cert-data"].data.features.length?n.content=`\n            <p><strong>Registered:</strong> ${e.data.features.length?`${t.formatDate(e.data.features[0].attributes.date_status)}`:"Not registered"}</p>\n            <p><strong>Certified:</strong> ${r["rental-cert-data"].data.features.length?`${t.formatDate(r["rental-cert-data"].data.features[0].attributes.issued_date)}`:"Not certified"}</p>\n          `:n.content="\n          <p><strong>Registered:</strong> Not registered</p>\n          <p><strong>Certified:</strong> Not certified</p>\n          ",n}buildFireEscrow(e){let t="";return e&&e.data.features.length?t+='\n            <article class="info-section">\n            <span>FIRE ESCROW</span>\n            <div>\n              <p><strong>STATUS:</strong> Fire Escrow found</p>\n              <p><a href="https://detroitmi.gov/taxonomy/term/8501"><button>Start Process</button></a></p>\n            </div>\n            </article>':t+='\n          <article class="info-section">\n            <span>FIRE ESCROW</span>\n            <div>\n              <p><strong>STATUS:</strong> Fire Escrow not found</p>\n            </div>\n            </article>',t}buildBlight(e,t){let a={title:"Blight Tickets",content:null};return e&&e.data.features.length?a.content=`\n            <p><strong>Ticket ID:</strong> ${e.attributes.ticket_number}</p>\n            <p><strong>Fine Amount:</strong> $${e.attributes.fine_amount}</p>\n            <p><strong>Agency name:</strong> ${e.attributes.agency_name}</p>\n            <p><strong>Disposition:</strong> ${e.attributes.disposition}</p>\n            <p><strong>Description:</strong> ${e.attributes.violation_description}</p>\n            <p><strong>Hearing Date:</strong> ${t.formatDate(e.attributes.hearing_date)}</p>\n            <p><strong>Hearing Time:</strong> ${e.attributes.hearing_time}</p>\n          `:a.content="<p>No blight tickets found</p>",a}buildSchools(e,t){let a={title:"Schools",content:null};return e&&e.data.features.length?e.data.features.forEach((function(e,t){0==t?a.content=`\n              <p><strong>Name:</strong> ${e.properties.EntityOfficialName}</p>\n              <p><strong>EntityActualGrades:</strong> ${e.properties.EntityActualGrades}</p>\n              <p><strong>Type:</strong> ${e.properties.EntityTypeName}</p>\n              <p><strong>Address:</strong> ${e.properties.EntityPhysicalStreet}</p>\n              <hr>\n              `:a.content+=`\n              <p><strong>Name:</strong> ${e.properties.EntityOfficialName}</p>\n              <p><strong>EntityActualGrades:</strong> ${e.properties.EntityActualGrades}</p>\n              <p><strong>Type:</strong> ${e.properties.EntityTypeName}</p>\n              <p><strong>Address:</strong> ${e.properties.EntityPhysicalStreet}</p>\n              <hr>\n              `})):a.content="<p>No schools nearby.</p>",a}buildPermit(e,t){let a={title:"Building Permits",content:null};return e&&e.data.features.length?a.content=`\n          <p><strong>PERMIT NUMBER:</strong> ${e.attributes.record_id}</p>\n          <p><strong>PERMIT TYPE:</strong> ${e.attributes.permit_type}</p>\n          <p><strong>PERMIT BUILDING TYPE:</strong> ${e.attributes.permit_type}</p>\n          <p><strong>PERMIT STATUS:</strong> ${e.attributes.status}</p>\n          <p><strong>PERMIT ISSUED:</strong> ${t.formatDate(e.attributes.issued_date)}</p>\n          <p><strong>PERMIT DESCRIPTION:</strong> ${e.attributes.description_of_work}</p>\n          `:a.content="<p>No building permits found</p>",a}buildDemoStatus(e,t){let a=document.getElementsByTagName("my-home-info"),r=JSON.parse(a[0].getAttribute("data-parcel-id")).address.replace(" ","%2520");r=r.replace(",","%252C");let n={title:"Demolition Status",content:null};return e&&e.data.features.length?n.content=`\n            <p class="critical-text"><strong>WARNIG!</strong></p>\n            <p>THIS PROPERTY IS SCHEDULED FOR DEMOLITION</p> \n            ${null==e.data.features[0].attributes.demolish_by_date?"<p><strong>Date to be determined</strong></p>":`<p><strong>${t.formatDate(e.attributes.demolish_by_date)}</stron></p>`}\n            <br>\n            <p><a href="https://detroitmi.maps.arcgis.com/apps/instant/nearby/index.html?appid=41ba8dd946d842b9ba632ecc0a5d2556&sliderDistance=1&find=${r}" target="_blank"><cod-button data-label="Expand your demo search" data-background-color="primary" data-icon="" data-size="xsmall" data-primary="true" data-img-alt=""></cod-button></a></p>\n          `:n.content=`\n          <p>This property is not on the demolition list</p>\n          <br>\n          <p><a href="https://detroitmi.maps.arcgis.com/apps/instant/nearby/index.html?appid=41ba8dd946d842b9ba632ecc0a5d2556&sliderDistance=1&find=${r}" target="_blank"><cod-button data-label="Expand your demo search" data-background-color="primary" data-icon="" data-size="xsmall" data-primary="true" data-img-alt=""></cod-button></a></p>`,n}buildDemosNear(e,t){let a={title:"Demolitions Nearby",content:null};return e&&e.data.features.length?e.data.features.forEach((function(e,r){0==r?a.content=`\n              <p><strong>Address:</strong> ${e.properties.address}</p>\n              <p><strong>Commercial:</strong> ${e.properties.commercial_building}</p>\n              <p><strong>Price:</strong> $${parseInt(e.properties.price).toLocaleString()}</p>\n              <p><strong>Parcel:</strong> ${e.properties.parcel_id}</p>\n              <p><strong>Contractor:</strong> ${e.properties.contractor_name}</p>\n              <p><strong>Council District:</strong> ${e.properties.council_district}</p>\n              <p><strong>Neighborhood:</strong> ${e.properties.neighborhood}</p>\n              ${void 0==e.properties.demolish_by_date||null==e.properties.demolish_by_date?"<p><p><strong>Expected Date:</strong> Date to be determined</p>":`<p><strong>Expected Date:</strong>${t.formatDate(e.properties.demolish_by_date)}</strong></p>`}\n              <hr>\n              `:a.content+=`\n              <p><strong>Address:</strong> ${e.properties.address}</p>\n              <p><strong>Commercial:</strong> ${e.properties.commercial_building}</p>\n              <p><strong>Price:</strong> $${parseInt(e.properties.price).toLocaleString()}</p>\n              <p><strong>Parcel:</strong> ${e.properties.parcel_id}</p>\n              <p><strong>Contractor:</strong> ${e.properties.contractor_name}</p>\n              <p><strong>Council District:</strong> ${e.properties.council_district}</p>\n              <p><strong>Neighborhood:</strong> ${e.properties.neighborhood}</p>\n              ${void 0==e.properties.demolish_by_date||null==e.properties.demolish_by_date?"<p><p><strong>Expected Date:</strong> Date to be determined</p>":`<p><strong>Expected Date:</strong>${t.formatDate(e.properties.demolish_by_date)}</strong></p>`}\n              <hr>\n              `})):a.content="<p>No demolitions are happening nearby.</p>",a}buildStabilizationsNear(e,t){let a={title:"Stabilizations Nearby",content:null};return e&&e.data.features.length?e.data.features.forEach((function(e,t){0==t?a.content=`\n              <p><strong>Address:</strong> ${e.properties.address}</p>\n              <p><strong>Parcel:</strong> ${e.properties.parcel_id}</p>\n              <p><strong>Council District:</strong> ${e.properties.council_district}</p>\n              <p><strong>Neighborhood:</strong> ${e.properties.neighborhood}</p>\n              <p><strong>Status:</strong> ${e.properties.rehab_status}</p>\n              <hr>\n              `:a.content+=`\n          <p><strong>Address:</strong> ${e.properties.address}</p>\n          <p><strong>Parcel:</strong> ${e.properties.parcel_id}</p>\n          <p><strong>Council District:</strong> ${e.properties.council_district}</p>\n          <p><strong>Neighborhood:</strong> ${e.properties.neighborhood}</p>\n          <p><strong>Status:</strong> ${e.properties.rehab_status}</p>\n              <hr>\n              `})):a.content="<p>No stabilizations are happening nearby.</p>",a}buildImproveDet(e,t){let a={title:"Improve Detroit Issues Nearby",content:null};return e&&e.data.features.length?e.data.features.forEach((function(e,r){0==r?a.content=`\n              <p><strong>ID:</strong> <a href="${e.properties.web_url}" target="_blank">${e.properties.id}</a></p>\n              <p><strong>Type:</strong> ${e.properties.request_type_title}</p>\n              <p><strong>Status:</strong> ${e.properties.status}</p>\n              <p><strong>Reported on:</strong> ${t.formatDate(e.properties.created_at)}</p>\n              <hr>\n              `:a.content+=`\n              <p><strong>ID:</strong> <a href="${e.properties.web_url}" target="_blank">${e.properties.id}</a></p>\n              <p><strong>Type:</strong> ${e.properties.request_type_title}</p>\n              <p><strong>Status:</strong> ${e.properties.status}</p>\n              <p><strong>Reported on:</strong> ${t.formatDate(e.properties.created_at)}</p>\n              <hr>\n              `})):a.content="<p>No active issues nearby.</p>",a}selectDataBlockType(e,t){switch(t.id){case"council-members":try{return e.buildCouncil(t)}catch(a){return""}break;case"bop-members":try{return e.buildBOP(t)}catch(a){return""}break;case"district-managers":try{return e.buildDistrictManagers(t)}catch(a){return""}break;case"business-liaison":try{return e.buildBusinessLiaison(t)}catch(a){return""}break;case"district-inspectors":try{return e.buildInspector(t)}catch(a){return""}break;case"neighborhood":try{return e.buildNeighborhood(t)}catch(a){return""}break;case"nez":try{return e.buildNEZ(t)}catch(a){return""}break;case"nrsa":try{return e.buildNRSA(t)}catch(a){return""}break;case"assessors-data":try{return e.buildAssessors(t)}catch(a){return""}break;case"permit-data":try{return e.buildPermit(t,e)}catch(a){return""}break;case"rental-data":try{return e.buildRental(t,e)}catch(a){return""}break;case"blight-data":try{return e.buildBlight(t,e)}catch(a){return""}break;case"demos-data":try{return e.buildDemosNear(t,e)}catch(a){return""}break;case"stabilization-data":try{return e.buildStabilizationsNear(t,e)}catch(a){return""}break;case"demo-status":try{return e.buildDemoStatus(t)}catch(a){return""}break;case"npo":try{return e.buildNPO(t)}catch(a){return""}break;case"improve-det":try{return e.buildImproveDet(t,e)}catch(a){return""}break;case"schools":try{return e.buildSchools(t,e)}catch(a){return""}break;case"recycling":try{return e.buildRecycling(t,e)}catch(a){return""}break;case"historicDistrict":try{return e.buildHistoricDistrict(t)}catch(a){return""}break;case"fireEscrow":try{return e.buildFireEscrow(t)}catch(a){return""}break;case"DWSDBackupProtection":try{return e.buildDWSDBackupProtection(t)}catch(a){return""}break;case"HRDFlooding":try{return e.buildHRDFlooding(t)}catch(a){return""}break;default:return""}}setDatasetPagination(e,t){if(e.hasAttribute("data-pagination")){let a=JSON.parse(e.getAttribute("data-pagination"));if(a[t.id]){let e={start:a[t.id].start};return t.data.features.length<=a[t.id].end+3?(e.end=t.data.features.length,e.more=!1):(e.end=a[t.id].end+3,e.more=!0),e}{let e={start:0,end:3,more:!0};return t.data.features?t.data.features.length<=3&&(e.end=t.data.features.length,e.more=!1):(e.start=null,e.more=!1),e}}{let e={start:0,end:3,more:!0};return t.data.features?t.data.features.length<=3&&(e.end=t.data.features.length,e.more=!1):(e.start=null,e.more=!1),e}}printInfo(e){let t=e.buildDataSection(e),a=window.open("","","height=500, width=500");a.document.write("<html>"),a.document.write("<head><style>@media print {.noprint { visibility: hidden;} p.data-block-title{border-bottom: 1px solid;} .data-block-title button { display: none; } body { column-count: 2;} .data-block {     -webkit-column-break-inside: avoid; page-break-inside: avoid; break-inside: avoid; } }</style></head>"),a.document.write("<body >"),a.document.write(t.children[1].innerHTML),a.document.write("</body>"),a.document.close(),a.print()}buildDataBlock(e,t){const a=document.getElementsByTagName("my-home-info"),r=a[0].getAttribute("data-map-available"),n=document.createElement("article");n.className="data-block";let i=e.setDatasetPagination(e,t),s=JSON.parse(JSON.stringify(t));null!==i.start&&(s.data.features=t.data.features.slice(i.start,i.end));let o=e.selectDataBlockType(e,s);if(void 0==o||null==o.content)return null;{const s=document.createElement("p");s.className="data-block-title";const l=document.createElement("article");if(l.className="data-block-content",l.innerHTML=o.content,"true"==r){const e=document.createElement("span");e.innerText=o.title;const r=document.createElement("cod-button");r.setAttribute("data-map-active-data",t.id),r.setAttribute("data-label","View Map"),r.setAttribute("data-size","xsmall"),r.setAttribute("data-icon",""),r.setAttribute("data-img","https://detroitmi.gov/sites/detroitmi.localhost/files/2023-02/map.png"),r.setAttribute("data-img-alt","map"),r.setAttribute("data-shape",""),r.setAttribute("data-hover",!1),r.setAttribute("data-extra-classes","fw-bold"),r.setAttribute("data-background-color","light"),r.setAttribute("data-primary",!0),r.addEventListener("click",(e=>{e.target.getAttribute("data-map-active-data")&&(a[0].setAttribute("data-map-active-data",e.target.getAttribute("data-map-active-data")),a[0].setAttribute("data-app-state","map"))})),s.appendChild(e),s.appendChild(r)}else s.innerText=o.title;if(n.appendChild(s),n.appendChild(l),i.more){let a=document.createElement("cod-button");a.setAttribute("data-pagination-id",t.id),a.setAttribute("data-pagination",JSON.stringify(i)),a.setAttribute("data-label","Load More +"),a.setAttribute("data-size","xsmall"),a.setAttribute("data-icon",""),a.setAttribute("data-img",""),a.setAttribute("data-img-alt",""),a.setAttribute("data-shape",""),a.setAttribute("data-hover",!1),a.setAttribute("data-extra-classes","fw-bold"),a.setAttribute("data-background-color","primary"),a.setAttribute("data-primary",!1),a.addEventListener("click",(t=>{if(t.target.getAttribute("data-pagination")){let a=document.createElement("cod-spinner");a.setAttribute("data-type","border"),a.setAttribute("data-background-color","primary"),a.setAttribute("data-size","sm");let r=e.getAttribute("data-pagination");r=null===r?{}:JSON.parse(r),r[`${t.target.getAttribute("data-pagination-id")}`]=JSON.parse(t.target.getAttribute("data-pagination")),e.setAttribute("data-pagination",JSON.stringify(r)),t.target.parentElement.appendChild(a),t.target.remove()}})),l.appendChild(a)}return n}}buildDataSection(e){const t=document.getElementsByTagName("my-home-info"),a=t[0].getAttribute("data-app-mode"),r=document.createElement("section");if(r.id="data-results","my-home-info"==a){const e=document.createElement("p");e.className="data-title",e.innerText=t[0].getAttribute("data-active-section").toUpperCase(),r.appendChild(e)}const n=document.createElement("div");n.id="data-blocks",r.appendChild(n);const i=JSON.parse(t[0].getAttribute("data-api-active-datasets"));for(const s in i)Object.hasOwnProperty.call(i,s)&&null!=e.buildDataBlock(e,i[s])&&n.appendChild(e.buildDataBlock(e,i[s]));return r}loadDisplay(e){const t=e.shadowRoot,a=document.createElement("section"),r=document.createElement("app-geocoder"),n=document.createElement("app-nav-tools"),i=document.getElementsByTagName("my-home-info");switch(n.printInfo=e.printInfo,a.id="display-wrapper",this.getAttribute("data-display-type")){case"welcome":t.appendChild(e.welcomeStyle);const s=document.createElement("div");s.id="welcome-img-wrapper",s.appendChild(this.neighborhoodImage),a.appendChild(s);const o=document.createElement("article");a.appendChild(o);const l=document.createElement("p");l.setAttribute("aria-label","title"),l.innerText="It\u2019s all here. All in one place.",l.className="display-title",o.appendChild(l);const d=document.createElement("p");d.innerText="Enter your home address to find out your city councilmember and neighborhood district manager, along with local information about trash/recycling, your neighborhood police officer, city issues reported in your neighborhood, and more.",o.appendChild(d),o.appendChild(r),t.appendChild(a);break;case"active":t.appendChild(e.welcomeStyle),a.appendChild(r),t.appendChild(a);break;case"loading":const c=document.createElement("cod-loader");c.setAttribute("data-color","color-3"),a.appendChild(c),t.appendChild(a);break;case"results":let u=JSON.parse(i[0].getAttribute("data-parcel-id"));t.appendChild(e.resultsStyle);let p=document.createElement("section");p.className="results-container",p.appendChild(n);let m=document.createElement("article");m.className="dataset-results";let g=document.createElement("article");g.className="result-address",g.innerText=u.address,m.appendChild(g);let b=e.buildDataSection(e);m.appendChild(b),p.appendChild(m),a.appendChild(p),t.appendChild(a);break;case"error":let h=document.createElement("section");t.appendChild(e.resultsStyle),h.className="results-container",h.appendChild(n);let f=document.createElement("article");f.className="error-result",f.innerHTML='\n        <svg xmlns="http://www.w3.org/2000/svg" width="100" height="70" viewBox="0 0 100 68">\n          <g id="large">\n            <path fill="none" stroke="#F44" d="M55.8 38.5l6.2-1.2c0-1.8-.1-3.5-.4-5.3l-6.3-.2c-.5-2-1.2-4-2.1-6l4.8-4c-.9-1.6-1.9-3-3-4.4l-5.6 3c-1.3-1.6-3-3-4.7-4.1l2-6A30 30 0 0 0 42 8l-3.3 5.4c-2-.7-4.2-1-6.2-1.2L31.3 6c-1.8 0-3.5.1-5.3.4l-.2 6.3c-2 .5-4 1.2-6 2.1l-4-4.8c-1.6.9-3 1.9-4.4 3l3 5.6c-1.6 1.3-3 3-4.1 4.7l-6-2A32.5 32.5 0 0 0 2 26l5.4 3.3c-.7 2-1 4.2-1.2 6.2L0 36.7c0 1.8.1 3.5.4 5.3l6.3.2c.5 2 1.2 4 2.1 6l-4.8 4c.9 1.6 1.9 3 3 4.4l5.6-3c1.4 1.6 3 3 4.7 4.1l-2 6A30.5 30.5 0 0 0 20 66l3.4-5.4c2 .7 4 1 6.1 1.2l1.2 6.2c1.8 0 3.5-.1 5.3-.4l.2-6.3c2-.5 4-1.2 6-2.1l4 4.8c1.6-.9 3-1.9 4.4-3l-3-5.6c1.6-1.3 3-3 4.1-4.7l6 2A32 32 0 0 0 60 48l-5.4-3.3c.7-2 1-4.2 1.2-6.2zm-13.5 4a12.5 12.5 0 1 1-22.6-11 12.5 12.5 0 0 1 22.6 11z"/>\n            <animateTransform attributeName="transform" begin="0s" dur="3s" from="0 31 37" repeatCount="indefinite" to="360 31 37" type="rotate"/>\n          </g>\n          <g id="small">\n            <path fill="none" stroke="#F44" d="M93 19.3l6-3c-.4-1.6-1-3.2-1.7-4.8L90.8 13c-.9-1.4-2-2.7-3.4-3.8l2.1-6.3A21.8 21.8 0 0 0 85 .7l-3.6 5.5c-1.7-.4-3.4-.5-5.1-.3l-3-5.9c-1.6.4-3.2 1-4.7 1.7L70 8c-1.5 1-2.8 2-3.9 3.5L60 9.4a20.6 20.6 0 0 0-2.2 4.6l5.5 3.6a15 15 0 0 0-.3 5.1l-5.9 3c.4 1.6 1 3.2 1.7 4.7L65 29c1 1.5 2.1 2.8 3.5 3.9l-2.1 6.3a21 21 0 0 0 4.5 2.2l3.6-5.6c1.7.4 3.5.5 5.2.3l2.9 5.9c1.6-.4 3.2-1 4.8-1.7L86 34c1.4-1 2.7-2.1 3.8-3.5l6.3 2.1a21.5 21.5 0 0 0 2.2-4.5l-5.6-3.6c.4-1.7.5-3.5.3-5.1zM84.5 24a7 7 0 1 1-12.8-6.2 7 7 0 0 1 12.8 6.2z"/>\n            <animateTransform attributeName="transform" begin="0s" dur="2s" from="0 78 21" repeatCount="indefinite" to="-360 78 21" type="rotate"/>\n          </g>\n        </svg>\n        <h3>No Information found on this address. Please close and try again.</h3>\n        ',h.appendChild(f),a.appendChild(h),t.appendChild(a);break;case"print":let y=JSON.parse(i[0].getAttribute("data-parcel-id"));t.appendChild(e.resultsStyle);let v=document.createElement("section");v.className="results-container",v.appendChild(n);let _=document.createElement("article");_.className="dataset-results";let A=document.createElement("article");A.className="result-address",A.innerText=y.address,_.appendChild(A);let S=e.buildDataSection(e);_.appendChild(S),v.appendChild(_),a.appendChild(v),t.appendChild(a),e.printInfo(e)}}}const s=a(530),o=a(7055);class l extends HTMLElement{static get observedAttributes(){return["data-loader-state","data-parcel-id"]}constructor(){super();const e=this.attachShadow({mode:"open"}),t=document.createElement("section");t.id="loader-wrapper",e.appendChild(t)}attributeChangedCallback(e,t,a){this.shadowRoot;if("data-loader-state"===e)this.clearLoader(this),this.loadLoader(this)}getDataSets(e){const t=document.getElementsByTagName("my-home-info"),a=t[0].getAttribute("data-active-sets").split(","),r=JSON.parse(t[0].getAttribute("data-parcel-id"));let n=[],i=new Promise(((e,t)=>{if("CONDO BUILDING"!=r.attributes.parcel_id){let t="https://apis.detroitmi.gov/assessments/parcel/"+r.attributes.parcel_id+"/";return fetch(t).then((e=>e.json())).then((function(t){e({id:"assessors-data",data:t})})).catch((e=>{}))}e({id:"assessors-data",data:null})})),l=new Promise(((e,t)=>{e({id:"neighborhood",data:r})})),d=new Promise(((e,t)=>e({id:"council",data:r}))),c=new Promise(((e,t)=>fetch("/rest/bop?_format=json").then((e=>e.json())).then((function(t){e({id:"bop-members",data:t})})).catch((e=>{})))),u=new Promise(((e,t)=>fetch("/rest/district-managers?_format=json").then((e=>e.json())).then((function(t){e({id:"district-managers",data:t})})).catch((e=>{})))),p=new Promise(((e,t)=>fetch("/rest/district-inspectors?_format=json").then((e=>e.json())).then((function(t){e({id:"district-inspectors",data:t})})).catch((e=>{})))),m=new Promise(((e,t)=>fetch("/rest/council-members?_format=json").then((e=>e.json())).then((function(t){e({id:"council-members",data:t})})).catch((e=>{})))),g=(new Promise(((e,t)=>{e({id:"DWSDBackupProtection",data:r})})),new Promise(((e,t)=>{e({id:"HRDFlooding",data:r})}))),b=new Promise(((e,t)=>{let a=`https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/NRSA_2020/FeatureServer/0/query?where=&objectIds=&time=&geometry=${r.location.x}%2C${r.location.y}&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&returnCentroid=false&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json&token=`;return fetch(a).then((e=>e.json())).then((function(t){e({id:"nrsa",data:t})})).catch((e=>{}))})),h=new Promise(((e,t)=>{let a=`https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/NEZHOMESTEAD2021/FeatureServer/0/query?where=&objectIds=&time=&geometry=${r.location.x}%2C${r.location.y}&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&returnCentroid=false&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json&token=`;return fetch(a).then((e=>e.json())).then((function(t){e({id:"nez",data:t})})).catch((e=>{}))})),f=new Promise(((e,t)=>{let a=`https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/BuildingPermits/FeatureServer/0/query?where=parcel_id+%3D+%27${r.attributes.parcel_id}%27&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=3&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json`;return fetch(a).then((e=>e.json())).then((function(t){e({id:"permit-data",data:t})})).catch((e=>{}))})),y=new Promise(((e,t)=>{let a;return a="CONDO BUILDING"!=r.attributes.parcel_id?`https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/RentalStatuses/FeatureServer/0/query?where=parcel_id+%3D+%27${r.attributes.parcel_id}%27&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json`:`https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/RentalStatuses/FeatureServer/0/query?where=&objectIds=&time=&geometry=${r.location.x}%2C+${r.location.y}&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelIndexIntersects&distance=&units=esriSRUnit_Foot&relationParam=&outFields=*&returnGeometry=true&maxAllowableOffset=&geometryPrecision=&outSR=&gdbVersion=&returnDistinctValues=false&returnIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&multipatchOption=&resultOffset=&resultRecordCount=&f=json`,fetch(a).then((e=>e.json())).then((function(t){e({id:"rental-data",data:t})})).catch((e=>{}))})),v=new Promise(((e,t)=>{let a;return a="CONDO BUILDING"!=r.attributes.parcel_id?`https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/active_cofc/FeatureServer/0/query?where=parcel_id%3D%27${r.attributes.parcel_id}%27&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=1&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json`:`https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/active_cofc/FeatureServer/0/query?where=&objectIds=&time=&geometry=${r.location.x}%2C+${r.location.y}&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelIndexIntersects&distance=&units=esriSRUnit_Foot&relationParam=&outFields=*&returnGeometry=true&maxAllowableOffset=&geometryPrecision=&outSR=&gdbVersion=&returnDistinctValues=false&returnIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&multipatchOption=&resultOffset=&resultRecordCount=&f=json`,fetch(a).then((e=>e.json())).then((function(t){e({id:"rental-cert-data",data:t})})).catch((e=>{}))})),_=new Promise(((e,t)=>{let a=`https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/Blight_Violations_(DAH)/FeatureServer/0/query?where=parcelno%3D%27${r.attributes.parcel_id}%27&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=violation_date&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=2&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json&token=`;return fetch(a).then((e=>e.json())).then((function(t){e({id:"blight-data",data:t})})).catch((e=>{}))})),A=new Promise(((e,t)=>{let a=`https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/Property_Sales/FeatureServer/0/query?where=PARCEL_NO%3D%27${r.attributes.parcel_id}%27&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=4326&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=SALE_DATE&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=2&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json&token=`;return fetch(a).then((e=>e.json())).then((function(t){e({id:"sales-data",data:t})})).catch((e=>{}))})),S=new Promise(((t,a)=>{let n=s.point([r.location.x,r.location.y]),i=s.buffer(n,2,{units:"miles"}),l=s.simplify(i.geometry,{tolerance:.005,highQuality:!1}),d=o.convert(l),c=`https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/Demolitions_under_Contract/FeatureServer/0/query?where=&objectIds=&time=&geometry=${encodeURI(JSON.stringify(d))}&geometryType=esriGeometryPolygon&inSR=&spatialRel=esriSpatialRelIntersects&relationParam=&outFields=*&returnGeometry=true&returnTrueCurves=false&maxAllowableOffset=&geometryPrecision=&outSR=4326&returnIdsOnly=false&returnCountOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&gdbVersion=&returnDistinctValues=false&resultOffset=&resultRecordCount=&f=geojson`;return fetch(c).then((e=>e.json())).then((function(a){a.features.sort(e.sortFeaturesByDistanceTo(n)),t({id:"demos-data",data:a})})).catch((e=>{}))})),C=new Promise(((t,a)=>{let n=s.point([r.location.x,r.location.y]),i=s.buffer(n,2,{units:"miles"}),l=s.simplify(i.geometry,{tolerance:.005,highQuality:!1}),d=o.convert(l),c=`https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/Contracted_Stabilizations/FeatureServer/0/query?where=&objectIds=&time=&geometry=${encodeURI(JSON.stringify(d))}&geometryType=esriGeometryPolygon&inSR=&spatialRel=esriSpatialRelIntersects&relationParam=&outFields=*&returnGeometry=true&returnTrueCurves=false&maxAllowableOffset=&geometryPrecision=&outSR=4326&returnIdsOnly=false&returnCountOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&gdbVersion=&returnDistinctValues=false&resultOffset=&resultRecordCount=3&f=geojson`;return fetch(c).then((e=>e.json())).then((function(a){a.features.sort(e.sortFeaturesByDistanceTo(n)),t({id:"stabilization-data",data:a})})).catch((e=>{}))})),k=new Promise(((e,t)=>{let a=`https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/Demolitions_under_Contract/FeatureServer/0/query?where=parcel_id+%3D+%27${r.attributes.parcel_id}%27&objectIds=&time=&geometry=&geometryType=esriGeometryPolygon&inSR=&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=4326&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=demolish_by_date&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=1&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json&token=`;return fetch(a).then((e=>e.json())).then((function(t){e({id:"demo-status",data:t})})).catch((e=>{}))})),D=new Promise(((t,a)=>{let n=s.point([r.location.x,r.location.y]),i=s.buffer(n,2,{units:"miles"}),l=s.simplify(i.geometry,{tolerance:.005,highQuality:!1}),d=o.convert(l),c=`https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/2018_2019_Schools_(EEM)/FeatureServer/0/query?where=&objectIds=&time=&geometry=${encodeURI(JSON.stringify(d))}&geometryType=esriGeometryPolygon&inSR=&spatialRel=esriSpatialRelIntersects&relationParam=&outFields=*&returnGeometry=true&returnTrueCurves=false&maxAllowableOffset=&geometryPrecision=&outSR=4326&returnIdsOnly=false&returnCountOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&gdbVersion=&returnDistinctValues=false&resultOffset=&resultRecordCount=&f=geojson`;return fetch(c).then((e=>e.json())).then((function(a){a.features.sort(e.sortFeaturesByDistanceTo(n)),t({id:"schools",data:a})})).catch((e=>{}))})),E=new Promise(((e,t)=>{let a=`https://opengis.detroitmi.gov/opengis/rest/services/PublicSafety/NeighborhoodPoliceOfficers/FeatureServer/0/query?where=&objectIds=&time=&geometry=${r.location.x}%2C${r.location.y}&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelIntersects&resultType=none&distance=1&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&returnCentroid=false&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=4326&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnDistinctValues=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json&token=`;return fetch(a).then((e=>e.json())).then((function(t){e({id:"npo",data:t})})).catch((e=>{}))})),w=new Promise(((e,t)=>{let a=s.point([r.location.x,r.location.y]),n=s.buffer(a,300,{units:"meters"}),i=s.simplify(n.geometry,{tolerance:.005,highQuality:!1}),l=o.convert(i),d=`https://opengis.detroitmi.gov/opengis/rest/services/DoIT/ImproveDetroitIssues/FeatureServer/0/query?where=status+%3C%3E+%27Closed%27+and+status+%3C%3E+%27Archived%27&objectIds=&time=&geometry=${encodeURI(JSON.stringify(l))}&geometryType=esriGeometryPolygon&inSR=&spatialRel=esriSpatialRelIntersects&relationParam=&outFields=*&returnGeometry=true&returnTrueCurves=false&maxAllowableOffset=&geometryPrecision=&outSR=4326&returnIdsOnly=false&returnCountOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&gdbVersion=&returnDistinctValues=false&resultOffset=&resultRecordCount=3&f=geojson`;return fetch(d).then((e=>e.json())).then((function(t){e({id:"improve-det",data:t})})).catch((e=>{}))})),O=new Promise(((e,t)=>{let a="https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/WasteCollectionAreas/FeatureServer/0/query?where=&text=&objectIds=&time=&geometry="+r.location.x+"%2C+"+r.location.y+"&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelWithin&relationParam=&outFields=*&returnGeometry=true&returnTrueCurves=false&maxAllowableOffset=&geometryPrecision=&outSR=&returnIdsOnly=false&returnCountOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&gdbVersion=&returnDistinctValues=false&resultOffset=&resultRecordCount=&f=json";fetch(a).then((e=>e.json())).then((function(t){let a=new Date,r=a.getMonth()+1,n=a.getFullYear(),i=`https://apis.detroitmi.gov/waste_schedule/details/${t.features[0].attributes.FID}/year/${n}/month/${r}/`;return fetch(i).then((e=>e.json())).then((function(t){e({id:"recycling",data:t})}))})).catch((e=>{}))})),R=new Promise(((e,t)=>{let a="https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/Detroit_Local_Historic_Districts/FeatureServer/0/query?where=&text=&objectIds=&time=&geometry="+r.location.x+"%2C+"+r.location.y+"&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelWithin&relationParam=&outFields=*&returnGeometry=true&returnTrueCurves=false&maxAllowableOffset=&geometryPrecision=&outSR=&returnIdsOnly=false&returnCountOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&gdbVersion=&returnDistinctValues=false&resultOffset=&resultRecordCount=&f=json";fetch(a).then((e=>e.json())).then((function(t){e({id:"historicDistrict",data:t})})).catch((e=>{}))})),x=new Promise(((e,t)=>{let a=`https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/fie_properties_final/FeatureServer/0/query?where=parcel_id%3D%27${r.attributes.parcel_id}%27&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnHiddenFields=false&returnGeometry=true&returnCentroid=false&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json&token=`;return fetch(a).then((e=>e.json())).then((function(t){e({id:"fireEscrow",data:t})})).catch((e=>{}))}));return a.forEach((e=>{switch(e){case"council":n.push(d);break;case"neighborhood":n.push(l);break;case"assessors-data":null!=r.attributes.parcel_id&&""!=r.attributes.parcel_id&&("CONDO BUILDING"==r.attributes.parcel_id||n.push(i));break;case"permit-data":null!=r.attributes.parcel_id&&""!=r.attributes.parcel_id&&n.push(f);break;case"blight-data":null!=r.attributes.parcel_id&&""!=r.attributes.parcel_id&&n.push(_);break;case"salesHistoryData":null!=r.attributes.parcel_id&&""!=r.attributes.parcel_id&&n.push(A);break;case"fireEscrow":null!=r.attributes.parcel_id&&""!=r.attributes.parcel_id&&n.push(x);break;case"nez":n.push(h);break;case"nrsa":n.push(b);break;case"npo":n.push(E);break;case"improve-det":n.push(w);break;case"recycling":n.push(O);break;case"rental-data":null!=r.attributes.parcel_id&&""!=r.attributes.parcel_id&&n.push(y);break;case"rental-cert":n.push(v);break;case"demo-status":null!=r.attributes.parcel_id&&""!=r.attributes.parcel_id&&n.push(k);break;case"demos-data":n.push(S);break;case"stabilization-data":n.push(C);break;case"schools":n.push(D);break;case"historicDistrict":n.push(R);break;case"district-managers":n.push(u);break;case"district-inspectors":n.push(p);break;case"council-members":n.push(m);break;case"bop-members":n.push(c);break;case"HRDFlooding":n.push(g)}})),n}buildCouncilData(e){let t={council:{district:`District ${e.council.data.attributes.council_district}`,districtURL:null,name:null,url:null,phone:null},bop:{district:`District ${e.council.data.attributes.council_district}`,url:null,name:null,url:null,phone:null,email:null},dmanager:{name:null,url:`/departments/department-of-neighborhoods/district-${e.council.data.attributes.council_district}#block-views-block-contacts-special-block-1`,phone:null},ddmanager:{name:null,url:`/departments/department-of-neighborhoods/district-${e.council.data.attributes.council_district}#block-views-block-contacts-special-block-1`,phone:null},bliaision:{name:null,email:null},enforcement:{name:null,phone:null}};switch(e.council.data.attributes.council_district.toString()){case"1":t.council.districtURL="/taxonomy/term/1276",e["council-members"].data.forEach((e=>{"1276"==e.tid&&(t.council.name=e.field_organization_head_name,t.council.url="/taxonomy/term/1276",t.council.phone=e.field_phone)})),e["bop-members"].data.forEach((e=>{if(e.field_responsibilities.includes("District 1")){t.bop.name=e.title,t.bop.url="/taxonomy/term/4331";let a=e.field_telephone.replace(/ /g,"-");a=a.replace(/[()]/g,""),t.bop.phone=`<a href="tel:${a}">${e.field_telephone}</a>`,t.bop.email=e.field_email_address}})),e["district-managers"].data.forEach((e=>{e.field_contact_position.includes("District 1 Manager")&&(t.dmanager.name=e.title,t.dmanager.phone=e.field_telephone),e.field_contact_position.includes("District 1 Deputy Manager")&&(t.ddmanager.name=e.title,t.ddmanager.phone=e.field_telephone),e.field_contact_position.includes("District 1 Business Liaison")&&(t.bliaision.name=e.title,t.bliaision.email=e.field_email_address)})),e["district-inspectors"].data.forEach((e=>{e.field_responsibilities.includes("District 1")&&(t.enforcement.name=e.title,t.enforcement.phone=e.field_telephone)}));break;case"2":t.council.districtURL="/taxonomy/term/1476",e["council-members"].data.forEach((e=>{"1476"==e.tid&&(t.council.name=e.field_organization_head_name,t.council.url="/taxonomy/term/1476",t.council.phone=e.field_phone)})),e["bop-members"].data.forEach((e=>{if(e.field_responsibilities.includes("District 2")){t.bop.name=e.title,t.bop.url="/taxonomy/term/4336";let a=e.field_telephone.replace(/ /g,"-");a=a.replace(/[()]/g,""),t.bop.phone=`<a href="tel:${a}">${e.field_telephone}</a>`,t.bop.email=e.field_email_address}})),e["district-managers"].data.forEach((e=>{e.field_contact_position.includes("District 2 Manager")&&(t.dmanager.name=e.title,t.dmanager.phone=e.field_telephone),e.field_contact_position.includes("District 2 Deputy Manager")&&(t.ddmanager.name=e.title,t.ddmanager.phone=e.field_telephone),e.field_contact_position.includes("District 2 Business Liaison")&&(t.bliaision.name=e.title,t.bliaision.email=e.field_email_address)})),e["district-inspectors"].data.forEach((e=>{e.field_responsibilities.includes("District 2")&&(t.enforcement.name=e.title,t.enforcement.phone=e.field_telephone)}));break;case"3":t.council.districtURL="/taxonomy/term/1481",e["council-members"].data.forEach((e=>{"1481"==e.tid&&(t.council.name=e.field_organization_head_name,t.council.url="/taxonomy/term/1481",t.council.phone=e.field_phone)})),e["bop-members"].data.forEach((e=>{if(e.field_responsibilities.includes("District 3")){t.bop.name=e.title,t.bop.url="/taxonomy/term/4341";let a=e.field_telephone.replace(/ /g,"-");a=a.replace(/[()]/g,""),t.bop.phone=`<a href="tel:${a}">${e.field_telephone}</a>`,t.bop.email=e.field_email_address}})),e["district-managers"].data.forEach((e=>{e.field_contact_position.includes("District 3 Manager")&&(t.dmanager.name=e.title,t.dmanager.phone=e.field_telephone),e.field_contact_position.includes("District 3 Deputy Manager")&&(t.ddmanager.name=e.title,t.ddmanager.phone=e.field_telephone),e.field_contact_position.includes("District 3 Business Liaison")&&(t.bliaision.name=e.title,t.bliaision.email=e.field_email_address)})),e["district-inspectors"].data.forEach((e=>{e.field_responsibilities.includes("District 3")&&(t.enforcement.name=e.title,t.enforcement.phone=e.field_telephone)}));break;case"4":t.council.districtURL="/taxonomy/term/1486",e["council-members"].data.forEach((e=>{"1486"==e.tid&&(t.council.name=e.field_organization_head_name,t.council.url="/taxonomy/term/1486",t.council.phone=e.field_phone)})),e["bop-members"].data.forEach((e=>{if(e.field_responsibilities.includes("District 4")){t.bop.name=e.title,t.bop.url="/taxonomy/term/4346";let a=e.field_telephone.replace(/ /g,"-");a=a.replace(/[()]/g,""),t.bop.phone=`<a href="tel:${a}">${e.field_telephone}</a>`,t.bop.email=e.field_email_address}})),e["district-managers"].data.forEach((e=>{e.field_contact_position.includes("District 4 Manager")&&(t.dmanager.name=e.title,t.dmanager.phone=e.field_telephone),e.field_contact_position.includes("District 4 Deputy Manager")&&(t.ddmanager.name=e.title,t.ddmanager.phone=e.field_telephone),e.field_contact_position.includes("District 4 Business Liaison")&&(t.bliaision.name=e.title,t.bliaision.email=e.field_email_address)})),e["district-inspectors"].data.forEach((e=>{e.field_responsibilities.includes("District 4")&&(t.enforcement.name=e.title,t.enforcement.phone=e.field_telephone)}));break;case"5":t.council.districtURL="/taxonomy/term/1346",e["council-members"].data.forEach((e=>{"1346"==e.tid&&(t.council.name=e.field_organization_head_name,t.council.url="/taxonomy/term/1346",t.council.phone=e.field_phone)})),e["bop-members"].data.forEach((e=>{if(e.field_responsibilities.includes("District 5")){t.bop.name=e.title,t.bop.url="/taxonomy/term/4351";let a=e.field_telephone.replace(/ /g,"-");a=a.replace(/[()]/g,""),t.bop.phone=`<a href="tel:${a}">${e.field_telephone}</a>`,t.bop.email=e.field_email_address}})),e["district-managers"].data.forEach((e=>{e.field_contact_position.includes("District 5 Manager")&&(t.dmanager.name=e.title,t.dmanager.phone=e.field_telephone),e.field_contact_position.includes("District 5 Deputy Manager")&&(t.ddmanager.name=e.title,t.ddmanager.phone=e.field_telephone),e.field_contact_position.includes("District 5 Business Liaison")&&(t.bliaision.name=e.title,t.bliaision.email=e.field_email_address)})),e["district-inspectors"].data.forEach((e=>{e.field_responsibilities.includes("District 5")&&(t.enforcement.name=e.title,t.enforcement.phone=e.field_telephone)}));break;case"6":t.council.districtURL="/taxonomy/term/1491",e["council-members"].data.forEach((e=>{if("1491"==e.tid){let a=e.field_phone.replace("Office: ","");a=a.replace(/ /g,"-"),a=a.replace(/[()]/g,""),t.council.name=e.field_organization_head_name,t.council.url="/taxonomy/term/1491",t.council.phone=`<a href="tel:${a}">${e.field_phone}</a>`}})),e["bop-members"].data.forEach((e=>{if(e.field_responsibilities.includes("District 6")){t.bop.name=e.title,t.bop.url="/taxonomy/term/4321";let a=e.field_telephone.replace(/ /g,"-");a=a.replace(/[()]/g,""),t.bop.phone=`<a href="tel:${a}">${e.field_telephone}</a>`,t.bop.email=e.field_email_address}})),e["district-managers"].data.forEach((e=>{if(e.field_contact_position.includes("District 6 Manager")){let a=e.field_telephone.replace(/ /g,"-");a=a.replace(/[()]/g,""),t.dmanager.name=e.title,t.dmanager.phone=`<a href="tel:${a}">${e.field_telephone}</a>`}if(e.field_contact_position.includes("District 6 Deputy Manager")){let a=e.field_telephone.replace(/ /g,"-");a=a.replace(/[()]/g,""),t.ddmanager.name=e.title,t.ddmanager.phone=`<a href="tel:${a}">${e.field_telephone}</a>`}e.field_contact_position.includes("District 6 Business Liaison")&&(t.bliaision.name=e.title,t.bliaision.email=e.field_email_address)})),e["district-inspectors"].data.forEach((e=>{if(e.field_responsibilities.includes("District 6")){let a=e.field_telephone.replace(/ /g,"-");a=a.replace(/[()]/g,""),t.enforcement.name=e.title,t.enforcement.phone=`<a href="tel:${a}">${e.field_telephone}</a>`}}));break;case"7":t.council.districtURL="/taxonomy/term/1511",e["council-members"].data.forEach((e=>{"1511"==e.tid&&(t.council.name=e.field_organization_head_name,t.council.url="/taxonomy/term/1511",t.council.phone=e.field_phone)})),e["bop-members"].data.forEach((e=>{if(e.field_responsibilities.includes("District 7")){t.bop.name=e.title,t.bop.url="/taxonomy/term/4356";let a=e.field_telephone.replace(/ /g,"-");a=a.replace(/[()]/g,""),t.bop.phone=`<a href="tel:${a}">${e.field_telephone}</a>`,t.bop.email=e.field_email_address}})),e["district-managers"].data.forEach((e=>{e.field_contact_position.includes("District 7 Manager")&&(t.dmanager.name=e.title,t.dmanager.phone=e.field_telephone),e.field_contact_position.includes("District 7 Deputy Manager")&&(t.ddmanager.name=e.title,t.ddmanager.phone=e.field_telephone),e.field_contact_position.includes("District 7 Business Liaison")&&(t.bliaision.name=e.title,t.bliaision.email=e.field_email_address)})),e["district-inspectors"].data.forEach((e=>{e.field_responsibilities.includes("District 7")&&(t.enforcement.name=e.title,t.enforcement.phone=e.field_telephone)}))}return t}sortFeaturesByDistanceTo(e){return function(t,a){var r={units:"radians"};return s.distance(e,t,r)-s.distance(e,a,r)}}getData(e){const t=document.getElementsByTagName("my-home-info"),a=t[0].getAttribute("data-active-sets").split(","),r=(JSON.parse(t[0].getAttribute("data-parcel-id")),JSON.parse(t[0].getAttribute("data-api-stored-datasets")));let n=!1;for(let i in r)a.includes(i)&&(n=!0);if(n){let e={};a.forEach((t=>{e[t]=r[t]})),t[0].setAttribute("data-api-active-datasets",JSON.stringify(e)),t[0].setAttribute("data-app-state","results")}else{let r=e.getDataSets(e);Promise.all(r).then((r=>{let n={};for(let e in r)null!=r[e]?n[r[e].id]=r[e]:initialLoadChecker=!1;if(a.includes("council")){let t=e.buildCouncilData(n);n["council-members"]={id:"council-members",data:t.council},n["bop-members"]={id:"bop-members",data:t.bop};let a={manager:t.dmanager,deputy:t.ddmanager};n["district-managers"]={id:"district-managers",data:a},n["business-liaison"]={id:"business-liaison",data:t.bliaision},n["district-inspectors"]={id:"district-inspectors",data:t.enforcement}}if(a.includes("DWSDBackupProtection"))try{n.DWSDBackupProtection||(n.DWSDBackupProtection={id:"DWSDBackupProtection",data:n.neighborhood.data})}catch(i){}t[0].setAttribute("data-api-active-datasets",JSON.stringify(n)),t[0].setAttribute("data-app-state","results")})).catch((e=>{}))}}clearLoader(e){const t=e.shadowRoot;for(;t.firstChild;)t.removeChild(t.firstChild)}loadLoader(e){const t=e.shadowRoot,a=document.createElement("section");switch(a.id="loader-wrapper",e.getAttribute("data-loader-state")){case"active":e.getData(e);const r=document.createElement("p");r.innerText="Loading DATA",a.appendChild(r),t.appendChild(a);break;case"finished":const n=document.createElement("p");n.innerText="Data loaded",a.appendChild(n),t.appendChild(a)}}}customElements.define("app-display",i),customElements.define("app-data-loader",l);class d extends HTMLElement{static get observedAttributes(){return["data-app-state","data-parcel-id","data-map-state"]}constructor(){super();const e=this.attachShadow({mode:"open"});let t=document.getElementsByTagName("my-home-info")[0].getAttribute("data-app-state");const a=document.createElement("section");a.id="app-wrapper";const r=document.createElement("app-display");"active-screen"==t?r.setAttribute("data-display-type","active"):r.setAttribute("data-display-type","welcome"),a.appendChild(r),e.appendChild(a)}attributeChangedCallback(e,t,a){this.shadowRoot;const r=document.getElementsByTagName("my-home-info")[0].getAttribute("data-app-mode");switch(e){case"data-app-state":null!=t&&(this.clearApp(this),this.loadApp(this));break;case"data-parcel-id":"none"!=a?this.setAttribute("data-app-state","loading-screen"):"my-home-info"==r&&this.setAttribute("data-app-state","welcome-screen");break;case"data-map-state":break;default:console.log("not catched")}}clearApp(e){const t=e.shadowRoot;for(;t.firstChild;)t.removeChild(t.firstChild)}loadApp(e){const t=e.shadowRoot,a=document.createElement("div");a.id="app-wrapper";const r=document.createElement("app-display"),n=document.createElement("app-data-loader");switch(e.getAttribute("data-app-state")){case"welcome-screen":r.setAttribute("data-display-type","welcome"),a.appendChild(r);break;case"active-screen":r.setAttribute("data-display-type","active"),a.appendChild(r);break;case"loading-screen":r.setAttribute("data-display-type","loading"),n.setAttribute("data-loader-state","active"),a.appendChild(r);break;case"results":r.setAttribute("data-display-type","results"),a.appendChild(r);break;case"map":const e=document.createElement("cod-map");e.id="cod-map";let t=JSON.parse(this.getAttribute("data-api-active-datasets")),i=this.getAttribute("data-map-active-data");const s={id:"mapData",layers:[{name:"data-points",type:"circle",radius:6,color:"#004445",active:!0,sort:10,source:"data-points"}],source:t[i].data};let o;switch(i){case"schools":o={schools:[{type:"field-value",label:"Name:",value:"EntityOfficialName"}]};break;case"demos-data":o={"demos-data":[{type:"field-value",label:"Address:",value:"address"}]};break;case"stabilization-data":o={"stabilization-data":[{type:"field-value",label:"Address:",value:"address"}]};break;case"improve-det":o={"improve-det":[{type:"field-value",label:"Address:",value:"address"},{type:"field-value",label:"Type:",value:"request_type_title"}]}}e.setAttribute("data-parent-component","my-home-info"),e.setAttribute("data-map-mode","my-home-info"),e.setAttribute("data-map-active-data",this.getAttribute("data-map-active-data")),e.setAttribute("data-popup-structure",JSON.stringify(o)),e.setAttribute("data-map-data",JSON.stringify(s)),e.setAttribute("data-location",this.getAttribute("data-parcel-id")),e.setAttribute("data-map-state","init"),a.appendChild(e);break;case"error":r.setAttribute("data-display-type","error"),a.appendChild(r);break;case"print":r.setAttribute("data-display-type","print"),a.appendChild(r)}null==t.firstChild&&t.appendChild(a)}}var c=a(2181),u=a(9766),p=a(6869);customElements.define("my-home-info",d),c.S1({dsn:"https://536fad340d72a07ee08fe3df749b982e@o4505717305704448.ingest.sentry.io/4505720878792704",release:"local-services-lookup@2.0.9",integrations:[new u.gE,new p.U],tracesSampleRate:1,tracePropagationTargets:["localhost",/^https:\/\/detroitmi\.gov/],replaysSessionSampleRate:.1,replaysOnErrorSampleRate:1})}},e=>{e.O(0,[315,152,47,600,489],(()=>{return t=2789,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=main.js.map